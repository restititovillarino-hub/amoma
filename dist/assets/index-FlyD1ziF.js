function Lw(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Fw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ny={exports:{}},Ql={},Sy={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ao=Symbol.for("react.element"),Uw=Symbol.for("react.portal"),Bw=Symbol.for("react.fragment"),zw=Symbol.for("react.strict_mode"),$w=Symbol.for("react.profiler"),Ww=Symbol.for("react.provider"),Hw=Symbol.for("react.context"),qw=Symbol.for("react.forward_ref"),Gw=Symbol.for("react.suspense"),Kw=Symbol.for("react.memo"),Qw=Symbol.for("react.lazy"),Gm=Symbol.iterator;function Yw(t){return t===null||typeof t!="object"?null:(t=Gm&&t[Gm]||t["@@iterator"],typeof t=="function"?t:null)}var Ay={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Cy=Object.assign,Ry={};function Ks(t,e,n){this.props=t,this.context=e,this.refs=Ry,this.updater=n||Ay}Ks.prototype.isReactComponent={};Ks.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ks.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Py(){}Py.prototype=Ks.prototype;function nh(t,e,n){this.props=t,this.context=e,this.refs=Ry,this.updater=n||Ay}var rh=nh.prototype=new Py;rh.constructor=nh;Cy(rh,Ks.prototype);rh.isPureReactComponent=!0;var Km=Array.isArray,ky=Object.prototype.hasOwnProperty,sh={current:null},jy={key:!0,ref:!0,__self:!0,__source:!0};function Dy(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)ky.call(e,r)&&!jy.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Ao,type:t,key:i,ref:o,props:s,_owner:sh.current}}function Jw(t,e){return{$$typeof:Ao,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ih(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ao}function Xw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Qm=/\/+/g;function Xc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Xw(""+t.key):e.toString(36)}function Oa(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ao:case Uw:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Xc(o,0):r,Km(s)?(n="",t!=null&&(n=t.replace(Qm,"$&/")+"/"),Oa(s,e,n,"",function(d){return d})):s!=null&&(ih(s)&&(s=Jw(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Qm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Km(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+Xc(i,c);o+=Oa(i,e,n,u,s)}else if(u=Yw(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+Xc(i,c++),o+=Oa(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function da(t,e,n){if(t==null)return t;var r=[],s=0;return Oa(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Zw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ut={current:null},Ma={transition:null},eE={ReactCurrentDispatcher:ut,ReactCurrentBatchConfig:Ma,ReactCurrentOwner:sh};function Oy(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:da,forEach:function(t,e,n){da(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return da(t,function(){e++}),e},toArray:function(t){return da(t,function(e){return e})||[]},only:function(t){if(!ih(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=Ks;ee.Fragment=Bw;ee.Profiler=$w;ee.PureComponent=nh;ee.StrictMode=zw;ee.Suspense=Gw;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eE;ee.act=Oy;ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Cy({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=sh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)ky.call(e,u)&&!jy.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Ao,type:t.type,key:s,ref:i,props:r,_owner:o}};ee.createContext=function(t){return t={$$typeof:Hw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ww,_context:t},t.Consumer=t};ee.createElement=Dy;ee.createFactory=function(t){var e=Dy.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:qw,render:t}};ee.isValidElement=ih;ee.lazy=function(t){return{$$typeof:Qw,_payload:{_status:-1,_result:t},_init:Zw}};ee.memo=function(t,e){return{$$typeof:Kw,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=Ma.transition;Ma.transition={};try{t()}finally{Ma.transition=e}};ee.unstable_act=Oy;ee.useCallback=function(t,e){return ut.current.useCallback(t,e)};ee.useContext=function(t){return ut.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return ut.current.useDeferredValue(t)};ee.useEffect=function(t,e){return ut.current.useEffect(t,e)};ee.useId=function(){return ut.current.useId()};ee.useImperativeHandle=function(t,e,n){return ut.current.useImperativeHandle(t,e,n)};ee.useInsertionEffect=function(t,e){return ut.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return ut.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return ut.current.useMemo(t,e)};ee.useReducer=function(t,e,n){return ut.current.useReducer(t,e,n)};ee.useRef=function(t){return ut.current.useRef(t)};ee.useState=function(t){return ut.current.useState(t)};ee.useSyncExternalStore=function(t,e,n){return ut.current.useSyncExternalStore(t,e,n)};ee.useTransition=function(){return ut.current.useTransition()};ee.version="18.3.1";Sy.exports=ee;var O=Sy.exports;const My=Fw(O),tE=Lw({__proto__:null,default:My},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nE=O,rE=Symbol.for("react.element"),sE=Symbol.for("react.fragment"),iE=Object.prototype.hasOwnProperty,oE=nE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,aE={key:!0,ref:!0,__self:!0,__source:!0};function Vy(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)iE.call(e,r)&&!aE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:rE,type:t,key:i,ref:o,props:s,_owner:oE.current}}Ql.Fragment=sE;Ql.jsx=Vy;Ql.jsxs=Vy;Ny.exports=Ql;var l=Ny.exports,Vu={},Ly={exports:{}},Tt={},Fy={exports:{}},Uy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,Y){var Z=z.length;z.push(Y);e:for(;0<Z;){var ve=Z-1>>>1,ce=z[ve];if(0<s(ce,Y))z[ve]=Y,z[Z]=ce,Z=ve;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var Y=z[0],Z=z.pop();if(Z!==Y){z[0]=Z;e:for(var ve=0,ce=z.length,Ne=ce>>>1;ve<Ne;){var on=2*(ve+1)-1,an=z[on],ln=on+1,cn=z[ln];if(0>s(an,Z))ln<ce&&0>s(cn,an)?(z[ve]=cn,z[ln]=Z,ve=ln):(z[ve]=an,z[on]=Z,ve=on);else if(ln<ce&&0>s(cn,Z))z[ve]=cn,z[ln]=Z,ve=ln;else break e}}return Y}function s(z,Y){var Z=z.sortIndex-Y.sortIndex;return Z!==0?Z:z.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],m=1,p=null,g=3,_=!1,S=!1,A=!1,P=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(z){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=z)r(d),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(d)}}function R(z){if(A=!1,E(z),!S)if(n(u)!==null)S=!0,ye(V);else{var Y=n(d);Y!==null&&Me(R,Y.startTime-z)}}function V(z,Y){S=!1,A&&(A=!1,T(x),x=-1),_=!0;var Z=g;try{for(E(Y),p=n(u);p!==null&&(!(p.expirationTime>Y)||z&&!C());){var ve=p.callback;if(typeof ve=="function"){p.callback=null,g=p.priorityLevel;var ce=ve(p.expirationTime<=Y);Y=t.unstable_now(),typeof ce=="function"?p.callback=ce:p===n(u)&&r(u),E(Y)}else r(u);p=n(u)}if(p!==null)var Ne=!0;else{var on=n(d);on!==null&&Me(R,on.startTime-Y),Ne=!1}return Ne}finally{p=null,g=Z,_=!1}}var U=!1,I=null,x=-1,w=5,b=-1;function C(){return!(t.unstable_now()-b<w)}function k(){if(I!==null){var z=t.unstable_now();b=z;var Y=!0;try{Y=I(!0,z)}finally{Y?N():(U=!1,I=null)}}else U=!1}var N;if(typeof v=="function")N=function(){v(k)};else if(typeof MessageChannel<"u"){var vt=new MessageChannel,sn=vt.port2;vt.port1.onmessage=k,N=function(){sn.postMessage(null)}}else N=function(){P(k,0)};function ye(z){I=z,U||(U=!0,N())}function Me(z,Y){x=P(function(){z(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){S||_||(S=!0,ye(V))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(z){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var Z=g;g=Y;try{return z()}finally{g=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,Y){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Z=g;g=z;try{return Y()}finally{g=Z}},t.unstable_scheduleCallback=function(z,Y,Z){var ve=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ve+Z:ve):Z=ve,z){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=Z+ce,z={id:m++,callback:Y,priorityLevel:z,startTime:Z,expirationTime:ce,sortIndex:-1},Z>ve?(z.sortIndex=Z,e(d,z),n(u)===null&&z===n(d)&&(A?(T(x),x=-1):A=!0,Me(R,Z-ve))):(z.sortIndex=ce,e(u,z),S||_||(S=!0,ye(V))),z},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(z){var Y=g;return function(){var Z=g;g=Y;try{return z.apply(this,arguments)}finally{g=Z}}}})(Uy);Fy.exports=Uy;var lE=Fy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cE=O,It=lE;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var By=new Set,Zi={};function Kr(t,e){ks(t,e),ks(t+"Capture",e)}function ks(t,e){for(Zi[t]=e,t=0;t<e.length;t++)By.add(e[t])}var En=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lu=Object.prototype.hasOwnProperty,uE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ym={},Jm={};function dE(t){return Lu.call(Jm,t)?!0:Lu.call(Ym,t)?!1:uE.test(t)?Jm[t]=!0:(Ym[t]=!0,!1)}function hE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function fE(t,e,n,r){if(e===null||typeof e>"u"||hE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function dt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qe[t]=new dt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qe[e]=new dt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qe[t]=new dt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qe[t]=new dt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qe[t]=new dt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qe[t]=new dt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qe[t]=new dt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qe[t]=new dt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qe[t]=new dt(t,5,!1,t.toLowerCase(),null,!1,!1)});var oh=/[\-:]([a-z])/g;function ah(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(oh,ah);qe[e]=new dt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(oh,ah);qe[e]=new dt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(oh,ah);qe[e]=new dt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qe[t]=new dt(t,1,!1,t.toLowerCase(),null,!1,!1)});qe.xlinkHref=new dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qe[t]=new dt(t,1,!1,t.toLowerCase(),null,!0,!0)});function lh(t,e,n,r){var s=qe.hasOwnProperty(e)?qe[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(fE(e,n,s,r)&&(n=null),r||s===null?dE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Rn=cE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ha=Symbol.for("react.element"),cs=Symbol.for("react.portal"),us=Symbol.for("react.fragment"),ch=Symbol.for("react.strict_mode"),Fu=Symbol.for("react.profiler"),zy=Symbol.for("react.provider"),$y=Symbol.for("react.context"),uh=Symbol.for("react.forward_ref"),Uu=Symbol.for("react.suspense"),Bu=Symbol.for("react.suspense_list"),dh=Symbol.for("react.memo"),Ln=Symbol.for("react.lazy"),Wy=Symbol.for("react.offscreen"),Xm=Symbol.iterator;function xi(t){return t===null||typeof t!="object"?null:(t=Xm&&t[Xm]||t["@@iterator"],typeof t=="function"?t:null)}var we=Object.assign,Zc;function Ri(t){if(Zc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Zc=e&&e[1]||""}return`
`+Zc+t}var eu=!1;function tu(t,e){if(!t||eu)return"";eu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{eu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ri(t):""}function mE(t){switch(t.tag){case 5:return Ri(t.type);case 16:return Ri("Lazy");case 13:return Ri("Suspense");case 19:return Ri("SuspenseList");case 0:case 2:case 15:return t=tu(t.type,!1),t;case 11:return t=tu(t.type.render,!1),t;case 1:return t=tu(t.type,!0),t;default:return""}}function zu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case us:return"Fragment";case cs:return"Portal";case Fu:return"Profiler";case ch:return"StrictMode";case Uu:return"Suspense";case Bu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case $y:return(t.displayName||"Context")+".Consumer";case zy:return(t._context.displayName||"Context")+".Provider";case uh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dh:return e=t.displayName||null,e!==null?e:zu(t.type)||"Memo";case Ln:e=t._payload,t=t._init;try{return zu(t(e))}catch{}}return null}function pE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zu(e);case 8:return e===ch?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ur(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Hy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function gE(t){var e=Hy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function fa(t){t._valueTracker||(t._valueTracker=gE(t))}function qy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Hy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ol(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $u(t,e){var n=e.checked;return we({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Zm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ur(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Gy(t,e){e=e.checked,e!=null&&lh(t,"checked",e,!1)}function Wu(t,e){Gy(t,e);var n=ur(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hu(t,e.type,ur(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ep(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hu(t,e,n){(e!=="number"||ol(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Pi=Array.isArray;function Es(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ur(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function qu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return we({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(Pi(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ur(n)}}function Ky(t,e){var n=ur(e.value),r=ur(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function np(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Qy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Qy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ma,Yy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ma=ma||document.createElement("div"),ma.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ma.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function eo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yE=["Webkit","ms","Moz","O"];Object.keys(Fi).forEach(function(t){yE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fi[e]=Fi[t]})});function Jy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fi.hasOwnProperty(t)&&Fi[t]?(""+e).trim():e+"px"}function Xy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Jy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var vE=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ku(t,e){if(e){if(vE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function Qu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yu=null;function hh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ju=null,Is=null,Ts=null;function rp(t){if(t=Po(t)){if(typeof Ju!="function")throw Error(F(280));var e=t.stateNode;e&&(e=ec(e),Ju(t.stateNode,t.type,e))}}function Zy(t){Is?Ts?Ts.push(t):Ts=[t]:Is=t}function ev(){if(Is){var t=Is,e=Ts;if(Ts=Is=null,rp(t),e)for(t=0;t<e.length;t++)rp(e[t])}}function tv(t,e){return t(e)}function nv(){}var nu=!1;function rv(t,e,n){if(nu)return t(e,n);nu=!0;try{return tv(t,e,n)}finally{nu=!1,(Is!==null||Ts!==null)&&(nv(),ev())}}function to(t,e){var n=t.stateNode;if(n===null)return null;var r=ec(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var Xu=!1;if(En)try{var _i={};Object.defineProperty(_i,"passive",{get:function(){Xu=!0}}),window.addEventListener("test",_i,_i),window.removeEventListener("test",_i,_i)}catch{Xu=!1}function xE(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(m){this.onError(m)}}var Ui=!1,al=null,ll=!1,Zu=null,_E={onError:function(t){Ui=!0,al=t}};function wE(t,e,n,r,s,i,o,c,u){Ui=!1,al=null,xE.apply(_E,arguments)}function EE(t,e,n,r,s,i,o,c,u){if(wE.apply(this,arguments),Ui){if(Ui){var d=al;Ui=!1,al=null}else throw Error(F(198));ll||(ll=!0,Zu=d)}}function Qr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function sv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sp(t){if(Qr(t)!==t)throw Error(F(188))}function IE(t){var e=t.alternate;if(!e){if(e=Qr(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return sp(s),t;if(i===r)return sp(s),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function iv(t){return t=IE(t),t!==null?ov(t):null}function ov(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ov(t);if(e!==null)return e;t=t.sibling}return null}var av=It.unstable_scheduleCallback,ip=It.unstable_cancelCallback,TE=It.unstable_shouldYield,bE=It.unstable_requestPaint,Ae=It.unstable_now,NE=It.unstable_getCurrentPriorityLevel,fh=It.unstable_ImmediatePriority,lv=It.unstable_UserBlockingPriority,cl=It.unstable_NormalPriority,SE=It.unstable_LowPriority,cv=It.unstable_IdlePriority,Yl=null,Jt=null;function AE(t){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(Yl,t,void 0,(t.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:PE,CE=Math.log,RE=Math.LN2;function PE(t){return t>>>=0,t===0?32:31-(CE(t)/RE|0)|0}var pa=64,ga=4194304;function ki(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ul(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=ki(c):(i&=o,i!==0&&(r=ki(i)))}else o=n&~s,o!==0?r=ki(o):i!==0&&(r=ki(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zt(e),s=1<<n,r|=t[n],e&=~s;return r}function kE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-zt(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=kE(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function ed(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function uv(){var t=pa;return pa<<=1,!(pa&4194240)&&(pa=64),t}function ru(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Co(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zt(e),t[e]=n}function DE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-zt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function mh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ae=0;function dv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var hv,ph,fv,mv,pv,td=!1,ya=[],Yn=null,Jn=null,Xn=null,no=new Map,ro=new Map,Un=[],OE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function op(t,e){switch(t){case"focusin":case"focusout":Yn=null;break;case"dragenter":case"dragleave":Jn=null;break;case"mouseover":case"mouseout":Xn=null;break;case"pointerover":case"pointerout":no.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ro.delete(e.pointerId)}}function wi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Po(e),e!==null&&ph(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function ME(t,e,n,r,s){switch(e){case"focusin":return Yn=wi(Yn,t,e,n,r,s),!0;case"dragenter":return Jn=wi(Jn,t,e,n,r,s),!0;case"mouseover":return Xn=wi(Xn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return no.set(i,wi(no.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ro.set(i,wi(ro.get(i)||null,t,e,n,r,s)),!0}return!1}function gv(t){var e=Rr(t.target);if(e!==null){var n=Qr(e);if(n!==null){if(e=n.tag,e===13){if(e=sv(n),e!==null){t.blockedOn=e,pv(t.priority,function(){fv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Va(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=nd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Yu=r,n.target.dispatchEvent(r),Yu=null}else return e=Po(n),e!==null&&ph(e),t.blockedOn=n,!1;e.shift()}return!0}function ap(t,e,n){Va(t)&&n.delete(e)}function VE(){td=!1,Yn!==null&&Va(Yn)&&(Yn=null),Jn!==null&&Va(Jn)&&(Jn=null),Xn!==null&&Va(Xn)&&(Xn=null),no.forEach(ap),ro.forEach(ap)}function Ei(t,e){t.blockedOn===e&&(t.blockedOn=null,td||(td=!0,It.unstable_scheduleCallback(It.unstable_NormalPriority,VE)))}function so(t){function e(s){return Ei(s,t)}if(0<ya.length){Ei(ya[0],t);for(var n=1;n<ya.length;n++){var r=ya[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Yn!==null&&Ei(Yn,t),Jn!==null&&Ei(Jn,t),Xn!==null&&Ei(Xn,t),no.forEach(e),ro.forEach(e),n=0;n<Un.length;n++)r=Un[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Un.length&&(n=Un[0],n.blockedOn===null);)gv(n),n.blockedOn===null&&Un.shift()}var bs=Rn.ReactCurrentBatchConfig,dl=!0;function LE(t,e,n,r){var s=ae,i=bs.transition;bs.transition=null;try{ae=1,gh(t,e,n,r)}finally{ae=s,bs.transition=i}}function FE(t,e,n,r){var s=ae,i=bs.transition;bs.transition=null;try{ae=4,gh(t,e,n,r)}finally{ae=s,bs.transition=i}}function gh(t,e,n,r){if(dl){var s=nd(t,e,n,r);if(s===null)fu(t,e,r,hl,n),op(t,r);else if(ME(s,t,e,n,r))r.stopPropagation();else if(op(t,r),e&4&&-1<OE.indexOf(t)){for(;s!==null;){var i=Po(s);if(i!==null&&hv(i),i=nd(t,e,n,r),i===null&&fu(t,e,r,hl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else fu(t,e,r,null,n)}}var hl=null;function nd(t,e,n,r){if(hl=null,t=hh(r),t=Rr(t),t!==null)if(e=Qr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=sv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return hl=t,null}function yv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(NE()){case fh:return 1;case lv:return 4;case cl:case SE:return 16;case cv:return 536870912;default:return 16}default:return 16}}var qn=null,yh=null,La=null;function vv(){if(La)return La;var t,e=yh,n=e.length,r,s="value"in qn?qn.value:qn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return La=s.slice(t,1<r?1-r:void 0)}function Fa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function va(){return!0}function lp(){return!1}function bt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?va:lp,this.isPropagationStopped=lp,this}return we(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=va)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=va)},persist:function(){},isPersistent:va}),e}var Qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vh=bt(Qs),Ro=we({},Qs,{view:0,detail:0}),UE=bt(Ro),su,iu,Ii,Jl=we({},Ro,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ii&&(Ii&&t.type==="mousemove"?(su=t.screenX-Ii.screenX,iu=t.screenY-Ii.screenY):iu=su=0,Ii=t),su)},movementY:function(t){return"movementY"in t?t.movementY:iu}}),cp=bt(Jl),BE=we({},Jl,{dataTransfer:0}),zE=bt(BE),$E=we({},Ro,{relatedTarget:0}),ou=bt($E),WE=we({},Qs,{animationName:0,elapsedTime:0,pseudoElement:0}),HE=bt(WE),qE=we({},Qs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),GE=bt(qE),KE=we({},Qs,{data:0}),up=bt(KE),QE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},JE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=JE[t])?!!e[t]:!1}function xh(){return XE}var ZE=we({},Ro,{key:function(t){if(t.key){var e=QE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Fa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?YE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xh,charCode:function(t){return t.type==="keypress"?Fa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),eI=bt(ZE),tI=we({},Jl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dp=bt(tI),nI=we({},Ro,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xh}),rI=bt(nI),sI=we({},Qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),iI=bt(sI),oI=we({},Jl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),aI=bt(oI),lI=[9,13,27,32],_h=En&&"CompositionEvent"in window,Bi=null;En&&"documentMode"in document&&(Bi=document.documentMode);var cI=En&&"TextEvent"in window&&!Bi,xv=En&&(!_h||Bi&&8<Bi&&11>=Bi),hp=" ",fp=!1;function _v(t,e){switch(t){case"keyup":return lI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ds=!1;function uI(t,e){switch(t){case"compositionend":return wv(e);case"keypress":return e.which!==32?null:(fp=!0,hp);case"textInput":return t=e.data,t===hp&&fp?null:t;default:return null}}function dI(t,e){if(ds)return t==="compositionend"||!_h&&_v(t,e)?(t=vv(),La=yh=qn=null,ds=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xv&&e.locale!=="ko"?null:e.data;default:return null}}var hI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!hI[t.type]:e==="textarea"}function Ev(t,e,n,r){Zy(r),e=fl(e,"onChange"),0<e.length&&(n=new vh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var zi=null,io=null;function fI(t){jv(t,0)}function Xl(t){var e=ms(t);if(qy(e))return t}function mI(t,e){if(t==="change")return e}var Iv=!1;if(En){var au;if(En){var lu="oninput"in document;if(!lu){var pp=document.createElement("div");pp.setAttribute("oninput","return;"),lu=typeof pp.oninput=="function"}au=lu}else au=!1;Iv=au&&(!document.documentMode||9<document.documentMode)}function gp(){zi&&(zi.detachEvent("onpropertychange",Tv),io=zi=null)}function Tv(t){if(t.propertyName==="value"&&Xl(io)){var e=[];Ev(e,io,t,hh(t)),rv(fI,e)}}function pI(t,e,n){t==="focusin"?(gp(),zi=e,io=n,zi.attachEvent("onpropertychange",Tv)):t==="focusout"&&gp()}function gI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xl(io)}function yI(t,e){if(t==="click")return Xl(e)}function vI(t,e){if(t==="input"||t==="change")return Xl(e)}function xI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wt=typeof Object.is=="function"?Object.is:xI;function oo(t,e){if(Wt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Lu.call(e,s)||!Wt(t[s],e[s]))return!1}return!0}function yp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vp(t,e){var n=yp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=yp(n)}}function bv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?bv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Nv(){for(var t=window,e=ol();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ol(t.document)}return e}function wh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _I(t){var e=Nv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&bv(n.ownerDocument.documentElement,n)){if(r!==null&&wh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=vp(n,i);var o=vp(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var wI=En&&"documentMode"in document&&11>=document.documentMode,hs=null,rd=null,$i=null,sd=!1;function xp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sd||hs==null||hs!==ol(r)||(r=hs,"selectionStart"in r&&wh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$i&&oo($i,r)||($i=r,r=fl(rd,"onSelect"),0<r.length&&(e=new vh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=hs)))}function xa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var fs={animationend:xa("Animation","AnimationEnd"),animationiteration:xa("Animation","AnimationIteration"),animationstart:xa("Animation","AnimationStart"),transitionend:xa("Transition","TransitionEnd")},cu={},Sv={};En&&(Sv=document.createElement("div").style,"AnimationEvent"in window||(delete fs.animationend.animation,delete fs.animationiteration.animation,delete fs.animationstart.animation),"TransitionEvent"in window||delete fs.transitionend.transition);function Zl(t){if(cu[t])return cu[t];if(!fs[t])return t;var e=fs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Sv)return cu[t]=e[n];return t}var Av=Zl("animationend"),Cv=Zl("animationiteration"),Rv=Zl("animationstart"),Pv=Zl("transitionend"),kv=new Map,_p="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pr(t,e){kv.set(t,e),Kr(e,[t])}for(var uu=0;uu<_p.length;uu++){var du=_p[uu],EI=du.toLowerCase(),II=du[0].toUpperCase()+du.slice(1);pr(EI,"on"+II)}pr(Av,"onAnimationEnd");pr(Cv,"onAnimationIteration");pr(Rv,"onAnimationStart");pr("dblclick","onDoubleClick");pr("focusin","onFocus");pr("focusout","onBlur");pr(Pv,"onTransitionEnd");ks("onMouseEnter",["mouseout","mouseover"]);ks("onMouseLeave",["mouseout","mouseover"]);ks("onPointerEnter",["pointerout","pointerover"]);ks("onPointerLeave",["pointerout","pointerover"]);Kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ji="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TI=new Set("cancel close invalid load scroll toggle".split(" ").concat(ji));function wp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,EE(r,e,void 0,t),t.currentTarget=null}function jv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;wp(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;wp(s,c,d),i=u}}}if(ll)throw t=Zu,ll=!1,Zu=null,t}function fe(t,e){var n=e[cd];n===void 0&&(n=e[cd]=new Set);var r=t+"__bubble";n.has(r)||(Dv(e,t,2,!1),n.add(r))}function hu(t,e,n){var r=0;e&&(r|=4),Dv(n,t,r,e)}var _a="_reactListening"+Math.random().toString(36).slice(2);function ao(t){if(!t[_a]){t[_a]=!0,By.forEach(function(n){n!=="selectionchange"&&(TI.has(n)||hu(n,!1,t),hu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_a]||(e[_a]=!0,hu("selectionchange",!1,e))}}function Dv(t,e,n,r){switch(yv(e)){case 1:var s=LE;break;case 4:s=FE;break;default:s=gh}n=s.bind(null,e,n,t),s=void 0,!Xu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function fu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=Rr(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}rv(function(){var d=i,m=hh(n),p=[];e:{var g=kv.get(t);if(g!==void 0){var _=vh,S=t;switch(t){case"keypress":if(Fa(n)===0)break e;case"keydown":case"keyup":_=eI;break;case"focusin":S="focus",_=ou;break;case"focusout":S="blur",_=ou;break;case"beforeblur":case"afterblur":_=ou;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=cp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=zE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=rI;break;case Av:case Cv:case Rv:_=HE;break;case Pv:_=iI;break;case"scroll":_=UE;break;case"wheel":_=aI;break;case"copy":case"cut":case"paste":_=GE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=dp}var A=(e&4)!==0,P=!A&&t==="scroll",T=A?g!==null?g+"Capture":null:g;A=[];for(var v=d,E;v!==null;){E=v;var R=E.stateNode;if(E.tag===5&&R!==null&&(E=R,T!==null&&(R=to(v,T),R!=null&&A.push(lo(v,R,E)))),P)break;v=v.return}0<A.length&&(g=new _(g,S,null,n,m),p.push({event:g,listeners:A}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",g&&n!==Yu&&(S=n.relatedTarget||n.fromElement)&&(Rr(S)||S[In]))break e;if((_||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,_?(S=n.relatedTarget||n.toElement,_=d,S=S?Rr(S):null,S!==null&&(P=Qr(S),S!==P||S.tag!==5&&S.tag!==6)&&(S=null)):(_=null,S=d),_!==S)){if(A=cp,R="onMouseLeave",T="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(A=dp,R="onPointerLeave",T="onPointerEnter",v="pointer"),P=_==null?g:ms(_),E=S==null?g:ms(S),g=new A(R,v+"leave",_,n,m),g.target=P,g.relatedTarget=E,R=null,Rr(m)===d&&(A=new A(T,v+"enter",S,n,m),A.target=E,A.relatedTarget=P,R=A),P=R,_&&S)t:{for(A=_,T=S,v=0,E=A;E;E=rs(E))v++;for(E=0,R=T;R;R=rs(R))E++;for(;0<v-E;)A=rs(A),v--;for(;0<E-v;)T=rs(T),E--;for(;v--;){if(A===T||T!==null&&A===T.alternate)break t;A=rs(A),T=rs(T)}A=null}else A=null;_!==null&&Ep(p,g,_,A,!1),S!==null&&P!==null&&Ep(p,P,S,A,!0)}}e:{if(g=d?ms(d):window,_=g.nodeName&&g.nodeName.toLowerCase(),_==="select"||_==="input"&&g.type==="file")var V=mI;else if(mp(g))if(Iv)V=vI;else{V=gI;var U=pI}else(_=g.nodeName)&&_.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(V=yI);if(V&&(V=V(t,d))){Ev(p,V,n,m);break e}U&&U(t,g,d),t==="focusout"&&(U=g._wrapperState)&&U.controlled&&g.type==="number"&&Hu(g,"number",g.value)}switch(U=d?ms(d):window,t){case"focusin":(mp(U)||U.contentEditable==="true")&&(hs=U,rd=d,$i=null);break;case"focusout":$i=rd=hs=null;break;case"mousedown":sd=!0;break;case"contextmenu":case"mouseup":case"dragend":sd=!1,xp(p,n,m);break;case"selectionchange":if(wI)break;case"keydown":case"keyup":xp(p,n,m)}var I;if(_h)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else ds?_v(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(xv&&n.locale!=="ko"&&(ds||x!=="onCompositionStart"?x==="onCompositionEnd"&&ds&&(I=vv()):(qn=m,yh="value"in qn?qn.value:qn.textContent,ds=!0)),U=fl(d,x),0<U.length&&(x=new up(x,t,null,n,m),p.push({event:x,listeners:U}),I?x.data=I:(I=wv(n),I!==null&&(x.data=I)))),(I=cI?uI(t,n):dI(t,n))&&(d=fl(d,"onBeforeInput"),0<d.length&&(m=new up("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:d}),m.data=I))}jv(p,e)})}function lo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function fl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=to(t,n),i!=null&&r.unshift(lo(t,i,s)),i=to(t,e),i!=null&&r.push(lo(t,i,s))),t=t.return}return r}function rs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ep(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=to(n,i),u!=null&&o.unshift(lo(n,u,c))):s||(u=to(n,i),u!=null&&o.push(lo(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var bI=/\r\n?/g,NI=/\u0000|\uFFFD/g;function Ip(t){return(typeof t=="string"?t:""+t).replace(bI,`
`).replace(NI,"")}function wa(t,e,n){if(e=Ip(e),Ip(t)!==e&&n)throw Error(F(425))}function ml(){}var id=null,od=null;function ad(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ld=typeof setTimeout=="function"?setTimeout:void 0,SI=typeof clearTimeout=="function"?clearTimeout:void 0,Tp=typeof Promise=="function"?Promise:void 0,AI=typeof queueMicrotask=="function"?queueMicrotask:typeof Tp<"u"?function(t){return Tp.resolve(null).then(t).catch(CI)}:ld;function CI(t){setTimeout(function(){throw t})}function mu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),so(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);so(e)}function Zn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ys=Math.random().toString(36).slice(2),Qt="__reactFiber$"+Ys,co="__reactProps$"+Ys,In="__reactContainer$"+Ys,cd="__reactEvents$"+Ys,RI="__reactListeners$"+Ys,PI="__reactHandles$"+Ys;function Rr(t){var e=t[Qt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[In]||n[Qt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=bp(t);t!==null;){if(n=t[Qt])return n;t=bp(t)}return e}t=n,n=t.parentNode}return null}function Po(t){return t=t[Qt]||t[In],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ms(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function ec(t){return t[co]||null}var ud=[],ps=-1;function gr(t){return{current:t}}function pe(t){0>ps||(t.current=ud[ps],ud[ps]=null,ps--)}function de(t,e){ps++,ud[ps]=t.current,t.current=e}var dr={},rt=gr(dr),pt=gr(!1),Vr=dr;function js(t,e){var n=t.type.contextTypes;if(!n)return dr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function gt(t){return t=t.childContextTypes,t!=null}function pl(){pe(pt),pe(rt)}function Np(t,e,n){if(rt.current!==dr)throw Error(F(168));de(rt,e),de(pt,n)}function Ov(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(F(108,pE(t)||"Unknown",s));return we({},n,r)}function gl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||dr,Vr=rt.current,de(rt,t),de(pt,pt.current),!0}function Sp(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=Ov(t,e,Vr),r.__reactInternalMemoizedMergedChildContext=t,pe(pt),pe(rt),de(rt,t)):pe(pt),de(pt,n)}var fn=null,tc=!1,pu=!1;function Mv(t){fn===null?fn=[t]:fn.push(t)}function kI(t){tc=!0,Mv(t)}function yr(){if(!pu&&fn!==null){pu=!0;var t=0,e=ae;try{var n=fn;for(ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}fn=null,tc=!1}catch(s){throw fn!==null&&(fn=fn.slice(t+1)),av(fh,yr),s}finally{ae=e,pu=!1}}return null}var gs=[],ys=0,yl=null,vl=0,Nt=[],St=0,Lr=null,mn=1,pn="";function Sr(t,e){gs[ys++]=vl,gs[ys++]=yl,yl=t,vl=e}function Vv(t,e,n){Nt[St++]=mn,Nt[St++]=pn,Nt[St++]=Lr,Lr=t;var r=mn;t=pn;var s=32-zt(r)-1;r&=~(1<<s),n+=1;var i=32-zt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,mn=1<<32-zt(e)+s|n<<s|r,pn=i+t}else mn=1<<i|n<<s|r,pn=t}function Eh(t){t.return!==null&&(Sr(t,1),Vv(t,1,0))}function Ih(t){for(;t===yl;)yl=gs[--ys],gs[ys]=null,vl=gs[--ys],gs[ys]=null;for(;t===Lr;)Lr=Nt[--St],Nt[St]=null,pn=Nt[--St],Nt[St]=null,mn=Nt[--St],Nt[St]=null}var Et=null,wt=null,ge=!1,Ut=null;function Lv(t,e){var n=Ct(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ap(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Et=t,wt=Zn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Et=t,wt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Lr!==null?{id:mn,overflow:pn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ct(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Et=t,wt=null,!0):!1;default:return!1}}function dd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hd(t){if(ge){var e=wt;if(e){var n=e;if(!Ap(t,e)){if(dd(t))throw Error(F(418));e=Zn(n.nextSibling);var r=Et;e&&Ap(t,e)?Lv(r,n):(t.flags=t.flags&-4097|2,ge=!1,Et=t)}}else{if(dd(t))throw Error(F(418));t.flags=t.flags&-4097|2,ge=!1,Et=t}}}function Cp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Et=t}function Ea(t){if(t!==Et)return!1;if(!ge)return Cp(t),ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ad(t.type,t.memoizedProps)),e&&(e=wt)){if(dd(t))throw Fv(),Error(F(418));for(;e;)Lv(t,e),e=Zn(e.nextSibling)}if(Cp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wt=Zn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wt=null}}else wt=Et?Zn(t.stateNode.nextSibling):null;return!0}function Fv(){for(var t=wt;t;)t=Zn(t.nextSibling)}function Ds(){wt=Et=null,ge=!1}function Th(t){Ut===null?Ut=[t]:Ut.push(t)}var jI=Rn.ReactCurrentBatchConfig;function Ti(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function Ia(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Rp(t){var e=t._init;return e(t._payload)}function Uv(t){function e(T,v){if(t){var E=T.deletions;E===null?(T.deletions=[v],T.flags|=16):E.push(v)}}function n(T,v){if(!t)return null;for(;v!==null;)e(T,v),v=v.sibling;return null}function r(T,v){for(T=new Map;v!==null;)v.key!==null?T.set(v.key,v):T.set(v.index,v),v=v.sibling;return T}function s(T,v){return T=rr(T,v),T.index=0,T.sibling=null,T}function i(T,v,E){return T.index=E,t?(E=T.alternate,E!==null?(E=E.index,E<v?(T.flags|=2,v):E):(T.flags|=2,v)):(T.flags|=1048576,v)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function c(T,v,E,R){return v===null||v.tag!==6?(v=Eu(E,T.mode,R),v.return=T,v):(v=s(v,E),v.return=T,v)}function u(T,v,E,R){var V=E.type;return V===us?m(T,v,E.props.children,R,E.key):v!==null&&(v.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Ln&&Rp(V)===v.type)?(R=s(v,E.props),R.ref=Ti(T,v,E),R.return=T,R):(R=qa(E.type,E.key,E.props,null,T.mode,R),R.ref=Ti(T,v,E),R.return=T,R)}function d(T,v,E,R){return v===null||v.tag!==4||v.stateNode.containerInfo!==E.containerInfo||v.stateNode.implementation!==E.implementation?(v=Iu(E,T.mode,R),v.return=T,v):(v=s(v,E.children||[]),v.return=T,v)}function m(T,v,E,R,V){return v===null||v.tag!==7?(v=Or(E,T.mode,R,V),v.return=T,v):(v=s(v,E),v.return=T,v)}function p(T,v,E){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Eu(""+v,T.mode,E),v.return=T,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ha:return E=qa(v.type,v.key,v.props,null,T.mode,E),E.ref=Ti(T,null,v),E.return=T,E;case cs:return v=Iu(v,T.mode,E),v.return=T,v;case Ln:var R=v._init;return p(T,R(v._payload),E)}if(Pi(v)||xi(v))return v=Or(v,T.mode,E,null),v.return=T,v;Ia(T,v)}return null}function g(T,v,E,R){var V=v!==null?v.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return V!==null?null:c(T,v,""+E,R);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ha:return E.key===V?u(T,v,E,R):null;case cs:return E.key===V?d(T,v,E,R):null;case Ln:return V=E._init,g(T,v,V(E._payload),R)}if(Pi(E)||xi(E))return V!==null?null:m(T,v,E,R,null);Ia(T,E)}return null}function _(T,v,E,R,V){if(typeof R=="string"&&R!==""||typeof R=="number")return T=T.get(E)||null,c(v,T,""+R,V);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case ha:return T=T.get(R.key===null?E:R.key)||null,u(v,T,R,V);case cs:return T=T.get(R.key===null?E:R.key)||null,d(v,T,R,V);case Ln:var U=R._init;return _(T,v,E,U(R._payload),V)}if(Pi(R)||xi(R))return T=T.get(E)||null,m(v,T,R,V,null);Ia(v,R)}return null}function S(T,v,E,R){for(var V=null,U=null,I=v,x=v=0,w=null;I!==null&&x<E.length;x++){I.index>x?(w=I,I=null):w=I.sibling;var b=g(T,I,E[x],R);if(b===null){I===null&&(I=w);break}t&&I&&b.alternate===null&&e(T,I),v=i(b,v,x),U===null?V=b:U.sibling=b,U=b,I=w}if(x===E.length)return n(T,I),ge&&Sr(T,x),V;if(I===null){for(;x<E.length;x++)I=p(T,E[x],R),I!==null&&(v=i(I,v,x),U===null?V=I:U.sibling=I,U=I);return ge&&Sr(T,x),V}for(I=r(T,I);x<E.length;x++)w=_(I,T,x,E[x],R),w!==null&&(t&&w.alternate!==null&&I.delete(w.key===null?x:w.key),v=i(w,v,x),U===null?V=w:U.sibling=w,U=w);return t&&I.forEach(function(C){return e(T,C)}),ge&&Sr(T,x),V}function A(T,v,E,R){var V=xi(E);if(typeof V!="function")throw Error(F(150));if(E=V.call(E),E==null)throw Error(F(151));for(var U=V=null,I=v,x=v=0,w=null,b=E.next();I!==null&&!b.done;x++,b=E.next()){I.index>x?(w=I,I=null):w=I.sibling;var C=g(T,I,b.value,R);if(C===null){I===null&&(I=w);break}t&&I&&C.alternate===null&&e(T,I),v=i(C,v,x),U===null?V=C:U.sibling=C,U=C,I=w}if(b.done)return n(T,I),ge&&Sr(T,x),V;if(I===null){for(;!b.done;x++,b=E.next())b=p(T,b.value,R),b!==null&&(v=i(b,v,x),U===null?V=b:U.sibling=b,U=b);return ge&&Sr(T,x),V}for(I=r(T,I);!b.done;x++,b=E.next())b=_(I,T,x,b.value,R),b!==null&&(t&&b.alternate!==null&&I.delete(b.key===null?x:b.key),v=i(b,v,x),U===null?V=b:U.sibling=b,U=b);return t&&I.forEach(function(k){return e(T,k)}),ge&&Sr(T,x),V}function P(T,v,E,R){if(typeof E=="object"&&E!==null&&E.type===us&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case ha:e:{for(var V=E.key,U=v;U!==null;){if(U.key===V){if(V=E.type,V===us){if(U.tag===7){n(T,U.sibling),v=s(U,E.props.children),v.return=T,T=v;break e}}else if(U.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Ln&&Rp(V)===U.type){n(T,U.sibling),v=s(U,E.props),v.ref=Ti(T,U,E),v.return=T,T=v;break e}n(T,U);break}else e(T,U);U=U.sibling}E.type===us?(v=Or(E.props.children,T.mode,R,E.key),v.return=T,T=v):(R=qa(E.type,E.key,E.props,null,T.mode,R),R.ref=Ti(T,v,E),R.return=T,T=R)}return o(T);case cs:e:{for(U=E.key;v!==null;){if(v.key===U)if(v.tag===4&&v.stateNode.containerInfo===E.containerInfo&&v.stateNode.implementation===E.implementation){n(T,v.sibling),v=s(v,E.children||[]),v.return=T,T=v;break e}else{n(T,v);break}else e(T,v);v=v.sibling}v=Iu(E,T.mode,R),v.return=T,T=v}return o(T);case Ln:return U=E._init,P(T,v,U(E._payload),R)}if(Pi(E))return S(T,v,E,R);if(xi(E))return A(T,v,E,R);Ia(T,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,v!==null&&v.tag===6?(n(T,v.sibling),v=s(v,E),v.return=T,T=v):(n(T,v),v=Eu(E,T.mode,R),v.return=T,T=v),o(T)):n(T,v)}return P}var Os=Uv(!0),Bv=Uv(!1),xl=gr(null),_l=null,vs=null,bh=null;function Nh(){bh=vs=_l=null}function Sh(t){var e=xl.current;pe(xl),t._currentValue=e}function fd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ns(t,e){_l=t,bh=vs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mt=!0),t.firstContext=null)}function Dt(t){var e=t._currentValue;if(bh!==t)if(t={context:t,memoizedValue:e,next:null},vs===null){if(_l===null)throw Error(F(308));vs=t,_l.dependencies={lanes:0,firstContext:t}}else vs=vs.next=t;return e}var Pr=null;function Ah(t){Pr===null?Pr=[t]:Pr.push(t)}function zv(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Ah(e)):(n.next=s.next,s.next=n),e.interleaved=n,Tn(t,r)}function Tn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fn=!1;function Ch(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $v(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function er(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,se&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Tn(t,n)}return s=r.interleaved,s===null?(e.next=e,Ah(r)):(e.next=s.next,s.next=e),r.interleaved=e,Tn(t,n)}function Ua(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,mh(t,n)}}function Pp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function wl(t,e,n,r){var s=t.updateQueue;Fn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var m=t.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==o&&(c===null?m.firstBaseUpdate=d:c.next=d,m.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,m=d=u=null,c=i;do{var g=c.lane,_=c.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:_,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var S=t,A=c;switch(g=e,_=n,A.tag){case 1:if(S=A.payload,typeof S=="function"){p=S.call(_,p,g);break e}p=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=A.payload,g=typeof S=="function"?S.call(_,p,g):S,g==null)break e;p=we({},p,g);break e;case 2:Fn=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else _={eventTime:_,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(d=m=_,u=p):m=m.next=_,o|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(m===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ur|=o,t.lanes=o,t.memoizedState=p}}function kp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var ko={},Xt=gr(ko),uo=gr(ko),ho=gr(ko);function kr(t){if(t===ko)throw Error(F(174));return t}function Rh(t,e){switch(de(ho,e),de(uo,t),de(Xt,ko),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Gu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Gu(e,t)}pe(Xt),de(Xt,e)}function Ms(){pe(Xt),pe(uo),pe(ho)}function Wv(t){kr(ho.current);var e=kr(Xt.current),n=Gu(e,t.type);e!==n&&(de(uo,t),de(Xt,n))}function Ph(t){uo.current===t&&(pe(Xt),pe(uo))}var xe=gr(0);function El(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gu=[];function kh(){for(var t=0;t<gu.length;t++)gu[t]._workInProgressVersionPrimary=null;gu.length=0}var Ba=Rn.ReactCurrentDispatcher,yu=Rn.ReactCurrentBatchConfig,Fr=0,_e=null,je=null,Le=null,Il=!1,Wi=!1,fo=0,DI=0;function Je(){throw Error(F(321))}function jh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wt(t[n],e[n]))return!1;return!0}function Dh(t,e,n,r,s,i){if(Fr=i,_e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ba.current=t===null||t.memoizedState===null?LI:FI,t=n(r,s),Wi){i=0;do{if(Wi=!1,fo=0,25<=i)throw Error(F(301));i+=1,Le=je=null,e.updateQueue=null,Ba.current=UI,t=n(r,s)}while(Wi)}if(Ba.current=Tl,e=je!==null&&je.next!==null,Fr=0,Le=je=_e=null,Il=!1,e)throw Error(F(300));return t}function Oh(){var t=fo!==0;return fo=0,t}function Kt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?_e.memoizedState=Le=t:Le=Le.next=t,Le}function Ot(){if(je===null){var t=_e.alternate;t=t!==null?t.memoizedState:null}else t=je.next;var e=Le===null?_e.memoizedState:Le.next;if(e!==null)Le=e,je=t;else{if(t===null)throw Error(F(310));je=t,t={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},Le===null?_e.memoizedState=Le=t:Le=Le.next=t}return Le}function mo(t,e){return typeof e=="function"?e(t):e}function vu(t){var e=Ot(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=je,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var m=d.lane;if((Fr&m)===m)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=p,o=r):u=u.next=p,_e.lanes|=m,Ur|=m}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,Wt(r,e.memoizedState)||(mt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,_e.lanes|=i,Ur|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xu(t){var e=Ot(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Wt(i,e.memoizedState)||(mt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Hv(){}function qv(t,e){var n=_e,r=Ot(),s=e(),i=!Wt(r.memoizedState,s);if(i&&(r.memoizedState=s,mt=!0),r=r.queue,Mh(Qv.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Le!==null&&Le.memoizedState.tag&1){if(n.flags|=2048,po(9,Kv.bind(null,n,r,s,e),void 0,null),Fe===null)throw Error(F(349));Fr&30||Gv(n,e,s)}return s}function Gv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Kv(t,e,n,r){e.value=n,e.getSnapshot=r,Yv(e)&&Jv(t)}function Qv(t,e,n){return n(function(){Yv(e)&&Jv(t)})}function Yv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wt(t,n)}catch{return!0}}function Jv(t){var e=Tn(t,1);e!==null&&$t(e,t,1,-1)}function jp(t){var e=Kt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mo,lastRenderedState:t},e.queue=t,t=t.dispatch=VI.bind(null,_e,t),[e.memoizedState,t]}function po(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Xv(){return Ot().memoizedState}function za(t,e,n,r){var s=Kt();_e.flags|=t,s.memoizedState=po(1|e,n,void 0,r===void 0?null:r)}function nc(t,e,n,r){var s=Ot();r=r===void 0?null:r;var i=void 0;if(je!==null){var o=je.memoizedState;if(i=o.destroy,r!==null&&jh(r,o.deps)){s.memoizedState=po(e,n,i,r);return}}_e.flags|=t,s.memoizedState=po(1|e,n,i,r)}function Dp(t,e){return za(8390656,8,t,e)}function Mh(t,e){return nc(2048,8,t,e)}function Zv(t,e){return nc(4,2,t,e)}function e0(t,e){return nc(4,4,t,e)}function t0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function n0(t,e,n){return n=n!=null?n.concat([t]):null,nc(4,4,t0.bind(null,e,t),n)}function Vh(){}function r0(t,e){var n=Ot();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function s0(t,e){var n=Ot();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function i0(t,e,n){return Fr&21?(Wt(n,e)||(n=uv(),_e.lanes|=n,Ur|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mt=!0),t.memoizedState=n)}function OI(t,e){var n=ae;ae=n!==0&&4>n?n:4,t(!0);var r=yu.transition;yu.transition={};try{t(!1),e()}finally{ae=n,yu.transition=r}}function o0(){return Ot().memoizedState}function MI(t,e,n){var r=nr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},a0(t))l0(e,n);else if(n=zv(t,e,n,r),n!==null){var s=ct();$t(n,t,r,s),c0(n,e,r)}}function VI(t,e,n){var r=nr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(a0(t))l0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,Wt(c,o)){var u=e.interleaved;u===null?(s.next=s,Ah(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=zv(t,e,s,r),n!==null&&(s=ct(),$t(n,t,r,s),c0(n,e,r))}}function a0(t){var e=t.alternate;return t===_e||e!==null&&e===_e}function l0(t,e){Wi=Il=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function c0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,mh(t,n)}}var Tl={readContext:Dt,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},LI={readContext:Dt,useCallback:function(t,e){return Kt().memoizedState=[t,e===void 0?null:e],t},useContext:Dt,useEffect:Dp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,za(4194308,4,t0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return za(4194308,4,t,e)},useInsertionEffect:function(t,e){return za(4,2,t,e)},useMemo:function(t,e){var n=Kt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Kt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=MI.bind(null,_e,t),[r.memoizedState,t]},useRef:function(t){var e=Kt();return t={current:t},e.memoizedState=t},useState:jp,useDebugValue:Vh,useDeferredValue:function(t){return Kt().memoizedState=t},useTransition:function(){var t=jp(!1),e=t[0];return t=OI.bind(null,t[1]),Kt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=_e,s=Kt();if(ge){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),Fe===null)throw Error(F(349));Fr&30||Gv(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Dp(Qv.bind(null,r,i,t),[t]),r.flags|=2048,po(9,Kv.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Kt(),e=Fe.identifierPrefix;if(ge){var n=pn,r=mn;n=(r&~(1<<32-zt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=fo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=DI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},FI={readContext:Dt,useCallback:r0,useContext:Dt,useEffect:Mh,useImperativeHandle:n0,useInsertionEffect:Zv,useLayoutEffect:e0,useMemo:s0,useReducer:vu,useRef:Xv,useState:function(){return vu(mo)},useDebugValue:Vh,useDeferredValue:function(t){var e=Ot();return i0(e,je.memoizedState,t)},useTransition:function(){var t=vu(mo)[0],e=Ot().memoizedState;return[t,e]},useMutableSource:Hv,useSyncExternalStore:qv,useId:o0,unstable_isNewReconciler:!1},UI={readContext:Dt,useCallback:r0,useContext:Dt,useEffect:Mh,useImperativeHandle:n0,useInsertionEffect:Zv,useLayoutEffect:e0,useMemo:s0,useReducer:xu,useRef:Xv,useState:function(){return xu(mo)},useDebugValue:Vh,useDeferredValue:function(t){var e=Ot();return je===null?e.memoizedState=t:i0(e,je.memoizedState,t)},useTransition:function(){var t=xu(mo)[0],e=Ot().memoizedState;return[t,e]},useMutableSource:Hv,useSyncExternalStore:qv,useId:o0,unstable_isNewReconciler:!1};function Lt(t,e){if(t&&t.defaultProps){e=we({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function md(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:we({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var rc={isMounted:function(t){return(t=t._reactInternals)?Qr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ct(),s=nr(t),i=xn(r,s);i.payload=e,n!=null&&(i.callback=n),e=er(t,i,s),e!==null&&($t(e,t,s,r),Ua(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ct(),s=nr(t),i=xn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=er(t,i,s),e!==null&&($t(e,t,s,r),Ua(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ct(),r=nr(t),s=xn(n,r);s.tag=2,e!=null&&(s.callback=e),e=er(t,s,r),e!==null&&($t(e,t,r,n),Ua(e,t,r))}};function Op(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!oo(n,r)||!oo(s,i):!0}function u0(t,e,n){var r=!1,s=dr,i=e.contextType;return typeof i=="object"&&i!==null?i=Dt(i):(s=gt(e)?Vr:rt.current,r=e.contextTypes,i=(r=r!=null)?js(t,s):dr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Mp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&rc.enqueueReplaceState(e,e.state,null)}function pd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Ch(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Dt(i):(i=gt(e)?Vr:rt.current,s.context=js(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(md(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&rc.enqueueReplaceState(s,s.state,null),wl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Vs(t,e){try{var n="",r=e;do n+=mE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function _u(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function gd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var BI=typeof WeakMap=="function"?WeakMap:Map;function d0(t,e,n){n=xn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Nl||(Nl=!0,Nd=r),gd(t,e)},n}function h0(t,e,n){n=xn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){gd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){gd(t,e),typeof r!="function"&&(tr===null?tr=new Set([this]):tr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Vp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new BI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=tT.bind(null,t,e,n),e.then(t,t))}function Lp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Fp(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xn(-1,1),e.tag=2,er(n,e,1))),n.lanes|=1),t)}var zI=Rn.ReactCurrentOwner,mt=!1;function lt(t,e,n,r){e.child=t===null?Bv(e,null,n,r):Os(e,t.child,n,r)}function Up(t,e,n,r,s){n=n.render;var i=e.ref;return Ns(e,s),r=Dh(t,e,n,r,i,s),n=Oh(),t!==null&&!mt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,bn(t,e,s)):(ge&&n&&Eh(e),e.flags|=1,lt(t,e,r,s),e.child)}function Bp(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Hh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,f0(t,e,i,r,s)):(t=qa(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:oo,n(o,r)&&t.ref===e.ref)return bn(t,e,s)}return e.flags|=1,t=rr(i,r),t.ref=e.ref,t.return=e,e.child=t}function f0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(oo(i,r)&&t.ref===e.ref)if(mt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(mt=!0);else return e.lanes=t.lanes,bn(t,e,s)}return yd(t,e,n,r,s)}function m0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},de(_s,_t),_t|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,de(_s,_t),_t|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,de(_s,_t),_t|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,de(_s,_t),_t|=r;return lt(t,e,s,n),e.child}function p0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function yd(t,e,n,r,s){var i=gt(n)?Vr:rt.current;return i=js(e,i),Ns(e,s),n=Dh(t,e,n,r,i,s),r=Oh(),t!==null&&!mt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,bn(t,e,s)):(ge&&r&&Eh(e),e.flags|=1,lt(t,e,n,s),e.child)}function zp(t,e,n,r,s){if(gt(n)){var i=!0;gl(e)}else i=!1;if(Ns(e,s),e.stateNode===null)$a(t,e),u0(e,n,r),pd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Dt(d):(d=gt(n)?Vr:rt.current,d=js(e,d));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&Mp(e,o,r,d),Fn=!1;var g=e.memoizedState;o.state=g,wl(e,r,o,s),u=e.memoizedState,c!==r||g!==u||pt.current||Fn?(typeof m=="function"&&(md(e,n,m,r),u=e.memoizedState),(c=Fn||Op(e,n,c,r,g,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,$v(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Lt(e.type,c),o.props=d,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Dt(u):(u=gt(n)?Vr:rt.current,u=js(e,u));var _=n.getDerivedStateFromProps;(m=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==p||g!==u)&&Mp(e,o,r,u),Fn=!1,g=e.memoizedState,o.state=g,wl(e,r,o,s);var S=e.memoizedState;c!==p||g!==S||pt.current||Fn?(typeof _=="function"&&(md(e,n,_,r),S=e.memoizedState),(d=Fn||Op(e,n,d,r,g,S,u)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return vd(t,e,n,r,i,s)}function vd(t,e,n,r,s,i){p0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Sp(e,n,!1),bn(t,e,i);r=e.stateNode,zI.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Os(e,t.child,null,i),e.child=Os(e,null,c,i)):lt(t,e,c,i),e.memoizedState=r.state,s&&Sp(e,n,!0),e.child}function g0(t){var e=t.stateNode;e.pendingContext?Np(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Np(t,e.context,!1),Rh(t,e.containerInfo)}function $p(t,e,n,r,s){return Ds(),Th(s),e.flags|=256,lt(t,e,n,r),e.child}var xd={dehydrated:null,treeContext:null,retryLane:0};function _d(t){return{baseLanes:t,cachePool:null,transitions:null}}function y0(t,e,n){var r=e.pendingProps,s=xe.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),de(xe,s&1),t===null)return hd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=oc(o,r,0,null),t=Or(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=_d(n),e.memoizedState=xd,t):Lh(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return $I(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=rr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=rr(c,i):(i=Or(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?_d(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=xd,r}return i=t.child,t=i.sibling,r=rr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Lh(t,e){return e=oc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ta(t,e,n,r){return r!==null&&Th(r),Os(e,t.child,null,n),t=Lh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $I(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=_u(Error(F(422))),Ta(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=oc({mode:"visible",children:r.children},s,0,null),i=Or(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Os(e,t.child,null,o),e.child.memoizedState=_d(o),e.memoizedState=xd,i);if(!(e.mode&1))return Ta(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(F(419)),r=_u(i,r,void 0),Ta(t,e,o,r)}if(c=(o&t.childLanes)!==0,mt||c){if(r=Fe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Tn(t,s),$t(r,t,s,-1))}return Wh(),r=_u(Error(F(421))),Ta(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=nT.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,wt=Zn(s.nextSibling),Et=e,ge=!0,Ut=null,t!==null&&(Nt[St++]=mn,Nt[St++]=pn,Nt[St++]=Lr,mn=t.id,pn=t.overflow,Lr=e),e=Lh(e,r.children),e.flags|=4096,e)}function Wp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),fd(t.return,e,n)}function wu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function v0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(lt(t,e,r.children,n),r=xe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wp(t,n,e);else if(t.tag===19)Wp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(de(xe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&El(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),wu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&El(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}wu(e,!0,n,null,i);break;case"together":wu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $a(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function bn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ur|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=rr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=rr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function WI(t,e,n){switch(e.tag){case 3:g0(e),Ds();break;case 5:Wv(e);break;case 1:gt(e.type)&&gl(e);break;case 4:Rh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;de(xl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(de(xe,xe.current&1),e.flags|=128,null):n&e.child.childLanes?y0(t,e,n):(de(xe,xe.current&1),t=bn(t,e,n),t!==null?t.sibling:null);de(xe,xe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return v0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),de(xe,xe.current),r)break;return null;case 22:case 23:return e.lanes=0,m0(t,e,n)}return bn(t,e,n)}var x0,wd,_0,w0;x0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wd=function(){};_0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,kr(Xt.current);var i=null;switch(n){case"input":s=$u(t,s),r=$u(t,r),i=[];break;case"select":s=we({},s,{value:void 0}),r=we({},r,{value:void 0}),i=[];break;case"textarea":s=qu(t,s),r=qu(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ml)}Ku(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Zi.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Zi.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&fe("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};w0=function(t,e,n,r){n!==r&&(e.flags|=4)};function bi(t,e){if(!ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Xe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function HI(t,e,n){var r=e.pendingProps;switch(Ih(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(e),null;case 1:return gt(e.type)&&pl(),Xe(e),null;case 3:return r=e.stateNode,Ms(),pe(pt),pe(rt),kh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ea(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ut!==null&&(Cd(Ut),Ut=null))),wd(t,e),Xe(e),null;case 5:Ph(e);var s=kr(ho.current);if(n=e.type,t!==null&&e.stateNode!=null)_0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return Xe(e),null}if(t=kr(Xt.current),Ea(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Qt]=e,r[co]=i,t=(e.mode&1)!==0,n){case"dialog":fe("cancel",r),fe("close",r);break;case"iframe":case"object":case"embed":fe("load",r);break;case"video":case"audio":for(s=0;s<ji.length;s++)fe(ji[s],r);break;case"source":fe("error",r);break;case"img":case"image":case"link":fe("error",r),fe("load",r);break;case"details":fe("toggle",r);break;case"input":Zm(r,i),fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},fe("invalid",r);break;case"textarea":tp(r,i),fe("invalid",r)}Ku(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&wa(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&wa(r.textContent,c,t),s=["children",""+c]):Zi.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&fe("scroll",r)}switch(n){case"input":fa(r),ep(r,i,!0);break;case"textarea":fa(r),np(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ml)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Qy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Qt]=e,t[co]=r,x0(t,e,!1,!1),e.stateNode=t;e:{switch(o=Qu(n,r),n){case"dialog":fe("cancel",t),fe("close",t),s=r;break;case"iframe":case"object":case"embed":fe("load",t),s=r;break;case"video":case"audio":for(s=0;s<ji.length;s++)fe(ji[s],t);s=r;break;case"source":fe("error",t),s=r;break;case"img":case"image":case"link":fe("error",t),fe("load",t),s=r;break;case"details":fe("toggle",t),s=r;break;case"input":Zm(t,r),s=$u(t,r),fe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=we({},r,{value:void 0}),fe("invalid",t);break;case"textarea":tp(t,r),s=qu(t,r),fe("invalid",t);break;default:s=r}Ku(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?Xy(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Yy(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&eo(t,u):typeof u=="number"&&eo(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Zi.hasOwnProperty(i)?u!=null&&i==="onScroll"&&fe("scroll",t):u!=null&&lh(t,i,u,o))}switch(n){case"input":fa(t),ep(t,r,!1);break;case"textarea":fa(t),np(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ur(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Es(t,!!r.multiple,i,!1):r.defaultValue!=null&&Es(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ml)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xe(e),null;case 6:if(t&&e.stateNode!=null)w0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=kr(ho.current),kr(Xt.current),Ea(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qt]=e,(i=r.nodeValue!==n)&&(t=Et,t!==null))switch(t.tag){case 3:wa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wa(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qt]=e,e.stateNode=r}return Xe(e),null;case 13:if(pe(xe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ge&&wt!==null&&e.mode&1&&!(e.flags&128))Fv(),Ds(),e.flags|=98560,i=!1;else if(i=Ea(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[Qt]=e}else Ds(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xe(e),i=!1}else Ut!==null&&(Cd(Ut),Ut=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||xe.current&1?De===0&&(De=3):Wh())),e.updateQueue!==null&&(e.flags|=4),Xe(e),null);case 4:return Ms(),wd(t,e),t===null&&ao(e.stateNode.containerInfo),Xe(e),null;case 10:return Sh(e.type._context),Xe(e),null;case 17:return gt(e.type)&&pl(),Xe(e),null;case 19:if(pe(xe),i=e.memoizedState,i===null)return Xe(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)bi(i,!1);else{if(De!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=El(t),o!==null){for(e.flags|=128,bi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return de(xe,xe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ae()>Ls&&(e.flags|=128,r=!0,bi(i,!1),e.lanes=4194304)}else{if(!r)if(t=El(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),bi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ge)return Xe(e),null}else 2*Ae()-i.renderingStartTime>Ls&&n!==1073741824&&(e.flags|=128,r=!0,bi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ae(),e.sibling=null,n=xe.current,de(xe,r?n&1|2:n&1),e):(Xe(e),null);case 22:case 23:return $h(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?_t&1073741824&&(Xe(e),e.subtreeFlags&6&&(e.flags|=8192)):Xe(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function qI(t,e){switch(Ih(e),e.tag){case 1:return gt(e.type)&&pl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ms(),pe(pt),pe(rt),kh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ph(e),null;case 13:if(pe(xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Ds()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return pe(xe),null;case 4:return Ms(),null;case 10:return Sh(e.type._context),null;case 22:case 23:return $h(),null;case 24:return null;default:return null}}var ba=!1,tt=!1,GI=typeof WeakSet=="function"?WeakSet:Set,$=null;function xs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){be(t,e,r)}else n.current=null}function Ed(t,e,n){try{n()}catch(r){be(t,e,r)}}var Hp=!1;function KI(t,e){if(id=dl,t=Nv(),wh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,m=0,p=t,g=null;t:for(;;){for(var _;p!==n||s!==0&&p.nodeType!==3||(c=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(_=p.firstChild)!==null;)g=p,p=_;for(;;){if(p===t)break t;if(g===n&&++d===s&&(c=o),g===i&&++m===r&&(u=o),(_=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=_}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(od={focusedElem:t,selectionRange:n},dl=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var A=S.memoizedProps,P=S.memoizedState,T=e.stateNode,v=T.getSnapshotBeforeUpdate(e.elementType===e.type?A:Lt(e.type,A),P);T.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(R){be(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return S=Hp,Hp=!1,S}function Hi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ed(e,n,i)}s=s.next}while(s!==r)}}function sc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Id(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function E0(t){var e=t.alternate;e!==null&&(t.alternate=null,E0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qt],delete e[co],delete e[cd],delete e[RI],delete e[PI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function I0(t){return t.tag===5||t.tag===3||t.tag===4}function qp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||I0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Td(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ml));else if(r!==4&&(t=t.child,t!==null))for(Td(t,e,n),t=t.sibling;t!==null;)Td(t,e,n),t=t.sibling}function bd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(bd(t,e,n),t=t.sibling;t!==null;)bd(t,e,n),t=t.sibling}var Be=null,Ft=!1;function Mn(t,e,n){for(n=n.child;n!==null;)T0(t,e,n),n=n.sibling}function T0(t,e,n){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(Yl,n)}catch{}switch(n.tag){case 5:tt||xs(n,e);case 6:var r=Be,s=Ft;Be=null,Mn(t,e,n),Be=r,Ft=s,Be!==null&&(Ft?(t=Be,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Be.removeChild(n.stateNode));break;case 18:Be!==null&&(Ft?(t=Be,n=n.stateNode,t.nodeType===8?mu(t.parentNode,n):t.nodeType===1&&mu(t,n),so(t)):mu(Be,n.stateNode));break;case 4:r=Be,s=Ft,Be=n.stateNode.containerInfo,Ft=!0,Mn(t,e,n),Be=r,Ft=s;break;case 0:case 11:case 14:case 15:if(!tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ed(n,e,o),s=s.next}while(s!==r)}Mn(t,e,n);break;case 1:if(!tt&&(xs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){be(n,e,c)}Mn(t,e,n);break;case 21:Mn(t,e,n);break;case 22:n.mode&1?(tt=(r=tt)||n.memoizedState!==null,Mn(t,e,n),tt=r):Mn(t,e,n);break;default:Mn(t,e,n)}}function Gp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new GI),e.forEach(function(r){var s=rT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Vt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:Be=c.stateNode,Ft=!1;break e;case 3:Be=c.stateNode.containerInfo,Ft=!0;break e;case 4:Be=c.stateNode.containerInfo,Ft=!0;break e}c=c.return}if(Be===null)throw Error(F(160));T0(i,o,s),Be=null,Ft=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){be(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)b0(e,t),e=e.sibling}function b0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vt(e,t),Gt(t),r&4){try{Hi(3,t,t.return),sc(3,t)}catch(A){be(t,t.return,A)}try{Hi(5,t,t.return)}catch(A){be(t,t.return,A)}}break;case 1:Vt(e,t),Gt(t),r&512&&n!==null&&xs(n,n.return);break;case 5:if(Vt(e,t),Gt(t),r&512&&n!==null&&xs(n,n.return),t.flags&32){var s=t.stateNode;try{eo(s,"")}catch(A){be(t,t.return,A)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Gy(s,i),Qu(c,o);var d=Qu(c,i);for(o=0;o<u.length;o+=2){var m=u[o],p=u[o+1];m==="style"?Xy(s,p):m==="dangerouslySetInnerHTML"?Yy(s,p):m==="children"?eo(s,p):lh(s,m,p,d)}switch(c){case"input":Wu(s,i);break;case"textarea":Ky(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?Es(s,!!i.multiple,_,!1):g!==!!i.multiple&&(i.defaultValue!=null?Es(s,!!i.multiple,i.defaultValue,!0):Es(s,!!i.multiple,i.multiple?[]:"",!1))}s[co]=i}catch(A){be(t,t.return,A)}}break;case 6:if(Vt(e,t),Gt(t),r&4){if(t.stateNode===null)throw Error(F(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(A){be(t,t.return,A)}}break;case 3:if(Vt(e,t),Gt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{so(e.containerInfo)}catch(A){be(t,t.return,A)}break;case 4:Vt(e,t),Gt(t);break;case 13:Vt(e,t),Gt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Bh=Ae())),r&4&&Gp(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(tt=(d=tt)||m,Vt(e,t),tt=d):Vt(e,t),Gt(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for($=t,m=t.child;m!==null;){for(p=$=m;$!==null;){switch(g=$,_=g.child,g.tag){case 0:case 11:case 14:case 15:Hi(4,g,g.return);break;case 1:xs(g,g.return);var S=g.stateNode;if(typeof S.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(A){be(r,n,A)}}break;case 5:xs(g,g.return);break;case 22:if(g.memoizedState!==null){Qp(p);continue}}_!==null?(_.return=g,$=_):Qp(p)}m=m.sibling}e:for(m=null,p=t;;){if(p.tag===5){if(m===null){m=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Jy("display",o))}catch(A){be(t,t.return,A)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(A){be(t,t.return,A)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Vt(e,t),Gt(t),r&4&&Gp(t);break;case 21:break;default:Vt(e,t),Gt(t)}}function Gt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(I0(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(eo(s,""),r.flags&=-33);var i=qp(t);bd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=qp(t);Td(t,c,o);break;default:throw Error(F(161))}}catch(u){be(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function QI(t,e,n){$=t,N0(t)}function N0(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var s=$,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ba;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||tt;c=ba;var d=tt;if(ba=o,(tt=u)&&!d)for($=s;$!==null;)o=$,u=o.child,o.tag===22&&o.memoizedState!==null?Yp(s):u!==null?(u.return=o,$=u):Yp(s);for(;i!==null;)$=i,N0(i),i=i.sibling;$=s,ba=c,tt=d}Kp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,$=i):Kp(t)}}function Kp(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tt||sc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!tt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Lt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&kp(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}kp(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&so(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}tt||e.flags&512&&Id(e)}catch(g){be(e,e.return,g)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function Qp(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function Yp(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{sc(4,e)}catch(u){be(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){be(e,s,u)}}var i=e.return;try{Id(e)}catch(u){be(e,i,u)}break;case 5:var o=e.return;try{Id(e)}catch(u){be(e,o,u)}}}catch(u){be(e,e.return,u)}if(e===t){$=null;break}var c=e.sibling;if(c!==null){c.return=e.return,$=c;break}$=e.return}}var YI=Math.ceil,bl=Rn.ReactCurrentDispatcher,Fh=Rn.ReactCurrentOwner,Rt=Rn.ReactCurrentBatchConfig,se=0,Fe=null,Pe=null,We=0,_t=0,_s=gr(0),De=0,go=null,Ur=0,ic=0,Uh=0,qi=null,ft=null,Bh=0,Ls=1/0,hn=null,Nl=!1,Nd=null,tr=null,Na=!1,Gn=null,Sl=0,Gi=0,Sd=null,Wa=-1,Ha=0;function ct(){return se&6?Ae():Wa!==-1?Wa:Wa=Ae()}function nr(t){return t.mode&1?se&2&&We!==0?We&-We:jI.transition!==null?(Ha===0&&(Ha=uv()),Ha):(t=ae,t!==0||(t=window.event,t=t===void 0?16:yv(t.type)),t):1}function $t(t,e,n,r){if(50<Gi)throw Gi=0,Sd=null,Error(F(185));Co(t,n,r),(!(se&2)||t!==Fe)&&(t===Fe&&(!(se&2)&&(ic|=n),De===4&&Bn(t,We)),yt(t,r),n===1&&se===0&&!(e.mode&1)&&(Ls=Ae()+500,tc&&yr()))}function yt(t,e){var n=t.callbackNode;jE(t,e);var r=ul(t,t===Fe?We:0);if(r===0)n!==null&&ip(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ip(n),e===1)t.tag===0?kI(Jp.bind(null,t)):Mv(Jp.bind(null,t)),AI(function(){!(se&6)&&yr()}),n=null;else{switch(dv(r)){case 1:n=fh;break;case 4:n=lv;break;case 16:n=cl;break;case 536870912:n=cv;break;default:n=cl}n=D0(n,S0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function S0(t,e){if(Wa=-1,Ha=0,se&6)throw Error(F(327));var n=t.callbackNode;if(Ss()&&t.callbackNode!==n)return null;var r=ul(t,t===Fe?We:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Al(t,r);else{e=r;var s=se;se|=2;var i=C0();(Fe!==t||We!==e)&&(hn=null,Ls=Ae()+500,Dr(t,e));do try{ZI();break}catch(c){A0(t,c)}while(!0);Nh(),bl.current=i,se=s,Pe!==null?e=0:(Fe=null,We=0,e=De)}if(e!==0){if(e===2&&(s=ed(t),s!==0&&(r=s,e=Ad(t,s))),e===1)throw n=go,Dr(t,0),Bn(t,r),yt(t,Ae()),n;if(e===6)Bn(t,r);else{if(s=t.current.alternate,!(r&30)&&!JI(s)&&(e=Al(t,r),e===2&&(i=ed(t),i!==0&&(r=i,e=Ad(t,i))),e===1))throw n=go,Dr(t,0),Bn(t,r),yt(t,Ae()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:Ar(t,ft,hn);break;case 3:if(Bn(t,r),(r&130023424)===r&&(e=Bh+500-Ae(),10<e)){if(ul(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ct(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ld(Ar.bind(null,t,ft,hn),e);break}Ar(t,ft,hn);break;case 4:if(Bn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-zt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ae()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*YI(r/1960))-r,10<r){t.timeoutHandle=ld(Ar.bind(null,t,ft,hn),r);break}Ar(t,ft,hn);break;case 5:Ar(t,ft,hn);break;default:throw Error(F(329))}}}return yt(t,Ae()),t.callbackNode===n?S0.bind(null,t):null}function Ad(t,e){var n=qi;return t.current.memoizedState.isDehydrated&&(Dr(t,e).flags|=256),t=Al(t,e),t!==2&&(e=ft,ft=n,e!==null&&Cd(e)),t}function Cd(t){ft===null?ft=t:ft.push.apply(ft,t)}function JI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Wt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bn(t,e){for(e&=~Uh,e&=~ic,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zt(e),r=1<<n;t[n]=-1,e&=~r}}function Jp(t){if(se&6)throw Error(F(327));Ss();var e=ul(t,0);if(!(e&1))return yt(t,Ae()),null;var n=Al(t,e);if(t.tag!==0&&n===2){var r=ed(t);r!==0&&(e=r,n=Ad(t,r))}if(n===1)throw n=go,Dr(t,0),Bn(t,e),yt(t,Ae()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ar(t,ft,hn),yt(t,Ae()),null}function zh(t,e){var n=se;se|=1;try{return t(e)}finally{se=n,se===0&&(Ls=Ae()+500,tc&&yr())}}function Br(t){Gn!==null&&Gn.tag===0&&!(se&6)&&Ss();var e=se;se|=1;var n=Rt.transition,r=ae;try{if(Rt.transition=null,ae=1,t)return t()}finally{ae=r,Rt.transition=n,se=e,!(se&6)&&yr()}}function $h(){_t=_s.current,pe(_s)}function Dr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,SI(n)),Pe!==null)for(n=Pe.return;n!==null;){var r=n;switch(Ih(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&pl();break;case 3:Ms(),pe(pt),pe(rt),kh();break;case 5:Ph(r);break;case 4:Ms();break;case 13:pe(xe);break;case 19:pe(xe);break;case 10:Sh(r.type._context);break;case 22:case 23:$h()}n=n.return}if(Fe=t,Pe=t=rr(t.current,null),We=_t=e,De=0,go=null,Uh=ic=Ur=0,ft=qi=null,Pr!==null){for(e=0;e<Pr.length;e++)if(n=Pr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Pr=null}return t}function A0(t,e){do{var n=Pe;try{if(Nh(),Ba.current=Tl,Il){for(var r=_e.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Il=!1}if(Fr=0,Le=je=_e=null,Wi=!1,fo=0,Fh.current=null,n===null||n.return===null){De=1,go=e,Pe=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=We,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,m=c,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var _=Lp(o);if(_!==null){_.flags&=-257,Fp(_,o,c,i,e),_.mode&1&&Vp(i,d,e),e=_,u=d;var S=e.updateQueue;if(S===null){var A=new Set;A.add(u),e.updateQueue=A}else S.add(u);break e}else{if(!(e&1)){Vp(i,d,e),Wh();break e}u=Error(F(426))}}else if(ge&&c.mode&1){var P=Lp(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Fp(P,o,c,i,e),Th(Vs(u,c));break e}}i=u=Vs(u,c),De!==4&&(De=2),qi===null?qi=[i]:qi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var T=d0(i,u,e);Pp(i,T);break e;case 1:c=u;var v=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(tr===null||!tr.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=h0(i,c,e);Pp(i,R);break e}}i=i.return}while(i!==null)}P0(n)}catch(V){e=V,Pe===n&&n!==null&&(Pe=n=n.return);continue}break}while(!0)}function C0(){var t=bl.current;return bl.current=Tl,t===null?Tl:t}function Wh(){(De===0||De===3||De===2)&&(De=4),Fe===null||!(Ur&268435455)&&!(ic&268435455)||Bn(Fe,We)}function Al(t,e){var n=se;se|=2;var r=C0();(Fe!==t||We!==e)&&(hn=null,Dr(t,e));do try{XI();break}catch(s){A0(t,s)}while(!0);if(Nh(),se=n,bl.current=r,Pe!==null)throw Error(F(261));return Fe=null,We=0,De}function XI(){for(;Pe!==null;)R0(Pe)}function ZI(){for(;Pe!==null&&!TE();)R0(Pe)}function R0(t){var e=j0(t.alternate,t,_t);t.memoizedProps=t.pendingProps,e===null?P0(t):Pe=e,Fh.current=null}function P0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qI(n,e),n!==null){n.flags&=32767,Pe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{De=6,Pe=null;return}}else if(n=HI(n,e,_t),n!==null){Pe=n;return}if(e=e.sibling,e!==null){Pe=e;return}Pe=e=t}while(e!==null);De===0&&(De=5)}function Ar(t,e,n){var r=ae,s=Rt.transition;try{Rt.transition=null,ae=1,eT(t,e,n,r)}finally{Rt.transition=s,ae=r}return null}function eT(t,e,n,r){do Ss();while(Gn!==null);if(se&6)throw Error(F(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(DE(t,i),t===Fe&&(Pe=Fe=null,We=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Na||(Na=!0,D0(cl,function(){return Ss(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Rt.transition,Rt.transition=null;var o=ae;ae=1;var c=se;se|=4,Fh.current=null,KI(t,n),b0(n,t),_I(od),dl=!!id,od=id=null,t.current=n,QI(n),bE(),se=c,ae=o,Rt.transition=i}else t.current=n;if(Na&&(Na=!1,Gn=t,Sl=s),i=t.pendingLanes,i===0&&(tr=null),AE(n.stateNode),yt(t,Ae()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Nl)throw Nl=!1,t=Nd,Nd=null,t;return Sl&1&&t.tag!==0&&Ss(),i=t.pendingLanes,i&1?t===Sd?Gi++:(Gi=0,Sd=t):Gi=0,yr(),null}function Ss(){if(Gn!==null){var t=dv(Sl),e=Rt.transition,n=ae;try{if(Rt.transition=null,ae=16>t?16:t,Gn===null)var r=!1;else{if(t=Gn,Gn=null,Sl=0,se&6)throw Error(F(331));var s=se;for(se|=4,$=t.current;$!==null;){var i=$,o=i.child;if($.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for($=d;$!==null;){var m=$;switch(m.tag){case 0:case 11:case 15:Hi(8,m,i)}var p=m.child;if(p!==null)p.return=m,$=p;else for(;$!==null;){m=$;var g=m.sibling,_=m.return;if(E0(m),m===d){$=null;break}if(g!==null){g.return=_,$=g;break}$=_}}}var S=i.alternate;if(S!==null){var A=S.child;if(A!==null){S.child=null;do{var P=A.sibling;A.sibling=null,A=P}while(A!==null)}}$=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,$=o;else e:for(;$!==null;){if(i=$,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Hi(9,i,i.return)}var T=i.sibling;if(T!==null){T.return=i.return,$=T;break e}$=i.return}}var v=t.current;for($=v;$!==null;){o=$;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,$=E;else e:for(o=v;$!==null;){if(c=$,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:sc(9,c)}}catch(V){be(c,c.return,V)}if(c===o){$=null;break e}var R=c.sibling;if(R!==null){R.return=c.return,$=R;break e}$=c.return}}if(se=s,yr(),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(Yl,t)}catch{}r=!0}return r}finally{ae=n,Rt.transition=e}}return!1}function Xp(t,e,n){e=Vs(n,e),e=d0(t,e,1),t=er(t,e,1),e=ct(),t!==null&&(Co(t,1,e),yt(t,e))}function be(t,e,n){if(t.tag===3)Xp(t,t,n);else for(;e!==null;){if(e.tag===3){Xp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(tr===null||!tr.has(r))){t=Vs(n,t),t=h0(e,t,1),e=er(e,t,1),t=ct(),e!==null&&(Co(e,1,t),yt(e,t));break}}e=e.return}}function tT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ct(),t.pingedLanes|=t.suspendedLanes&n,Fe===t&&(We&n)===n&&(De===4||De===3&&(We&130023424)===We&&500>Ae()-Bh?Dr(t,0):Uh|=n),yt(t,e)}function k0(t,e){e===0&&(t.mode&1?(e=ga,ga<<=1,!(ga&130023424)&&(ga=4194304)):e=1);var n=ct();t=Tn(t,e),t!==null&&(Co(t,e,n),yt(t,n))}function nT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),k0(t,n)}function rT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),k0(t,n)}var j0;j0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pt.current)mt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return mt=!1,WI(t,e,n);mt=!!(t.flags&131072)}else mt=!1,ge&&e.flags&1048576&&Vv(e,vl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;$a(t,e),t=e.pendingProps;var s=js(e,rt.current);Ns(e,n),s=Dh(null,e,r,t,s,n);var i=Oh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gt(r)?(i=!0,gl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ch(e),s.updater=rc,e.stateNode=s,s._reactInternals=e,pd(e,r,t,n),e=vd(null,e,r,!0,i,n)):(e.tag=0,ge&&i&&Eh(e),lt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch($a(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=iT(r),t=Lt(r,t),s){case 0:e=yd(null,e,r,t,n);break e;case 1:e=zp(null,e,r,t,n);break e;case 11:e=Up(null,e,r,t,n);break e;case 14:e=Bp(null,e,r,Lt(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Lt(r,s),yd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Lt(r,s),zp(t,e,r,s,n);case 3:e:{if(g0(e),t===null)throw Error(F(387));r=e.pendingProps,i=e.memoizedState,s=i.element,$v(t,e),wl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Vs(Error(F(423)),e),e=$p(t,e,r,n,s);break e}else if(r!==s){s=Vs(Error(F(424)),e),e=$p(t,e,r,n,s);break e}else for(wt=Zn(e.stateNode.containerInfo.firstChild),Et=e,ge=!0,Ut=null,n=Bv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ds(),r===s){e=bn(t,e,n);break e}lt(t,e,r,n)}e=e.child}return e;case 5:return Wv(e),t===null&&hd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,ad(r,s)?o=null:i!==null&&ad(r,i)&&(e.flags|=32),p0(t,e),lt(t,e,o,n),e.child;case 6:return t===null&&hd(e),null;case 13:return y0(t,e,n);case 4:return Rh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Os(e,null,r,n):lt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Lt(r,s),Up(t,e,r,s,n);case 7:return lt(t,e,e.pendingProps,n),e.child;case 8:return lt(t,e,e.pendingProps.children,n),e.child;case 12:return lt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,de(xl,r._currentValue),r._currentValue=o,i!==null)if(Wt(i.value,o)){if(i.children===s.children&&!pt.current){e=bn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=xn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?u.next=u:(u.next=m.next,m.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),fd(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),fd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}lt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ns(e,n),s=Dt(s),r=r(s),e.flags|=1,lt(t,e,r,n),e.child;case 14:return r=e.type,s=Lt(r,e.pendingProps),s=Lt(r.type,s),Bp(t,e,r,s,n);case 15:return f0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Lt(r,s),$a(t,e),e.tag=1,gt(r)?(t=!0,gl(e)):t=!1,Ns(e,n),u0(e,r,s),pd(e,r,s,n),vd(null,e,r,!0,t,n);case 19:return v0(t,e,n);case 22:return m0(t,e,n)}throw Error(F(156,e.tag))};function D0(t,e){return av(t,e)}function sT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(t,e,n,r){return new sT(t,e,n,r)}function Hh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function iT(t){if(typeof t=="function")return Hh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===uh)return 11;if(t===dh)return 14}return 2}function rr(t,e){var n=t.alternate;return n===null?(n=Ct(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function qa(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Hh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case us:return Or(n.children,s,i,e);case ch:o=8,s|=8;break;case Fu:return t=Ct(12,n,e,s|2),t.elementType=Fu,t.lanes=i,t;case Uu:return t=Ct(13,n,e,s),t.elementType=Uu,t.lanes=i,t;case Bu:return t=Ct(19,n,e,s),t.elementType=Bu,t.lanes=i,t;case Wy:return oc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case zy:o=10;break e;case $y:o=9;break e;case uh:o=11;break e;case dh:o=14;break e;case Ln:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Ct(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Or(t,e,n,r){return t=Ct(7,t,r,e),t.lanes=n,t}function oc(t,e,n,r){return t=Ct(22,t,r,e),t.elementType=Wy,t.lanes=n,t.stateNode={isHidden:!1},t}function Eu(t,e,n){return t=Ct(6,t,null,e),t.lanes=n,t}function Iu(t,e,n){return e=Ct(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function oT(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ru(0),this.expirationTimes=ru(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ru(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function qh(t,e,n,r,s,i,o,c,u){return t=new oT(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ct(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ch(i),t}function aT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function O0(t){if(!t)return dr;t=t._reactInternals;e:{if(Qr(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(gt(n))return Ov(t,n,e)}return e}function M0(t,e,n,r,s,i,o,c,u){return t=qh(n,r,!0,t,s,i,o,c,u),t.context=O0(null),n=t.current,r=ct(),s=nr(n),i=xn(r,s),i.callback=e??null,er(n,i,s),t.current.lanes=s,Co(t,s,r),yt(t,r),t}function ac(t,e,n,r){var s=e.current,i=ct(),o=nr(s);return n=O0(n),e.context===null?e.context=n:e.pendingContext=n,e=xn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=er(s,e,o),t!==null&&($t(t,s,o,i),Ua(t,s,o)),o}function Cl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Zp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Gh(t,e){Zp(t,e),(t=t.alternate)&&Zp(t,e)}function lT(){return null}var V0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Kh(t){this._internalRoot=t}lc.prototype.render=Kh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));ac(t,e,null,null)};lc.prototype.unmount=Kh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Br(function(){ac(null,t,null,null)}),e[In]=null}};function lc(t){this._internalRoot=t}lc.prototype.unstable_scheduleHydration=function(t){if(t){var e=mv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Un.length&&e!==0&&e<Un[n].priority;n++);Un.splice(n,0,t),n===0&&gv(t)}};function Qh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function cc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function eg(){}function cT(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Cl(o);i.call(d)}}var o=M0(e,r,t,0,null,!1,!1,"",eg);return t._reactRootContainer=o,t[In]=o.current,ao(t.nodeType===8?t.parentNode:t),Br(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Cl(u);c.call(d)}}var u=qh(t,0,!1,null,null,!1,!1,"",eg);return t._reactRootContainer=u,t[In]=u.current,ao(t.nodeType===8?t.parentNode:t),Br(function(){ac(e,u,n,r)}),u}function uc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=Cl(o);c.call(u)}}ac(e,o,t,s)}else o=cT(n,e,t,s,r);return Cl(o)}hv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ki(e.pendingLanes);n!==0&&(mh(e,n|1),yt(e,Ae()),!(se&6)&&(Ls=Ae()+500,yr()))}break;case 13:Br(function(){var r=Tn(t,1);if(r!==null){var s=ct();$t(r,t,1,s)}}),Gh(t,1)}};ph=function(t){if(t.tag===13){var e=Tn(t,134217728);if(e!==null){var n=ct();$t(e,t,134217728,n)}Gh(t,134217728)}};fv=function(t){if(t.tag===13){var e=nr(t),n=Tn(t,e);if(n!==null){var r=ct();$t(n,t,e,r)}Gh(t,e)}};mv=function(){return ae};pv=function(t,e){var n=ae;try{return ae=t,e()}finally{ae=n}};Ju=function(t,e,n){switch(e){case"input":if(Wu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ec(r);if(!s)throw Error(F(90));qy(r),Wu(r,s)}}}break;case"textarea":Ky(t,n);break;case"select":e=n.value,e!=null&&Es(t,!!n.multiple,e,!1)}};tv=zh;nv=Br;var uT={usingClientEntryPoint:!1,Events:[Po,ms,ec,Zy,ev,zh]},Ni={findFiberByHostInstance:Rr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dT={bundleType:Ni.bundleType,version:Ni.version,rendererPackageName:Ni.rendererPackageName,rendererConfig:Ni.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=iv(t),t===null?null:t.stateNode},findFiberByHostInstance:Ni.findFiberByHostInstance||lT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sa.isDisabled&&Sa.supportsFiber)try{Yl=Sa.inject(dT),Jt=Sa}catch{}}Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uT;Tt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qh(e))throw Error(F(200));return aT(t,e,null,n)};Tt.createRoot=function(t,e){if(!Qh(t))throw Error(F(299));var n=!1,r="",s=V0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=qh(t,1,!1,null,null,n,!1,r,s),t[In]=e.current,ao(t.nodeType===8?t.parentNode:t),new Kh(e)};Tt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=iv(e),t=t===null?null:t.stateNode,t};Tt.flushSync=function(t){return Br(t)};Tt.hydrate=function(t,e,n){if(!cc(e))throw Error(F(200));return uc(null,t,e,!0,n)};Tt.hydrateRoot=function(t,e,n){if(!Qh(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=V0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=M0(e,null,t,1,n??null,s,!1,i,o),t[In]=e.current,ao(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new lc(e)};Tt.render=function(t,e,n){if(!cc(e))throw Error(F(200));return uc(null,t,e,!1,n)};Tt.unmountComponentAtNode=function(t){if(!cc(t))throw Error(F(40));return t._reactRootContainer?(Br(function(){uc(null,null,t,!1,function(){t._reactRootContainer=null,t[In]=null})}),!0):!1};Tt.unstable_batchedUpdates=zh;Tt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!cc(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return uc(t,e,n,!1,r)};Tt.version="18.3.1-next-f1338f8080-20240426";function L0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(L0)}catch(t){console.error(t)}}L0(),Ly.exports=Tt;var hT=Ly.exports,tg=hT;Vu.createRoot=tg.createRoot,Vu.hydrateRoot=tg.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yo(){return yo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yo.apply(this,arguments)}var Kn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Kn||(Kn={}));const ng="popstate";function fT(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:c}=r.location;return Rd("",{pathname:i,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Rl(s)}return pT(e,n,null,t)}function Ce(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Yh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mT(){return Math.random().toString(36).substr(2,8)}function rg(t,e){return{usr:t.state,key:t.key,idx:e}}function Rd(t,e,n,r){return n===void 0&&(n=null),yo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Js(e):e,{state:n,key:e&&e.key||r||mT()})}function Rl(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Js(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function pT(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,c=Kn.Pop,u=null,d=m();d==null&&(d=0,o.replaceState(yo({},o.state,{idx:d}),""));function m(){return(o.state||{idx:null}).idx}function p(){c=Kn.Pop;let P=m(),T=P==null?null:P-d;d=P,u&&u({action:c,location:A.location,delta:T})}function g(P,T){c=Kn.Push;let v=Rd(A.location,P,T);d=m()+1;let E=rg(v,d),R=A.createHref(v);try{o.pushState(E,"",R)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(R)}i&&u&&u({action:c,location:A.location,delta:1})}function _(P,T){c=Kn.Replace;let v=Rd(A.location,P,T);d=m();let E=rg(v,d),R=A.createHref(v);o.replaceState(E,"",R),i&&u&&u({action:c,location:A.location,delta:0})}function S(P){let T=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof P=="string"?P:Rl(P);return v=v.replace(/ $/,"%20"),Ce(T,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,T)}let A={get action(){return c},get location(){return t(s,o)},listen(P){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(ng,p),u=P,()=>{s.removeEventListener(ng,p),u=null}},createHref(P){return e(s,P)},createURL:S,encodeLocation(P){let T=S(P);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:g,replace:_,go(P){return o.go(P)}};return A}var sg;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(sg||(sg={}));function gT(t,e,n){return n===void 0&&(n="/"),yT(t,e,n)}function yT(t,e,n,r){let s=typeof e=="string"?Js(e):e,i=Jh(s.pathname||"/",n);if(i==null)return null;let o=F0(t);vT(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=RT(i);c=ST(o[u],d)}return c}function F0(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Ce(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=sr([r,u.relativePath]),m=n.concat(u);i.children&&i.children.length>0&&(Ce(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),F0(i.children,e,m,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:bT(d,i.index),routesMeta:m})};return t.forEach((i,o)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,o);else for(let u of U0(i.path))s(i,o,u)}),e}function U0(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=U0(r.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function vT(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:NT(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const xT=/^:[\w-]+$/,_T=3,wT=2,ET=1,IT=10,TT=-2,ig=t=>t==="*";function bT(t,e){let n=t.split("/"),r=n.length;return n.some(ig)&&(r+=TT),e&&(r+=wT),n.filter(s=>!ig(s)).reduce((s,i)=>s+(xT.test(i)?_T:i===""?ET:IT),r)}function NT(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function ST(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,m=i==="/"?e:e.slice(i.length)||"/",p=AT({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},m),g=u.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:sr([i,p.pathname]),pathnameBase:OT(sr([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=sr([i,p.pathnameBase]))}return o}function AT(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=CT(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,m,p)=>{let{paramName:g,isOptional:_}=m;if(g==="*"){let A=c[p]||"";o=i.slice(0,i.length-A.length).replace(/(.)\/+$/,"$1")}const S=c[p];return _&&!S?d[g]=void 0:d[g]=(S||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function CT(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Yh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function RT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Jh(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const PT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kT=t=>PT.test(t);function jT(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Js(t):t,i;if(n)if(kT(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Yh(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=og(n.substring(1),"/"):i=og(n,e)}else i=e;return{pathname:i,search:MT(r),hash:VT(s)}}function og(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Tu(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function DT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Xh(t,e){let n=DT(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Zh(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Js(t):(s=yo({},t),Ce(!s.pathname||!s.pathname.includes("?"),Tu("?","pathname","search",s)),Ce(!s.pathname||!s.pathname.includes("#"),Tu("#","pathname","hash",s)),Ce(!s.search||!s.search.includes("#"),Tu("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,c;if(o==null)c=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}c=p>=0?e[p]:"/"}let u=jT(s,c),d=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||m)&&(u.pathname+="/"),u}const sr=t=>t.join("/").replace(/\/\/+/g,"/"),OT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),MT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function LT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const B0=["post","put","patch","delete"];new Set(B0);const FT=["get",...B0];new Set(FT);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vo(){return vo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vo.apply(this,arguments)}const ef=O.createContext(null),UT=O.createContext(null),vr=O.createContext(null),dc=O.createContext(null),xr=O.createContext({outlet:null,matches:[],isDataRoute:!1}),z0=O.createContext(null);function BT(t,e){let{relative:n}=e===void 0?{}:e;Xs()||Ce(!1);let{basename:r,navigator:s}=O.useContext(vr),{hash:i,pathname:o,search:c}=W0(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:sr([r,o])),s.createHref({pathname:u,search:c,hash:i})}function Xs(){return O.useContext(dc)!=null}function jo(){return Xs()||Ce(!1),O.useContext(dc).location}function $0(t){O.useContext(vr).static||O.useLayoutEffect(t)}function Do(){let{isDataRoute:t}=O.useContext(xr);return t?eb():zT()}function zT(){Xs()||Ce(!1);let t=O.useContext(ef),{basename:e,future:n,navigator:r}=O.useContext(vr),{matches:s}=O.useContext(xr),{pathname:i}=jo(),o=JSON.stringify(Xh(s,n.v7_relativeSplatPath)),c=O.useRef(!1);return $0(()=>{c.current=!0}),O.useCallback(function(d,m){if(m===void 0&&(m={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let p=Zh(d,JSON.parse(o),i,m.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:sr([e,p.pathname])),(m.replace?r.replace:r.push)(p,m.state,m)},[e,r,o,i,t])}function W0(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=O.useContext(vr),{matches:s}=O.useContext(xr),{pathname:i}=jo(),o=JSON.stringify(Xh(s,r.v7_relativeSplatPath));return O.useMemo(()=>Zh(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function $T(t,e){return WT(t,e)}function WT(t,e,n,r){Xs()||Ce(!1);let{navigator:s}=O.useContext(vr),{matches:i}=O.useContext(xr),o=i[i.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=jo(),m;if(e){var p;let P=typeof e=="string"?Js(e):e;u==="/"||(p=P.pathname)!=null&&p.startsWith(u)||Ce(!1),m=P}else m=d;let g=m.pathname||"/",_=g;if(u!=="/"){let P=u.replace(/^\//,"").split("/");_="/"+g.replace(/^\//,"").split("/").slice(P.length).join("/")}let S=gT(t,{pathname:_}),A=QT(S&&S.map(P=>Object.assign({},P,{params:Object.assign({},c,P.params),pathname:sr([u,s.encodeLocation?s.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?u:sr([u,s.encodeLocation?s.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),i,n,r);return e&&A?O.createElement(dc.Provider,{value:{location:vo({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Kn.Pop}},A):A}function HT(){let t=ZT(),e=LT(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:s},n):null,null)}const qT=O.createElement(HT,null);class GT extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(xr.Provider,{value:this.props.routeContext},O.createElement(z0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function KT(t){let{routeContext:e,match:n,children:r}=t,s=O.useContext(ef);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(xr.Provider,{value:e},r)}function QT(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let m=o.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);m>=0||Ce(!1),o=o.slice(0,Math.min(o.length,m+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<o.length;m++){let p=o[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=m),p.route.id){let{loaderData:g,errors:_}=n,S=p.route.loader&&g[p.route.id]===void 0&&(!_||_[p.route.id]===void 0);if(p.route.lazy||S){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((m,p,g)=>{let _,S=!1,A=null,P=null;n&&(_=c&&p.route.id?c[p.route.id]:void 0,A=p.route.errorElement||qT,u&&(d<0&&g===0?(tb("route-fallback"),S=!0,P=null):d===g&&(S=!0,P=p.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,g+1)),v=()=>{let E;return _?E=A:S?E=P:p.route.Component?E=O.createElement(p.route.Component,null):p.route.element?E=p.route.element:E=m,O.createElement(KT,{match:p,routeContext:{outlet:m,matches:T,isDataRoute:n!=null},children:E})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?O.createElement(GT,{location:n.location,revalidation:n.revalidation,component:A,error:_,children:v(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):v()},null)}var H0=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(H0||{}),q0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(q0||{});function YT(t){let e=O.useContext(ef);return e||Ce(!1),e}function JT(t){let e=O.useContext(UT);return e||Ce(!1),e}function XT(t){let e=O.useContext(xr);return e||Ce(!1),e}function G0(t){let e=XT(),n=e.matches[e.matches.length-1];return n.route.id||Ce(!1),n.route.id}function ZT(){var t;let e=O.useContext(z0),n=JT(),r=G0();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function eb(){let{router:t}=YT(H0.UseNavigateStable),e=G0(q0.UseNavigateStable),n=O.useRef(!1);return $0(()=>{n.current=!0}),O.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,vo({fromRouteId:e},i)))},[t,e])}const ag={};function tb(t,e,n){ag[t]||(ag[t]=!0)}function nb(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function rb(t){let{to:e,replace:n,state:r,relative:s}=t;Xs()||Ce(!1);let{future:i,static:o}=O.useContext(vr),{matches:c}=O.useContext(xr),{pathname:u}=jo(),d=Do(),m=Zh(e,Xh(c,i.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(m);return O.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function Te(t){Ce(!1)}function sb(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Kn.Pop,navigator:i,static:o=!1,future:c}=t;Xs()&&Ce(!1);let u=e.replace(/^\/*/,"/"),d=O.useMemo(()=>({basename:u,navigator:i,static:o,future:vo({v7_relativeSplatPath:!1},c)}),[u,c,i,o]);typeof r=="string"&&(r=Js(r));let{pathname:m="/",search:p="",hash:g="",state:_=null,key:S="default"}=r,A=O.useMemo(()=>{let P=Jh(m,u);return P==null?null:{location:{pathname:P,search:p,hash:g,state:_,key:S},navigationType:s}},[u,m,p,g,_,S,s]);return A==null?null:O.createElement(vr.Provider,{value:d},O.createElement(dc.Provider,{children:n,value:A}))}function tf(t){let{children:e,location:n}=t;return $T(Pd(e),n)}new Promise(()=>{});function Pd(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,s)=>{if(!O.isValidElement(r))return;let i=[...e,s];if(r.type===O.Fragment){n.push.apply(n,Pd(r.props.children,i));return}r.type!==Te&&Ce(!1),!r.props.index||!r.props.children||Ce(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Pd(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kd(){return kd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kd.apply(this,arguments)}function ib(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function ob(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ab(t,e){return t.button===0&&(!e||e==="_self")&&!ob(t)}const lb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],cb="6";try{window.__reactRouterVersion=cb}catch{}const ub="startTransition",lg=tE[ub];function db(t){let{basename:e,children:n,future:r,window:s}=t,i=O.useRef();i.current==null&&(i.current=fT({window:s,v5Compat:!0}));let o=i.current,[c,u]=O.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},m=O.useCallback(p=>{d&&lg?lg(()=>u(p)):u(p)},[u,d]);return O.useLayoutEffect(()=>o.listen(m),[o,m]),O.useEffect(()=>nb(r),[r]),O.createElement(sb,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const hb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,q=O.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:c,target:u,to:d,preventScrollReset:m,viewTransition:p}=e,g=ib(e,lb),{basename:_}=O.useContext(vr),S,A=!1;if(typeof d=="string"&&fb.test(d)&&(S=d,hb))try{let E=new URL(window.location.href),R=d.startsWith("//")?new URL(E.protocol+d):new URL(d),V=Jh(R.pathname,_);R.origin===E.origin&&V!=null?d=V+R.search+R.hash:A=!0}catch{}let P=BT(d,{relative:s}),T=mb(d,{replace:o,state:c,target:u,preventScrollReset:m,relative:s,viewTransition:p});function v(E){r&&r(E),E.defaultPrevented||T(E)}return O.createElement("a",kd({},g,{href:S||P,onClick:A||i?r:v,ref:n,target:u}))});var cg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(cg||(cg={}));var ug;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ug||(ug={}));function mb(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:c}=e===void 0?{}:e,u=Do(),d=jo(),m=W0(t,{relative:o});return O.useCallback(p=>{if(ab(p,n)){p.preventDefault();let g=r!==void 0?r:Rl(d)===Rl(m);u(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:c})}},[d,u,m,r,s,n,t,i,o,c])}var dg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},pb=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Q0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,m=i>>2,p=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,_=d&63;u||(_=64,o||(g=64)),r.push(n[m],n[p],n[g],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(K0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):pb(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||p==null)throw new gb;const g=i<<2|c>>4;if(r.push(g),d!==64){const _=c<<4&240|d>>2;if(r.push(_),p!==64){const S=d<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class gb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yb=function(t){const e=K0(t);return Q0.encodeByteArray(e,!0)},Pl=function(t){return yb(t).replace(/\./g,"")},Y0=function(t){try{return Q0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=()=>vb().__FIREBASE_DEFAULTS__,_b=()=>{if(typeof process>"u"||typeof dg>"u")return;const t=dg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wb=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Y0(t[1]);return e&&JSON.parse(e)},hc=()=>{try{return xb()||_b()||wb()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},J0=t=>{var e,n;return(n=(e=hc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Eb=t=>{const e=J0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},X0=()=>{var t;return(t=hc())===null||t===void 0?void 0:t.config},Z0=t=>{var e;return(e=hc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Pl(JSON.stringify(n)),Pl(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(st())}function Nb(){var t;const e=(t=hc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Sb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ab(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Cb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Rb(){const t=st();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Pb(){return!Nb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kb(){try{return typeof indexedDB=="object"}catch{return!1}}function jb(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db="FirebaseError";class Pn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Db,Object.setPrototypeOf(this,Pn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oo.prototype.create)}}class Oo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Ob(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Pn(s,c,r)}}function Ob(t,e){return t.replace(Mb,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Mb=/\{\$([^}]+)}/g;function Vb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function kl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(hg(i)&&hg(o)){if(!kl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function hg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Di(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Oi(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Lb(t,e){const n=new Fb(t,e);return n.subscribe.bind(n)}class Fb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Ub(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=bu),s.error===void 0&&(s.error=bu),s.complete===void 0&&(s.complete=bu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ub(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function bu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t){return t&&t._delegate?t._delegate:t}class zr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ib;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($b(e))try{this.getOrInitializeService({instanceIdentifier:Cr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Cr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cr){return this.instances.has(e)}getOptions(e=Cr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:zb(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Cr){return this.component?this.component.multipleInstances?e:Cr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zb(t){return t===Cr?void 0:t}function $b(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Bb(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const Hb={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},qb=ne.INFO,Gb={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},Kb=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Gb[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class nf{constructor(e){this.name=e,this._logLevel=qb,this._logHandler=Kb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Hb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const Qb=(t,e)=>e.some(n=>t instanceof n);let fg,mg;function Yb(){return fg||(fg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Jb(){return mg||(mg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ex=new WeakMap,jd=new WeakMap,tx=new WeakMap,Nu=new WeakMap,rf=new WeakMap;function Xb(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ir(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ex.set(n,t)}).catch(()=>{}),rf.set(e,t),e}function Zb(t){if(jd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});jd.set(t,e)}let Dd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||tx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ir(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eN(t){Dd=t(Dd)}function tN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Su(this),e,...n);return tx.set(r,e.sort?e.sort():[e]),ir(r)}:Jb().includes(t)?function(...e){return t.apply(Su(this),e),ir(ex.get(this))}:function(...e){return ir(t.apply(Su(this),e))}}function nN(t){return typeof t=="function"?tN(t):(t instanceof IDBTransaction&&Zb(t),Qb(t,Yb())?new Proxy(t,Dd):t)}function ir(t){if(t instanceof IDBRequest)return Xb(t);if(Nu.has(t))return Nu.get(t);const e=nN(t);return e!==t&&(Nu.set(t,e),rf.set(e,t)),e}const Su=t=>rf.get(t);function rN(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=ir(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ir(o.result),u.oldVersion,u.newVersion,ir(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const sN=["get","getKey","getAll","getAllKeys","count"],iN=["put","add","delete","clear"],Au=new Map;function pg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Au.get(e))return Au.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=iN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||sN.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return Au.set(e,i),i}eN(t=>({...t,get:(e,n,r)=>pg(e,n)||t.get(e,n,r),has:(e,n)=>!!pg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(aN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function aN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Od="@firebase/app",gg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn=new nf("@firebase/app"),lN="@firebase/app-compat",cN="@firebase/analytics-compat",uN="@firebase/analytics",dN="@firebase/app-check-compat",hN="@firebase/app-check",fN="@firebase/auth",mN="@firebase/auth-compat",pN="@firebase/database",gN="@firebase/data-connect",yN="@firebase/database-compat",vN="@firebase/functions",xN="@firebase/functions-compat",_N="@firebase/installations",wN="@firebase/installations-compat",EN="@firebase/messaging",IN="@firebase/messaging-compat",TN="@firebase/performance",bN="@firebase/performance-compat",NN="@firebase/remote-config",SN="@firebase/remote-config-compat",AN="@firebase/storage",CN="@firebase/storage-compat",RN="@firebase/firestore",PN="@firebase/vertexai-preview",kN="@firebase/firestore-compat",jN="firebase",DN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md="[DEFAULT]",ON={[Od]:"fire-core",[lN]:"fire-core-compat",[uN]:"fire-analytics",[cN]:"fire-analytics-compat",[hN]:"fire-app-check",[dN]:"fire-app-check-compat",[fN]:"fire-auth",[mN]:"fire-auth-compat",[pN]:"fire-rtdb",[gN]:"fire-data-connect",[yN]:"fire-rtdb-compat",[vN]:"fire-fn",[xN]:"fire-fn-compat",[_N]:"fire-iid",[wN]:"fire-iid-compat",[EN]:"fire-fcm",[IN]:"fire-fcm-compat",[TN]:"fire-perf",[bN]:"fire-perf-compat",[NN]:"fire-rc",[SN]:"fire-rc-compat",[AN]:"fire-gcs",[CN]:"fire-gcs-compat",[RN]:"fire-fst",[kN]:"fire-fst-compat",[PN]:"fire-vertex","fire-js":"fire-js",[jN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl=new Map,MN=new Map,Vd=new Map;function yg(t,e){try{t.container.addComponent(e)}catch(n){Nn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Fs(t){const e=t.name;if(Vd.has(e))return Nn.debug(`There were multiple attempts to register component ${e}.`),!1;Vd.set(e,t);for(const n of jl.values())yg(n,t);for(const n of MN.values())yg(n,t);return!0}function sf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Yt(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},or=new Oo("app","Firebase",VN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw or.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs=DN;function nx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Md,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw or.create("bad-app-name",{appName:String(s)});if(n||(n=X0()),!n)throw or.create("no-options");const i=jl.get(s);if(i){if(kl(n,i.options)&&kl(r,i.config))return i;throw or.create("duplicate-app",{appName:s})}const o=new Wb(s);for(const u of Vd.values())o.addComponent(u);const c=new LN(n,r,o);return jl.set(s,c),c}function rx(t=Md){const e=jl.get(t);if(!e&&t===Md&&X0())return nx();if(!e)throw or.create("no-app",{appName:t});return e}function ar(t,e,n){var r;let s=(r=ON[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nn.warn(c.join(" "));return}Fs(new zr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="firebase-heartbeat-database",UN=1,xo="firebase-heartbeat-store";let Cu=null;function sx(){return Cu||(Cu=rN(FN,UN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xo)}catch(n){console.warn(n)}}}}).catch(t=>{throw or.create("idb-open",{originalErrorMessage:t.message})})),Cu}async function BN(t){try{const n=(await sx()).transaction(xo),r=await n.objectStore(xo).get(ix(t));return await n.done,r}catch(e){if(e instanceof Pn)Nn.warn(e.message);else{const n=or.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Nn.warn(n.message)}}}async function vg(t,e){try{const r=(await sx()).transaction(xo,"readwrite");await r.objectStore(xo).put(e,ix(t)),await r.done}catch(n){if(n instanceof Pn)Nn.warn(n.message);else{const r=or.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Nn.warn(r.message)}}}function ix(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=1024,$N=30*24*60*60*1e3;class WN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=xg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=$N}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Nn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=xg(),{heartbeatsToSend:r,unsentEntries:s}=HN(this._heartbeatsCache.heartbeats),i=Pl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Nn.warn(n),""}}}function xg(){return new Date().toISOString().substring(0,10)}function HN(t,e=zN){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),_g(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),_g(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class qN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kb()?jb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await BN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return vg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return vg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function _g(t){return Pl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(t){Fs(new zr("platform-logger",e=>new oN(e),"PRIVATE")),Fs(new zr("heartbeat",e=>new WN(e),"PRIVATE")),ar(Od,gg,t),ar(Od,gg,"esm2017"),ar("fire-js","")}GN("");function of(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function ox(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KN=ox,ax=new Oo("auth","Firebase",ox());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=new nf("@firebase/auth");function QN(t,...e){Dl.logLevel<=ne.WARN&&Dl.warn(`Auth (${Zs}): ${t}`,...e)}function Ga(t,...e){Dl.logLevel<=ne.ERROR&&Dl.error(`Auth (${Zs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(t,...e){throw af(t,...e)}function Zt(t,...e){return af(t,...e)}function lx(t,e,n){const r=Object.assign(Object.assign({},KN()),{[e]:n});return new Oo("auth","Firebase",r).create(e,{appName:t.name})}function _n(t){return lx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function af(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ax.create(t,...e)}function K(t,e,...n){if(!t)throw af(e,...n)}function gn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ga(e),new Error(e)}function Sn(t,e){t||gn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function YN(){return wg()==="http:"||wg()==="https:"}function wg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YN()||Ab()||"connection"in navigator)?navigator.onLine:!0}function XN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Sn(n>e,"Short delay should be less than long delay!"),this.isMobile=bb()||Cb()}get(){return JN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(t,e){Sn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS=new Vo(3e4,6e4);function _r(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function kn(t,e,n,r,s={}){return ux(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=Mo(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return Sb()||(d.referrerPolicy="no-referrer"),cx.fetch()(dx(t,t.config.apiHost,n,c),d)})}async function ux(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},ZN),e);try{const s=new nS(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Aa(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Aa(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Aa(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Aa(t,"user-disabled",o);const m=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw lx(t,m,d);Ht(t,m)}}catch(s){if(s instanceof Pn)throw s;Ht(t,"network-request-failed",{message:String(s)})}}async function Lo(t,e,n,r,s={}){const i=await kn(t,e,n,r,s);return"mfaPendingCredential"in i&&Ht(t,"multi-factor-auth-required",{_serverResponse:i}),i}function dx(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?lf(t.config,s):`${t.config.apiScheme}://${s}`}function tS(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nS{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Zt(this.auth,"network-request-failed")),eS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Aa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Zt(t,e,r);return s.customData._tokenResponse=n,s}function Eg(t){return t!==void 0&&t.enterprise!==void 0}class rS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return tS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function sS(t,e){return kn(t,"GET","/v2/recaptchaConfig",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iS(t,e){return kn(t,"POST","/v1/accounts:delete",e)}async function hx(t,e){return kn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oS(t,e=!1){const n=it(t),r=await n.getIdToken(e),s=cf(r);K(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ki(Ru(s.auth_time)),issuedAtTime:Ki(Ru(s.iat)),expirationTime:Ki(Ru(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Ru(t){return Number(t)*1e3}function cf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ga("JWT malformed, contained fewer than 3 sections"),null;try{const s=Y0(n);return s?JSON.parse(s):(Ga("Failed to decode base64 JWT payload"),null)}catch(s){return Ga("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Ig(t){const e=cf(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Us(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Pn&&aS(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function aS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ki(this.lastLoginAt),this.creationTime=Ki(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ol(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Us(t,hx(n,{idToken:r}));K(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?fx(i.providerUserInfo):[],c=uS(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),m=u?d:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Fd(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(t,p)}async function cS(t){const e=it(t);await Ol(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uS(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function fx(t){return t.map(e=>{var{providerId:n}=e,r=of(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dS(t,e){const n=await ux(t,{},async()=>{const r=Mo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=dx(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",cx.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hS(t,e){return kn(t,"POST","/v2/accounts:revokeToken",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ig(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){K(e.length!==0,"internal-error");const n=Ig(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await dS(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new As;return r&&(K(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(K(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(K(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new As,this.toJSON())}_performRefresh(){return gn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class yn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=of(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Fd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Us(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return oS(this,e)}reload(){return cS(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new yn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ol(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yt(this.auth.app))return Promise.reject(_n(this.auth));const e=await this.getIdToken();return await Us(this,iS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,c,u,d,m;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,_=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(c=n.tenantId)!==null&&c!==void 0?c:void 0,P=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,T=(d=n.createdAt)!==null&&d!==void 0?d:void 0,v=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:E,emailVerified:R,isAnonymous:V,providerData:U,stsTokenManager:I}=n;K(E&&I,e,"internal-error");const x=As.fromJSON(this.name,I);K(typeof E=="string",e,"internal-error"),Vn(p,e.name),Vn(g,e.name),K(typeof R=="boolean",e,"internal-error"),K(typeof V=="boolean",e,"internal-error"),Vn(_,e.name),Vn(S,e.name),Vn(A,e.name),Vn(P,e.name),Vn(T,e.name),Vn(v,e.name);const w=new yn({uid:E,auth:e,email:g,emailVerified:R,displayName:p,isAnonymous:V,photoURL:S,phoneNumber:_,tenantId:A,stsTokenManager:x,createdAt:T,lastLoginAt:v});return U&&Array.isArray(U)&&(w.providerData=U.map(b=>Object.assign({},b))),P&&(w._redirectEventId=P),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new As;s.updateFromServerResponse(n);const i=new yn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ol(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];K(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?fx(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new As;c.updateFromIdToken(r);const u=new yn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Fd(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg=new Map;function vn(t){Sn(t instanceof Function,"Expected a class definition");let e=Tg.get(t);return e?(Sn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Tg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}mx.type="NONE";const bg=mx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(t,e,n){return`firebase:${t}:${e}:${n}`}class Cs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ka(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ka("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?yn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Cs(vn(bg),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||vn(bg);const o=Ka(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const m=await d._get(o);if(m){const p=yn._fromJSON(e,m);d!==i&&(c=p),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Cs(i,e,r):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Cs(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(px(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_x(e))return"Blackberry";if(wx(e))return"Webos";if(gx(e))return"Safari";if((e.includes("chrome/")||yx(e))&&!e.includes("edge/"))return"Chrome";if(xx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function px(t=st()){return/firefox\//i.test(t)}function gx(t=st()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yx(t=st()){return/crios\//i.test(t)}function vx(t=st()){return/iemobile/i.test(t)}function xx(t=st()){return/android/i.test(t)}function _x(t=st()){return/blackberry/i.test(t)}function wx(t=st()){return/webos/i.test(t)}function uf(t=st()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function fS(t=st()){var e;return uf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mS(){return Rb()&&document.documentMode===10}function Ex(t=st()){return uf(t)||xx(t)||wx(t)||_x(t)||/windows phone/i.test(t)||vx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(t,e=[]){let n;switch(t){case"Browser":n=Ng(st());break;case"Worker":n=`${Ng(st())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Zs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gS(t,e={}){return kn(t,"GET","/v2/passwordPolicy",_r(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=6;class vS{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:yS,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sg(this),this.idTokenSubscription=new Sg(this),this.beforeStateQueue=new pS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ax,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Cs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await hx(this,{idToken:e}),r=await yn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Yt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ol(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yt(this.app))return Promise.reject(_n(this));const n=e?it(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yt(this.app)?Promise.reject(_n(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yt(this.app)?Promise.reject(_n(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gS(this),n=new vS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Oo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await hS(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vn(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=await Cs.create(this,[vn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ix(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&QN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Yr(t){return it(t)}class Sg{constructor(e){this.auth=e,this.observer=null,this.addObserver=Lb(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _S(t){fc=t}function Tx(t){return fc.loadJS(t)}function wS(){return fc.recaptchaEnterpriseScript}function ES(){return fc.gapiScript}function IS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const TS="recaptcha-enterprise",bS="NO_RECAPTCHA";class NS{constructor(e){this.type=TS,this.auth=Yr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{sS(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new rS(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,o,c){const u=window.grecaptcha;Eg(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(bS)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&Eg(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=wS();u.length!==0&&(u+=c),Tx(u).then(()=>{s(c,i,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function Ag(t,e,n,r=!1){const s=new NS(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Ud(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Ag(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Ag(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(t,e){const n=sf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(kl(i,e??{}))return s;Ht(s,"already-initialized")}return n.initialize({options:e})}function AS(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function CS(t,e,n){const r=Yr(t);K(r._canInitEmulator,r,"emulator-config-failed"),K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=bx(e),{host:o,port:c}=RS(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),PS()}function bx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function RS(t){const e=bx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Cg(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Cg(o)}}}function Cg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function PS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gn("not implemented")}_getIdTokenResponse(e){return gn("not implemented")}_linkToIdToken(e,n){return gn("not implemented")}_getReauthenticationResolver(e){return gn("not implemented")}}async function kS(t,e){return kn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jS(t,e){return Lo(t,"POST","/v1/accounts:signInWithPassword",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DS(t,e){return Lo(t,"POST","/v1/accounts:signInWithEmailLink",_r(t,e))}async function OS(t,e){return Lo(t,"POST","/v1/accounts:signInWithEmailLink",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o extends df{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new _o(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new _o(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ud(e,n,"signInWithPassword",jS);case"emailLink":return DS(e,{email:this._email,oobCode:this._password});default:Ht(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ud(e,r,"signUpPassword",kS);case"emailLink":return OS(e,{idToken:n,email:this._email,oobCode:this._password});default:Ht(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rs(t,e){return Lo(t,"POST","/v1/accounts:signInWithIdp",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="http://localhost";class $r extends df{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $r(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ht("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=of(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new $r(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Rs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Rs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Rs(e,n)}buildRequest(){const e={requestUri:MS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Mo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function LS(t){const e=Di(Oi(t)).link,n=e?Di(Oi(e)).deep_link_id:null,r=Di(Oi(t)).deep_link_id;return(r?Di(Oi(r)).link:null)||r||n||e||t}class hf{constructor(e){var n,r,s,i,o,c;const u=Di(Oi(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,m=(r=u.oobCode)!==null&&r!==void 0?r:null,p=VS((s=u.mode)!==null&&s!==void 0?s:null);K(d&&m&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=m,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=LS(e);try{return new hf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(){this.providerId=ei.PROVIDER_ID}static credential(e,n){return _o._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=hf.parseLink(n);return K(r,"argument-error"),_o._fromEmailAndCode(e,r.code,r.tenantId)}}ei.PROVIDER_ID="password";ei.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ei.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo extends Nx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn extends Fo{constructor(){super("facebook.com")}static credential(e){return $r._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zn.credential(e.oauthAccessToken)}catch{return null}}}zn.FACEBOOK_SIGN_IN_METHOD="facebook.com";zn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n extends Fo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $r._fromParams({providerId:$n.PROVIDER_ID,signInMethod:$n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $n.credentialFromTaggedObject(e)}static credentialFromError(e){return $n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return $n.credential(n,r)}catch{return null}}}$n.GOOGLE_SIGN_IN_METHOD="google.com";$n.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn extends Fo{constructor(){super("github.com")}static credential(e){return $r._fromParams({providerId:Wn.PROVIDER_ID,signInMethod:Wn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wn.credentialFromTaggedObject(e)}static credentialFromError(e){return Wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wn.credential(e.oauthAccessToken)}catch{return null}}}Wn.GITHUB_SIGN_IN_METHOD="github.com";Wn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn extends Fo{constructor(){super("twitter.com")}static credential(e,n){return $r._fromParams({providerId:Hn.PROVIDER_ID,signInMethod:Hn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Hn.credentialFromTaggedObject(e)}static credentialFromError(e){return Hn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Hn.credential(n,r)}catch{return null}}}Hn.TWITTER_SIGN_IN_METHOD="twitter.com";Hn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FS(t,e){return Lo(t,"POST","/v1/accounts:signUp",_r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await yn._fromIdTokenResponse(e,r,s),o=Rg(r);return new Wr({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Rg(r);return new Wr({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Rg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml extends Pn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ml.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ml(e,n,r,s)}}function Sx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ml._fromErrorAndOperation(t,i,e,r):i})}async function US(t,e,n=!1){const r=await Us(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Wr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BS(t,e,n=!1){const{auth:r}=t;if(Yt(r.app))return Promise.reject(_n(r));const s="reauthenticate";try{const i=await Us(t,Sx(r,s,e,t),n);K(i.idToken,r,"internal-error");const o=cf(i.idToken);K(o,r,"internal-error");const{sub:c}=o;return K(t.uid===c,r,"user-mismatch"),Wr._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Ht(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ax(t,e,n=!1){if(Yt(t.app))return Promise.reject(_n(t));const r="signIn",s=await Sx(t,r,e),i=await Wr._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function zS(t,e){return Ax(Yr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cx(t){const e=Yr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $S(t,e,n){if(Yt(t.app))return Promise.reject(_n(t));const r=Yr(t),o=await Ud(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FS).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Cx(t),u}),c=await Wr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function WS(t,e,n){return Yt(t.app)?Promise.reject(_n(t)):zS(it(t),ei.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Cx(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HS(t,e){return kn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qS(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=it(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Us(r,HS(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function GS(t,e,n,r){return it(t).onIdTokenChanged(e,n,r)}function KS(t,e,n){return it(t).beforeAuthStateChanged(e,n)}function QS(t,e,n,r){return it(t).onAuthStateChanged(e,n,r)}function YS(t){return it(t).signOut()}const Vl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vl,"1"),this.storage.removeItem(Vl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS=1e3,XS=10;class Px extends Rx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ex(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);mS()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,XS):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},JS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Px.type="LOCAL";const ZS=Px;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx extends Rx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}kx.type="SESSION";const jx=kx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new mc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async d=>d(n.origin,i)),u=await eA(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const d=ff("",20);s.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(m),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(m),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return window}function nA(t){en().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(){return typeof en().WorkerGlobalScope<"u"&&typeof en().importScripts=="function"}async function rA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function iA(){return Dx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="firebaseLocalStorageDb",oA=1,Ll="firebaseLocalStorage",Mx="fbase_key";class Uo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function pc(t,e){return t.transaction([Ll],e?"readwrite":"readonly").objectStore(Ll)}function aA(){const t=indexedDB.deleteDatabase(Ox);return new Uo(t).toPromise()}function Bd(){const t=indexedDB.open(Ox,oA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ll,{keyPath:Mx})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ll)?e(r):(r.close(),await aA(),e(await Bd()))})})}async function Pg(t,e,n){const r=pc(t,!0).put({[Mx]:e,value:n});return new Uo(r).toPromise()}async function lA(t,e){const n=pc(t,!1).get(e),r=await new Uo(n).toPromise();return r===void 0?null:r.value}function kg(t,e){const n=pc(t,!0).delete(e);return new Uo(n).toPromise()}const cA=800,uA=3;class Vx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>uA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Dx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mc._getInstance(iA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await rA(),!this.activeServiceWorker)return;this.sender=new tA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||sA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bd();return await Pg(e,Vl,"1"),await kg(e,Vl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Pg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>lA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>kg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=pc(s,!1).getAll();return new Uo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Vx.type="LOCAL";const dA=Vx;new Vo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t,e){return e?vn(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf extends df{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Rs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Rs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function fA(t){return Ax(t.auth,new mf(t),t.bypassAuthState)}function mA(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),BS(n,new mf(t),t.bypassAuthState)}async function pA(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),US(n,new mf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fA;case"linkViaPopup":case"linkViaRedirect":return pA;case"reauthViaPopup":case"reauthViaRedirect":return mA;default:Ht(this.auth,"internal-error")}}resolve(e){Sn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA=new Vo(2e3,1e4);class ws extends Lx{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ws.currentPopupAction&&ws.currentPopupAction.cancel(),ws.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return K(e,this.auth,"internal-error"),e}async onExecution(){Sn(this.filter.length===1,"Popup operations only handle one event");const e=ff();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ws.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gA.get())};e()}}ws.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="pendingRedirect",Qa=new Map;class vA extends Lx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Qa.get(this.auth._key());if(!e){try{const r=await xA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Qa.set(this.auth._key(),e)}return this.bypassAuthState||Qa.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xA(t,e){const n=EA(e),r=wA(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function _A(t,e){Qa.set(t._key(),e)}function wA(t){return vn(t._redirectPersistence)}function EA(t){return Ka(yA,t.config.apiKey,t.name)}async function IA(t,e,n=!1){if(Yt(t.app))return Promise.reject(_n(t));const r=Yr(t),s=hA(r,e),o=await new vA(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=10*60*1e3;class bA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Fx(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Zt(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TA&&this.cachedEventUids.clear(),this.cachedEventUids.has(jg(e))}saveEventToCache(e){this.cachedEventUids.add(jg(e)),this.lastProcessedEventTime=Date.now()}}function jg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Fx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function NA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SA(t,e={}){return kn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CA=/^https?/;async function RA(t){if(t.config.emulator)return;const{authorizedDomains:e}=await SA(t);for(const n of e)try{if(PA(n))return}catch{}Ht(t,"unauthorized-domain")}function PA(t){const e=Ld(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!CA.test(n))return!1;if(AA.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=new Vo(3e4,6e4);function Dg(){const t=en().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jA(t){return new Promise((e,n)=>{var r,s,i;function o(){Dg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Dg(),n(Zt(t,"network-request-failed"))},timeout:kA.get()})}if(!((s=(r=en().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=en().gapi)===null||i===void 0)&&i.load)o();else{const c=IS("iframefcb");return en()[c]=()=>{gapi.load?o():n(Zt(t,"network-request-failed"))},Tx(`${ES()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Ya=null,e})}let Ya=null;function DA(t){return Ya=Ya||jA(t),Ya}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=new Vo(5e3,15e3),MA="__/auth/iframe",VA="emulator/auth/iframe",LA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UA(t){const e=t.config;K(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?lf(e,VA):`https://${t.config.authDomain}/${MA}`,r={apiKey:e.apiKey,appName:t.name,v:Zs},s=FA.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Mo(r).slice(1)}`}async function BA(t){const e=await DA(t),n=en().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:UA(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LA,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Zt(t,"network-request-failed"),c=en().setTimeout(()=>{i(o)},OA.get());function u(){en().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$A=500,WA=600,HA="_blank",qA="http://localhost";class Og{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GA(t,e,n,r=$A,s=WA){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},zA),{width:r.toString(),height:s.toString(),top:i,left:o}),d=st().toLowerCase();n&&(c=yx(d)?HA:n),px(d)&&(e=e||qA,u.scrollbars="yes");const m=Object.entries(u).reduce((g,[_,S])=>`${g}${_}=${S},`,"");if(fS(d)&&c!=="_self")return KA(e||"",c),new Og(null);const p=window.open(e||"",c,m);K(p,t,"popup-blocked");try{p.focus()}catch{}return new Og(p)}function KA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="__/auth/handler",YA="emulator/auth/handler",JA=encodeURIComponent("fac");async function Mg(t,e,n,r,s,i){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Zs,eventId:s};if(e instanceof Nx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Vb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries({}))o[m]=p}if(e instanceof Fo){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const u=await t._getAppCheckToken(),d=u?`#${JA}=${encodeURIComponent(u)}`:"";return`${XA(t)}?${Mo(c).slice(1)}${d}`}function XA({config:t}){return t.emulator?lf(t,YA):`https://${t.authDomain}/${QA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu="webStorageSupport";class ZA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jx,this._completeRedirectFn=IA,this._overrideRedirectResult=_A}async _openPopup(e,n,r,s){var i;Sn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Mg(e,n,r,Ld(),s);return GA(e,o,ff())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Mg(e,n,r,Ld(),s);return nA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Sn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await BA(e),r=new bA(e);return n.register("authEvent",s=>(K(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Pu,{type:Pu},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Pu];o!==void 0&&n(!!o),Ht(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=RA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ex()||gx()||uf()}}const e1=ZA;var Vg="@firebase/auth",Lg="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function r1(t){Fs(new zr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;K(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ix(t)},d=new xS(r,s,i,u);return AS(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Fs(new zr("auth-internal",e=>{const n=Yr(e.getProvider("auth").getImmediate());return(r=>new t1(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ar(Vg,Lg,n1(t)),ar(Vg,Lg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1=5*60,i1=Z0("authIdTokenMaxAge")||s1;let Fg=null;const o1=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>i1)return;const s=n==null?void 0:n.token;Fg!==s&&(Fg=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function a1(t=rx()){const e=sf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=SS(t,{popupRedirectResolver:e1,persistence:[dA,ZS,jx]}),r=Z0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=o1(i.toString());KS(n,o,()=>o(n.currentUser)),GS(n,c=>o(c))}}const s=J0("auth");return s&&CS(n,`http://${s}`),n}function l1(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}_S({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Zt("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",l1().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});r1("Browser");var c1="firebase",u1="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ar(c1,u1,"app");var Ug=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mr,Ux;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,x){function w(){}w.prototype=x.prototype,I.D=x.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(b,C,k){for(var N=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)N[vt-2]=arguments[vt];return x.prototype[C].apply(b,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,x,w){w||(w=0);var b=Array(16);if(typeof x=="string")for(var C=0;16>C;++C)b[C]=x.charCodeAt(w++)|x.charCodeAt(w++)<<8|x.charCodeAt(w++)<<16|x.charCodeAt(w++)<<24;else for(C=0;16>C;++C)b[C]=x[w++]|x[w++]<<8|x[w++]<<16|x[w++]<<24;x=I.g[0],w=I.g[1],C=I.g[2];var k=I.g[3],N=x+(k^w&(C^k))+b[0]+3614090360&4294967295;x=w+(N<<7&4294967295|N>>>25),N=k+(C^x&(w^C))+b[1]+3905402710&4294967295,k=x+(N<<12&4294967295|N>>>20),N=C+(w^k&(x^w))+b[2]+606105819&4294967295,C=k+(N<<17&4294967295|N>>>15),N=w+(x^C&(k^x))+b[3]+3250441966&4294967295,w=C+(N<<22&4294967295|N>>>10),N=x+(k^w&(C^k))+b[4]+4118548399&4294967295,x=w+(N<<7&4294967295|N>>>25),N=k+(C^x&(w^C))+b[5]+1200080426&4294967295,k=x+(N<<12&4294967295|N>>>20),N=C+(w^k&(x^w))+b[6]+2821735955&4294967295,C=k+(N<<17&4294967295|N>>>15),N=w+(x^C&(k^x))+b[7]+4249261313&4294967295,w=C+(N<<22&4294967295|N>>>10),N=x+(k^w&(C^k))+b[8]+1770035416&4294967295,x=w+(N<<7&4294967295|N>>>25),N=k+(C^x&(w^C))+b[9]+2336552879&4294967295,k=x+(N<<12&4294967295|N>>>20),N=C+(w^k&(x^w))+b[10]+4294925233&4294967295,C=k+(N<<17&4294967295|N>>>15),N=w+(x^C&(k^x))+b[11]+2304563134&4294967295,w=C+(N<<22&4294967295|N>>>10),N=x+(k^w&(C^k))+b[12]+1804603682&4294967295,x=w+(N<<7&4294967295|N>>>25),N=k+(C^x&(w^C))+b[13]+4254626195&4294967295,k=x+(N<<12&4294967295|N>>>20),N=C+(w^k&(x^w))+b[14]+2792965006&4294967295,C=k+(N<<17&4294967295|N>>>15),N=w+(x^C&(k^x))+b[15]+1236535329&4294967295,w=C+(N<<22&4294967295|N>>>10),N=x+(C^k&(w^C))+b[1]+4129170786&4294967295,x=w+(N<<5&4294967295|N>>>27),N=k+(w^C&(x^w))+b[6]+3225465664&4294967295,k=x+(N<<9&4294967295|N>>>23),N=C+(x^w&(k^x))+b[11]+643717713&4294967295,C=k+(N<<14&4294967295|N>>>18),N=w+(k^x&(C^k))+b[0]+3921069994&4294967295,w=C+(N<<20&4294967295|N>>>12),N=x+(C^k&(w^C))+b[5]+3593408605&4294967295,x=w+(N<<5&4294967295|N>>>27),N=k+(w^C&(x^w))+b[10]+38016083&4294967295,k=x+(N<<9&4294967295|N>>>23),N=C+(x^w&(k^x))+b[15]+3634488961&4294967295,C=k+(N<<14&4294967295|N>>>18),N=w+(k^x&(C^k))+b[4]+3889429448&4294967295,w=C+(N<<20&4294967295|N>>>12),N=x+(C^k&(w^C))+b[9]+568446438&4294967295,x=w+(N<<5&4294967295|N>>>27),N=k+(w^C&(x^w))+b[14]+3275163606&4294967295,k=x+(N<<9&4294967295|N>>>23),N=C+(x^w&(k^x))+b[3]+4107603335&4294967295,C=k+(N<<14&4294967295|N>>>18),N=w+(k^x&(C^k))+b[8]+1163531501&4294967295,w=C+(N<<20&4294967295|N>>>12),N=x+(C^k&(w^C))+b[13]+2850285829&4294967295,x=w+(N<<5&4294967295|N>>>27),N=k+(w^C&(x^w))+b[2]+4243563512&4294967295,k=x+(N<<9&4294967295|N>>>23),N=C+(x^w&(k^x))+b[7]+1735328473&4294967295,C=k+(N<<14&4294967295|N>>>18),N=w+(k^x&(C^k))+b[12]+2368359562&4294967295,w=C+(N<<20&4294967295|N>>>12),N=x+(w^C^k)+b[5]+4294588738&4294967295,x=w+(N<<4&4294967295|N>>>28),N=k+(x^w^C)+b[8]+2272392833&4294967295,k=x+(N<<11&4294967295|N>>>21),N=C+(k^x^w)+b[11]+1839030562&4294967295,C=k+(N<<16&4294967295|N>>>16),N=w+(C^k^x)+b[14]+4259657740&4294967295,w=C+(N<<23&4294967295|N>>>9),N=x+(w^C^k)+b[1]+2763975236&4294967295,x=w+(N<<4&4294967295|N>>>28),N=k+(x^w^C)+b[4]+1272893353&4294967295,k=x+(N<<11&4294967295|N>>>21),N=C+(k^x^w)+b[7]+4139469664&4294967295,C=k+(N<<16&4294967295|N>>>16),N=w+(C^k^x)+b[10]+3200236656&4294967295,w=C+(N<<23&4294967295|N>>>9),N=x+(w^C^k)+b[13]+681279174&4294967295,x=w+(N<<4&4294967295|N>>>28),N=k+(x^w^C)+b[0]+3936430074&4294967295,k=x+(N<<11&4294967295|N>>>21),N=C+(k^x^w)+b[3]+3572445317&4294967295,C=k+(N<<16&4294967295|N>>>16),N=w+(C^k^x)+b[6]+76029189&4294967295,w=C+(N<<23&4294967295|N>>>9),N=x+(w^C^k)+b[9]+3654602809&4294967295,x=w+(N<<4&4294967295|N>>>28),N=k+(x^w^C)+b[12]+3873151461&4294967295,k=x+(N<<11&4294967295|N>>>21),N=C+(k^x^w)+b[15]+530742520&4294967295,C=k+(N<<16&4294967295|N>>>16),N=w+(C^k^x)+b[2]+3299628645&4294967295,w=C+(N<<23&4294967295|N>>>9),N=x+(C^(w|~k))+b[0]+4096336452&4294967295,x=w+(N<<6&4294967295|N>>>26),N=k+(w^(x|~C))+b[7]+1126891415&4294967295,k=x+(N<<10&4294967295|N>>>22),N=C+(x^(k|~w))+b[14]+2878612391&4294967295,C=k+(N<<15&4294967295|N>>>17),N=w+(k^(C|~x))+b[5]+4237533241&4294967295,w=C+(N<<21&4294967295|N>>>11),N=x+(C^(w|~k))+b[12]+1700485571&4294967295,x=w+(N<<6&4294967295|N>>>26),N=k+(w^(x|~C))+b[3]+2399980690&4294967295,k=x+(N<<10&4294967295|N>>>22),N=C+(x^(k|~w))+b[10]+4293915773&4294967295,C=k+(N<<15&4294967295|N>>>17),N=w+(k^(C|~x))+b[1]+2240044497&4294967295,w=C+(N<<21&4294967295|N>>>11),N=x+(C^(w|~k))+b[8]+1873313359&4294967295,x=w+(N<<6&4294967295|N>>>26),N=k+(w^(x|~C))+b[15]+4264355552&4294967295,k=x+(N<<10&4294967295|N>>>22),N=C+(x^(k|~w))+b[6]+2734768916&4294967295,C=k+(N<<15&4294967295|N>>>17),N=w+(k^(C|~x))+b[13]+1309151649&4294967295,w=C+(N<<21&4294967295|N>>>11),N=x+(C^(w|~k))+b[4]+4149444226&4294967295,x=w+(N<<6&4294967295|N>>>26),N=k+(w^(x|~C))+b[11]+3174756917&4294967295,k=x+(N<<10&4294967295|N>>>22),N=C+(x^(k|~w))+b[2]+718787259&4294967295,C=k+(N<<15&4294967295|N>>>17),N=w+(k^(C|~x))+b[9]+3951481745&4294967295,I.g[0]=I.g[0]+x&4294967295,I.g[1]=I.g[1]+(C+(N<<21&4294967295|N>>>11))&4294967295,I.g[2]=I.g[2]+C&4294967295,I.g[3]=I.g[3]+k&4294967295}r.prototype.u=function(I,x){x===void 0&&(x=I.length);for(var w=x-this.blockSize,b=this.B,C=this.h,k=0;k<x;){if(C==0)for(;k<=w;)s(this,I,k),k+=this.blockSize;if(typeof I=="string"){for(;k<x;)if(b[C++]=I.charCodeAt(k++),C==this.blockSize){s(this,b),C=0;break}}else for(;k<x;)if(b[C++]=I[k++],C==this.blockSize){s(this,b),C=0;break}}this.h=C,this.o+=x},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var x=1;x<I.length-8;++x)I[x]=0;var w=8*this.o;for(x=I.length-8;x<I.length;++x)I[x]=w&255,w/=256;for(this.u(I),I=Array(16),x=w=0;4>x;++x)for(var b=0;32>b;b+=8)I[w++]=this.g[x]>>>b&255;return I};function i(I,x){var w=c;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=x(I)}function o(I,x){this.h=x;for(var w=[],b=!0,C=I.length-1;0<=C;C--){var k=I[C]|0;b&&k==x||(w[C]=k,b=!1)}this.g=w}var c={};function u(I){return-128<=I&&128>I?i(I,function(x){return new o([x|0],0>x?-1:0)}):new o([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return P(d(-I));for(var x=[],w=1,b=0;I>=w;b++)x[b]=I/w|0,w*=4294967296;return new o(x,0)}function m(I,x){if(I.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(I.charAt(0)=="-")return P(m(I.substring(1),x));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=d(Math.pow(x,8)),b=p,C=0;C<I.length;C+=8){var k=Math.min(8,I.length-C),N=parseInt(I.substring(C,C+k),x);8>k?(k=d(Math.pow(x,k)),b=b.j(k).add(d(N))):(b=b.j(w),b=b.add(d(N)))}return b}var p=u(0),g=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(A(this))return-P(this).m();for(var I=0,x=1,w=0;w<this.g.length;w++){var b=this.i(w);I+=(0<=b?b:4294967296+b)*x,x*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(S(this))return"0";if(A(this))return"-"+P(this).toString(I);for(var x=d(Math.pow(I,6)),w=this,b="";;){var C=R(w,x).g;w=T(w,C.j(x));var k=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=C,S(w))return k+b;for(;6>k.length;)k="0"+k;b=k+b}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function S(I){if(I.h!=0)return!1;for(var x=0;x<I.g.length;x++)if(I.g[x]!=0)return!1;return!0}function A(I){return I.h==-1}t.l=function(I){return I=T(this,I),A(I)?-1:S(I)?0:1};function P(I){for(var x=I.g.length,w=[],b=0;b<x;b++)w[b]=~I.g[b];return new o(w,~I.h).add(g)}t.abs=function(){return A(this)?P(this):this},t.add=function(I){for(var x=Math.max(this.g.length,I.g.length),w=[],b=0,C=0;C<=x;C++){var k=b+(this.i(C)&65535)+(I.i(C)&65535),N=(k>>>16)+(this.i(C)>>>16)+(I.i(C)>>>16);b=N>>>16,k&=65535,N&=65535,w[C]=N<<16|k}return new o(w,w[w.length-1]&-2147483648?-1:0)};function T(I,x){return I.add(P(x))}t.j=function(I){if(S(this)||S(I))return p;if(A(this))return A(I)?P(this).j(P(I)):P(P(this).j(I));if(A(I))return P(this.j(P(I)));if(0>this.l(_)&&0>I.l(_))return d(this.m()*I.m());for(var x=this.g.length+I.g.length,w=[],b=0;b<2*x;b++)w[b]=0;for(b=0;b<this.g.length;b++)for(var C=0;C<I.g.length;C++){var k=this.i(b)>>>16,N=this.i(b)&65535,vt=I.i(C)>>>16,sn=I.i(C)&65535;w[2*b+2*C]+=N*sn,v(w,2*b+2*C),w[2*b+2*C+1]+=k*sn,v(w,2*b+2*C+1),w[2*b+2*C+1]+=N*vt,v(w,2*b+2*C+1),w[2*b+2*C+2]+=k*vt,v(w,2*b+2*C+2)}for(b=0;b<x;b++)w[b]=w[2*b+1]<<16|w[2*b];for(b=x;b<2*x;b++)w[b]=0;return new o(w,0)};function v(I,x){for(;(I[x]&65535)!=I[x];)I[x+1]+=I[x]>>>16,I[x]&=65535,x++}function E(I,x){this.g=I,this.h=x}function R(I,x){if(S(x))throw Error("division by zero");if(S(I))return new E(p,p);if(A(I))return x=R(P(I),x),new E(P(x.g),P(x.h));if(A(x))return x=R(I,P(x)),new E(P(x.g),x.h);if(30<I.g.length){if(A(I)||A(x))throw Error("slowDivide_ only works with positive integers.");for(var w=g,b=x;0>=b.l(I);)w=V(w),b=V(b);var C=U(w,1),k=U(b,1);for(b=U(b,2),w=U(w,2);!S(b);){var N=k.add(b);0>=N.l(I)&&(C=C.add(w),k=N),b=U(b,1),w=U(w,1)}return x=T(I,C.j(x)),new E(C,x)}for(C=p;0<=I.l(x);){for(w=Math.max(1,Math.floor(I.m()/x.m())),b=Math.ceil(Math.log(w)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),k=d(w),N=k.j(x);A(N)||0<N.l(I);)w-=b,k=d(w),N=k.j(x);S(k)&&(k=g),C=C.add(k),I=T(I,N)}return new E(C,I)}t.A=function(I){return R(this,I).h},t.and=function(I){for(var x=Math.max(this.g.length,I.g.length),w=[],b=0;b<x;b++)w[b]=this.i(b)&I.i(b);return new o(w,this.h&I.h)},t.or=function(I){for(var x=Math.max(this.g.length,I.g.length),w=[],b=0;b<x;b++)w[b]=this.i(b)|I.i(b);return new o(w,this.h|I.h)},t.xor=function(I){for(var x=Math.max(this.g.length,I.g.length),w=[],b=0;b<x;b++)w[b]=this.i(b)^I.i(b);return new o(w,this.h^I.h)};function V(I){for(var x=I.g.length+1,w=[],b=0;b<x;b++)w[b]=I.i(b)<<1|I.i(b-1)>>>31;return new o(w,I.h)}function U(I,x){var w=x>>5;x%=32;for(var b=I.g.length-w,C=[],k=0;k<b;k++)C[k]=0<x?I.i(k+w)>>>x|I.i(k+w+1)<<32-x:I.i(k+w);return new o(C,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Ux=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,Mr=o}).apply(typeof Ug<"u"?Ug:typeof self<"u"?self:typeof window<"u"?window:{});var Ca=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bx,Mi,zx,Ja,zd,$x,Wx,Hx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,f){return a==Array.prototype||a==Object.prototype||(a[h]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ca=="object"&&Ca];for(var h=0;h<a.length;++h){var f=a[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var f=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var j=a[y];if(!(j in f))break e;f=f[j]}a=a[a.length-1],y=f[a],h=h(y),h!=y&&h!=null&&e(f,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var f=0,y=!1,j={next:function(){if(!y&&f<a.length){var D=f++;return{value:h(D,a[D]),done:!1}}return y=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function m(a,h,f){return a.call.apply(a.bind,arguments)}function p(a,h,f){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,y),a.apply(h,j)}}return function(){return a.apply(h,arguments)}}function g(a,h,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:p,g.apply(null,arguments)}function _(a,h){var f=Array.prototype.slice.call(arguments,1);return function(){var y=f.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function S(a,h){function f(){}f.prototype=h.prototype,a.aa=h.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(y,j,D){for(var B=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)B[ue-2]=arguments[ue];return h.prototype[j].apply(y,B)}}function A(a){const h=a.length;if(0<h){const f=Array(h);for(let y=0;y<h;y++)f[y]=a[y];return f}return[]}function P(a,h){for(let f=1;f<arguments.length;f++){const y=arguments[f];if(u(y)){const j=a.length||0,D=y.length||0;a.length=j+D;for(let B=0;B<D;B++)a[j+B]=y[B]}else a.push(y)}}class T{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function v(a){return/^[\s\xa0]*$/.test(a)}function E(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function R(a){return R[" "](a),a}R[" "]=function(){};var V=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function U(a,h,f){for(const y in a)h.call(f,a[y],y,a)}function I(a,h){for(const f in a)h.call(void 0,a[f],f,a)}function x(a){const h={};for(const f in a)h[f]=a[f];return h}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(a,h){let f,y;for(let j=1;j<arguments.length;j++){y=arguments[j];for(f in y)a[f]=y[f];for(let D=0;D<w.length;D++)f=w[D],Object.prototype.hasOwnProperty.call(y,f)&&(a[f]=y[f])}}function C(a){var h=1;a=a.split(":");const f=[];for(;0<h&&a.length;)f.push(a.shift()),h--;return a.length&&f.push(a.join(":")),f}function k(a){c.setTimeout(()=>{throw a},0)}function N(){var a=Y;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class vt{constructor(){this.h=this.g=null}add(h,f){const y=sn.get();y.set(h,f),this.h?this.h.next=y:this.g=y,this.h=y}}var sn=new T(()=>new ye,a=>a.reset());class ye{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Me,z=!1,Y=new vt,Z=()=>{const a=c.Promise.resolve(void 0);Me=()=>{a.then(ve)}};var ve=()=>{for(var a;a=N();){try{a.h.call(a.g)}catch(f){k(f)}var h=sn;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}z=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ne(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}Ne.prototype.h=function(){this.defaultPrevented=!0};var on=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};c.addEventListener("test",f,h),c.removeEventListener("test",f,h)}catch{}return a}();function an(a,h){if(Ne.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(V){e:{try{R(h.nodeName);var j=!0;break e}catch{}j=!1}j||(h=null)}}else f=="mouseover"?h=a.fromElement:f=="mouseout"&&(h=a.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:ln[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&an.aa.h.call(this)}}S(an,Ne);var ln={2:"touch",3:"pen",4:"mouse"};an.prototype.h=function(){an.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var cn="closure_listenable_"+(1e6*Math.random()|0),aw=0;function lw(a,h,f,y,j){this.listener=a,this.proxy=null,this.src=h,this.type=f,this.capture=!!y,this.ha=j,this.key=++aw,this.da=this.fa=!1}function Go(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ko(a){this.src=a,this.g={},this.h=0}Ko.prototype.add=function(a,h,f,y,j){var D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);var B=Rc(a,h,y,j);return-1<B?(h=a[B],f||(h.fa=!1)):(h=new lw(h,this.src,D,!!y,j),h.fa=f,a.push(h)),h};function Cc(a,h){var f=h.type;if(f in a.g){var y=a.g[f],j=Array.prototype.indexOf.call(y,h,void 0),D;(D=0<=j)&&Array.prototype.splice.call(y,j,1),D&&(Go(h),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Rc(a,h,f,y){for(var j=0;j<a.length;++j){var D=a[j];if(!D.da&&D.listener==h&&D.capture==!!f&&D.ha==y)return j}return-1}var Pc="closure_lm_"+(1e6*Math.random()|0),kc={};function Kf(a,h,f,y,j){if(Array.isArray(h)){for(var D=0;D<h.length;D++)Kf(a,h[D],f,y,j);return null}return f=Jf(f),a&&a[cn]?a.K(h,f,d(y)?!!y.capture:!1,j):cw(a,h,f,!1,y,j)}function cw(a,h,f,y,j,D){if(!h)throw Error("Invalid event type");var B=d(j)?!!j.capture:!!j,ue=Dc(a);if(ue||(a[Pc]=ue=new Ko(a)),f=ue.add(h,f,y,B,D),f.proxy)return f;if(y=uw(),f.proxy=y,y.src=a,y.listener=f,a.addEventListener)on||(j=B),j===void 0&&(j=!1),a.addEventListener(h.toString(),y,j);else if(a.attachEvent)a.attachEvent(Yf(h.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return f}function uw(){function a(f){return h.call(a.src,a.listener,f)}const h=dw;return a}function Qf(a,h,f,y,j){if(Array.isArray(h))for(var D=0;D<h.length;D++)Qf(a,h[D],f,y,j);else y=d(y)?!!y.capture:!!y,f=Jf(f),a&&a[cn]?(a=a.i,h=String(h).toString(),h in a.g&&(D=a.g[h],f=Rc(D,f,y,j),-1<f&&(Go(D[f]),Array.prototype.splice.call(D,f,1),D.length==0&&(delete a.g[h],a.h--)))):a&&(a=Dc(a))&&(h=a.g[h.toString()],a=-1,h&&(a=Rc(h,f,y,j)),(f=-1<a?h[a]:null)&&jc(f))}function jc(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[cn])Cc(h.i,a);else{var f=a.type,y=a.proxy;h.removeEventListener?h.removeEventListener(f,y,a.capture):h.detachEvent?h.detachEvent(Yf(f),y):h.addListener&&h.removeListener&&h.removeListener(y),(f=Dc(h))?(Cc(f,a),f.h==0&&(f.src=null,h[Pc]=null)):Go(a)}}}function Yf(a){return a in kc?kc[a]:kc[a]="on"+a}function dw(a,h){if(a.da)a=!0;else{h=new an(h,this);var f=a.listener,y=a.ha||a.src;a.fa&&jc(a),a=f.call(y,h)}return a}function Dc(a){return a=a[Pc],a instanceof Ko?a:null}var Oc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jf(a){return typeof a=="function"?a:(a[Oc]||(a[Oc]=function(h){return a.handleEvent(h)}),a[Oc])}function Ke(){ce.call(this),this.i=new Ko(this),this.M=this,this.F=null}S(Ke,ce),Ke.prototype[cn]=!0,Ke.prototype.removeEventListener=function(a,h,f,y){Qf(this,a,h,f,y)};function ot(a,h){var f,y=a.F;if(y)for(f=[];y;y=y.F)f.push(y);if(a=a.M,y=h.type||h,typeof h=="string")h=new Ne(h,a);else if(h instanceof Ne)h.target=h.target||a;else{var j=h;h=new Ne(y,a),b(h,j)}if(j=!0,f)for(var D=f.length-1;0<=D;D--){var B=h.g=f[D];j=Qo(B,y,!0,h)&&j}if(B=h.g=a,j=Qo(B,y,!0,h)&&j,j=Qo(B,y,!1,h)&&j,f)for(D=0;D<f.length;D++)B=h.g=f[D],j=Qo(B,y,!1,h)&&j}Ke.prototype.N=function(){if(Ke.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var f=a.g[h],y=0;y<f.length;y++)Go(f[y]);delete a.g[h],a.h--}}this.F=null},Ke.prototype.K=function(a,h,f,y){return this.i.add(String(a),h,!1,f,y)},Ke.prototype.L=function(a,h,f,y){return this.i.add(String(a),h,!0,f,y)};function Qo(a,h,f,y){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var j=!0,D=0;D<h.length;++D){var B=h[D];if(B&&!B.da&&B.capture==f){var ue=B.listener,Ue=B.ha||B.src;B.fa&&Cc(a.i,B),j=ue.call(Ue,y)!==!1&&j}}return j&&!y.defaultPrevented}function Xf(a,h,f){if(typeof a=="function")f&&(a=g(a,f));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(a,h||0)}function Zf(a){a.g=Xf(()=>{a.g=null,a.i&&(a.i=!1,Zf(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class hw extends ce{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Zf(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oi(a){ce.call(this),this.h=a,this.g={}}S(oi,ce);var em=[];function tm(a){U(a.g,function(h,f){this.g.hasOwnProperty(f)&&jc(h)},a),a.g={}}oi.prototype.N=function(){oi.aa.N.call(this),tm(this)},oi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mc=c.JSON.stringify,fw=c.JSON.parse,mw=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Vc(){}Vc.prototype.h=null;function nm(a){return a.h||(a.h=a.i())}function rm(){}var ai={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Lc(){Ne.call(this,"d")}S(Lc,Ne);function Fc(){Ne.call(this,"c")}S(Fc,Ne);var Ir={},sm=null;function Yo(){return sm=sm||new Ke}Ir.La="serverreachability";function im(a){Ne.call(this,Ir.La,a)}S(im,Ne);function li(a){const h=Yo();ot(h,new im(h))}Ir.STAT_EVENT="statevent";function om(a,h){Ne.call(this,Ir.STAT_EVENT,a),this.stat=h}S(om,Ne);function at(a){const h=Yo();ot(h,new om(h,a))}Ir.Ma="timingevent";function am(a,h){Ne.call(this,Ir.Ma,a),this.size=h}S(am,Ne);function ci(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},h)}function ui(){this.g=!0}ui.prototype.xa=function(){this.g=!1};function pw(a,h,f,y,j,D){a.info(function(){if(a.g)if(D)for(var B="",ue=D.split("&"),Ue=0;Ue<ue.length;Ue++){var ie=ue[Ue].split("=");if(1<ie.length){var Qe=ie[0];ie=ie[1];var Ye=Qe.split("_");B=2<=Ye.length&&Ye[1]=="type"?B+(Qe+"="+ie+"&"):B+(Qe+"=redacted&")}}else B=null;else B=D;return"XMLHTTP REQ ("+y+") [attempt "+j+"]: "+h+`
`+f+`
`+B})}function gw(a,h,f,y,j,D,B){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+j+"]: "+h+`
`+f+`
`+D+" "+B})}function Zr(a,h,f,y){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+vw(a,f)+(y?" "+y:"")})}function yw(a,h){a.info(function(){return"TIMEOUT: "+h})}ui.prototype.info=function(){};function vw(a,h){if(!a.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var y=f[a];if(!(2>y.length)){var j=y[1];if(Array.isArray(j)&&!(1>j.length)){var D=j[0];if(D!="noop"&&D!="stop"&&D!="close")for(var B=1;B<j.length;B++)j[B]=""}}}}return Mc(f)}catch{return h}}var Jo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},lm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Uc;function Xo(){}S(Xo,Vc),Xo.prototype.g=function(){return new XMLHttpRequest},Xo.prototype.i=function(){return{}},Uc=new Xo;function jn(a,h,f,y){this.j=a,this.i=h,this.l=f,this.R=y||1,this.U=new oi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cm}function cm(){this.i=null,this.g="",this.h=!1}var um={},Bc={};function zc(a,h,f){a.L=1,a.v=na(un(h)),a.m=f,a.P=!0,dm(a,null)}function dm(a,h){a.F=Date.now(),Zo(a),a.A=un(a.v);var f=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),bm(f.i,"t",y),a.C=0,f=a.j.J,a.h=new cm,a.g=$m(a.j,f?h:null,!a.m),0<a.O&&(a.M=new hw(g(a.Y,a,a.g),a.O)),h=a.U,f=a.g,y=a.ca;var j="readystatechange";Array.isArray(j)||(j&&(em[0]=j.toString()),j=em);for(var D=0;D<j.length;D++){var B=Kf(f,j[D],y||h.handleEvent,!1,h.h||h);if(!B)break;h.g[B.key]=B}h=a.H?x(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),li(),pw(a.i,a.u,a.A,a.l,a.R,a.m)}jn.prototype.ca=function(a){a=a.target;const h=this.M;h&&dn(a)==3?h.j():this.Y(a)},jn.prototype.Y=function(a){try{if(a==this.g)e:{const Ye=dn(this.g);var h=this.g.Ba();const ns=this.g.Z();if(!(3>Ye)&&(Ye!=3||this.g&&(this.h.h||this.g.oa()||km(this.g)))){this.J||Ye!=4||h==7||(h==8||0>=ns?li(3):li(2)),$c(this);var f=this.g.Z();this.X=f;t:if(hm(this)){var y=km(this.g);a="";var j=y.length,D=dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Tr(this),di(this);var B="";break t}this.h.i=new c.TextDecoder}for(h=0;h<j;h++)this.h.h=!0,a+=this.h.i.decode(y[h],{stream:!(D&&h==j-1)});y.length=0,this.h.g+=a,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=f==200,gw(this.i,this.u,this.A,this.l,this.R,Ye,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ue,Ue=this.g;if((ue=Ue.g?Ue.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(ue)){var ie=ue;break t}}ie=null}if(f=ie)Zr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wc(this,f);else{this.o=!1,this.s=3,at(12),Tr(this),di(this);break e}}if(this.P){f=!0;let Mt;for(;!this.J&&this.C<B.length;)if(Mt=xw(this,B),Mt==Bc){Ye==4&&(this.s=4,at(14),f=!1),Zr(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==um){this.s=4,at(15),Zr(this.i,this.l,B,"[Invalid Chunk]"),f=!1;break}else Zr(this.i,this.l,Mt,null),Wc(this,Mt);if(hm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ye!=4||B.length!=0||this.h.h||(this.s=1,at(16),f=!1),this.o=this.o&&f,!f)Zr(this.i,this.l,B,"[Invalid Chunked Response]"),Tr(this),di(this);else if(0<B.length&&!this.W){this.W=!0;var Qe=this.j;Qe.g==this&&Qe.ba&&!Qe.M&&(Qe.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Yc(Qe),Qe.M=!0,at(11))}}else Zr(this.i,this.l,B,null),Wc(this,B);Ye==4&&Tr(this),this.o&&!this.J&&(Ye==4?Fm(this.j,this):(this.o=!1,Zo(this)))}else Mw(this.g),f==400&&0<B.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),Tr(this),di(this)}}}catch{}finally{}};function hm(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function xw(a,h){var f=a.C,y=h.indexOf(`
`,f);return y==-1?Bc:(f=Number(h.substring(f,y)),isNaN(f)?um:(y+=1,y+f>h.length?Bc:(h=h.slice(y,y+f),a.C=y+f,h)))}jn.prototype.cancel=function(){this.J=!0,Tr(this)};function Zo(a){a.S=Date.now()+a.I,fm(a,a.I)}function fm(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=ci(g(a.ba,a),h)}function $c(a){a.B&&(c.clearTimeout(a.B),a.B=null)}jn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(yw(this.i,this.A),this.L!=2&&(li(),at(17)),Tr(this),this.s=2,di(this)):fm(this,this.S-a)};function di(a){a.j.G==0||a.J||Fm(a.j,a)}function Tr(a){$c(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,tm(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Wc(a,h){try{var f=a.j;if(f.G!=0&&(f.g==a||Hc(f.h,a))){if(!a.K&&Hc(f.h,a)&&f.G==3){try{var y=f.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var j=y;if(j[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)la(f),oa(f);else break e;Qc(f),at(18)}}else f.za=j[1],0<f.za-f.T&&37500>j[2]&&f.F&&f.v==0&&!f.C&&(f.C=ci(g(f.Za,f),6e3));if(1>=gm(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Nr(f,11)}else if((a.K||f.g==a)&&la(f),!v(h))for(j=f.Da.g.parse(h),h=0;h<j.length;h++){let ie=j[h];if(f.T=ie[0],ie=ie[1],f.G==2)if(ie[0]=="c"){f.K=ie[1],f.ia=ie[2];const Qe=ie[3];Qe!=null&&(f.la=Qe,f.j.info("VER="+f.la));const Ye=ie[4];Ye!=null&&(f.Aa=Ye,f.j.info("SVER="+f.Aa));const ns=ie[5];ns!=null&&typeof ns=="number"&&0<ns&&(y=1.5*ns,f.L=y,f.j.info("backChannelRequestTimeoutMs_="+y)),y=f;const Mt=a.g;if(Mt){const ua=Mt.g?Mt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ua){var D=y.h;D.g||ua.indexOf("spdy")==-1&&ua.indexOf("quic")==-1&&ua.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(qc(D,D.h),D.h=null))}if(y.D){const Jc=Mt.g?Mt.g.getResponseHeader("X-HTTP-Session-Id"):null;Jc&&(y.ya=Jc,he(y.I,y.D,Jc))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),y=f;var B=a;if(y.qa=zm(y,y.J?y.ia:null,y.W),B.K){ym(y.h,B);var ue=B,Ue=y.L;Ue&&(ue.I=Ue),ue.B&&($c(ue),Zo(ue)),y.g=B}else Vm(y);0<f.i.length&&aa(f)}else ie[0]!="stop"&&ie[0]!="close"||Nr(f,7);else f.G==3&&(ie[0]=="stop"||ie[0]=="close"?ie[0]=="stop"?Nr(f,7):Kc(f):ie[0]!="noop"&&f.l&&f.l.ta(ie),f.v=0)}}li(4)}catch{}}var _w=class{constructor(a,h){this.g=a,this.map=h}};function mm(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function gm(a){return a.h?1:a.g?a.g.size:0}function Hc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function qc(a,h){a.g?a.g.add(h):a.h=h}function ym(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}mm.prototype.cancel=function(){if(this.i=vm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function vm(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const f of a.g.values())h=h.concat(f.D);return h}return A(a.i)}function ww(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],f=a.length,y=0;y<f;y++)h.push(a[y]);return h}h=[],f=0;for(y in a)h[f++]=a[y];return h}function Ew(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var f=0;f<a;f++)h.push(f);return h}h=[],f=0;for(const y in a)h[f++]=y;return h}}}function xm(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var f=Ew(a),y=ww(a),j=y.length,D=0;D<j;D++)h.call(void 0,y[D],f&&f[D],a)}var _m=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Iw(a,h){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var y=a[f].indexOf("="),j=null;if(0<=y){var D=a[f].substring(0,y);j=a[f].substring(y+1)}else D=a[f];h(D,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function br(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof br){this.h=a.h,ea(this,a.j),this.o=a.o,this.g=a.g,ta(this,a.s),this.l=a.l;var h=a.i,f=new mi;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),wm(this,f),this.m=a.m}else a&&(h=String(a).match(_m))?(this.h=!1,ea(this,h[1]||"",!0),this.o=hi(h[2]||""),this.g=hi(h[3]||"",!0),ta(this,h[4]),this.l=hi(h[5]||"",!0),wm(this,h[6]||"",!0),this.m=hi(h[7]||"")):(this.h=!1,this.i=new mi(null,this.h))}br.prototype.toString=function(){var a=[],h=this.j;h&&a.push(fi(h,Em,!0),":");var f=this.g;return(f||h=="file")&&(a.push("//"),(h=this.o)&&a.push(fi(h,Em,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(fi(f,f.charAt(0)=="/"?Nw:bw,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",fi(f,Aw)),a.join("")};function un(a){return new br(a)}function ea(a,h,f){a.j=f?hi(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function ta(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function wm(a,h,f){h instanceof mi?(a.i=h,Cw(a.i,a.h)):(f||(h=fi(h,Sw)),a.i=new mi(h,a.h))}function he(a,h,f){a.i.set(h,f)}function na(a){return he(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function hi(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function fi(a,h,f){return typeof a=="string"?(a=encodeURI(a).replace(h,Tw),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Tw(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Em=/[#\/\?@]/g,bw=/[#\?:]/g,Nw=/[#\?]/g,Sw=/[#\?@]/g,Aw=/#/g;function mi(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Dn(a){a.g||(a.g=new Map,a.h=0,a.i&&Iw(a.i,function(h,f){a.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=mi.prototype,t.add=function(a,h){Dn(this),this.i=null,a=es(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(h),this.h+=1,this};function Im(a,h){Dn(a),h=es(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Tm(a,h){return Dn(a),h=es(a,h),a.g.has(h)}t.forEach=function(a,h){Dn(this),this.g.forEach(function(f,y){f.forEach(function(j){a.call(h,j,y,this)},this)},this)},t.na=function(){Dn(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let y=0;y<h.length;y++){const j=a[y];for(let D=0;D<j.length;D++)f.push(h[y])}return f},t.V=function(a){Dn(this);let h=[];if(typeof a=="string")Tm(this,a)&&(h=h.concat(this.g.get(es(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)h=h.concat(a[f])}return h},t.set=function(a,h){return Dn(this),this.i=null,a=es(this,a),Tm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function bm(a,h,f){Im(a,h),0<f.length&&(a.i=null,a.g.set(es(a,h),A(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var y=h[f];const D=encodeURIComponent(String(y)),B=this.V(y);for(y=0;y<B.length;y++){var j=D;B[y]!==""&&(j+="="+encodeURIComponent(String(B[y]))),a.push(j)}}return this.i=a.join("&")};function es(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function Cw(a,h){h&&!a.j&&(Dn(a),a.i=null,a.g.forEach(function(f,y){var j=y.toLowerCase();y!=j&&(Im(this,y),bm(this,j,f))},a)),a.j=h}function Rw(a,h){const f=new ui;if(c.Image){const y=new Image;y.onload=_(On,f,"TestLoadImage: loaded",!0,h,y),y.onerror=_(On,f,"TestLoadImage: error",!1,h,y),y.onabort=_(On,f,"TestLoadImage: abort",!1,h,y),y.ontimeout=_(On,f,"TestLoadImage: timeout",!1,h,y),c.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else h(!1)}function Pw(a,h){const f=new ui,y=new AbortController,j=setTimeout(()=>{y.abort(),On(f,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:y.signal}).then(D=>{clearTimeout(j),D.ok?On(f,"TestPingServer: ok",!0,h):On(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(j),On(f,"TestPingServer: error",!1,h)})}function On(a,h,f,y,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),y(f)}catch{}}function kw(){this.g=new mw}function jw(a,h,f){const y=f||"";try{xm(a,function(j,D){let B=j;d(j)&&(B=Mc(j)),h.push(y+D+"="+encodeURIComponent(B))})}catch(j){throw h.push(y+"type="+encodeURIComponent("_badmap")),j}}function ra(a){this.l=a.Ub||null,this.j=a.eb||!1}S(ra,Vc),ra.prototype.g=function(){return new sa(this.l,this.j)},ra.prototype.i=function(a){return function(){return a}}({});function sa(a,h){Ke.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(sa,Ke),t=sa.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,gi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pi(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,gi(this)),this.g&&(this.readyState=3,gi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Nm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Nm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?pi(this):gi(this),this.readyState==3&&Nm(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,pi(this))},t.Qa=function(a){this.g&&(this.response=a,pi(this))},t.ga=function(){this.g&&pi(this)};function pi(a){a.readyState=4,a.l=null,a.j=null,a.v=null,gi(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=h.next();return a.join(`\r
`)};function gi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(sa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Sm(a){let h="";return U(a,function(f,y){h+=y,h+=":",h+=f,h+=`\r
`}),h}function Gc(a,h,f){e:{for(y in f){var y=!1;break e}y=!0}y||(f=Sm(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):he(a,h,f))}function Ie(a){Ke.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ie,Ke);var Dw=/^https?$/i,Ow=["POST","PUT"];t=Ie.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,f,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Uc.g(),this.v=this.o?nm(this.o):nm(Uc),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(D){Am(this,D);return}if(a=f||"",f=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var j in y)f.set(j,y[j]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const D of y.keys())f.set(D,y.get(D));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(f.keys()).find(D=>D.toLowerCase()=="content-type"),j=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Ow,h,void 0))||y||j||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,B]of f)this.g.setRequestHeader(D,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Pm(this),this.u=!0,this.g.send(a),this.u=!1}catch(D){Am(this,D)}};function Am(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Cm(a),ia(a)}function Cm(a){a.A||(a.A=!0,ot(a,"complete"),ot(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ot(this,"complete"),ot(this,"abort"),ia(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ia(this,!0)),Ie.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Rm(this):this.bb())},t.bb=function(){Rm(this)};function Rm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||dn(a)!=4||a.Z()!=2)){if(a.u&&dn(a)==4)Xf(a.Ea,0,a);else if(ot(a,"readystatechange"),dn(a)==4){a.h=!1;try{const B=a.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var y;if(y=B===0){var j=String(a.D).match(_m)[1]||null;!j&&c.self&&c.self.location&&(j=c.self.location.protocol.slice(0,-1)),y=!Dw.test(j?j.toLowerCase():"")}f=y}if(f)ot(a,"complete"),ot(a,"success");else{a.m=6;try{var D=2<dn(a)?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.Z()+"]",Cm(a)}}finally{ia(a)}}}}function ia(a,h){if(a.g){Pm(a);const f=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||ot(a,"ready");try{f.onreadystatechange=y}catch{}}}function Pm(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function dn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<dn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),fw(h)}};function km(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Mw(a){const h={};a=(a.g&&2<=dn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(v(a[y]))continue;var f=C(a[y]);const j=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const D=h[j]||[];h[j]=D,D.push(f)}I(h,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yi(a,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||h}function jm(a){this.Aa=0,this.i=[],this.j=new ui,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yi("baseRetryDelayMs",5e3,a),this.cb=yi("retryDelaySeedMs",1e4,a),this.Wa=yi("forwardChannelMaxRetries",2,a),this.wa=yi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new mm(a&&a.concurrentRequestLimit),this.Da=new kw,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=jm.prototype,t.la=8,t.G=1,t.connect=function(a,h,f,y){at(0),this.W=a,this.H=h||{},f&&y!==void 0&&(this.H.OSID=f,this.H.OAID=y),this.F=this.X,this.I=zm(this,null,this.W),aa(this)};function Kc(a){if(Dm(a),a.G==3){var h=a.U++,f=un(a.I);if(he(f,"SID",a.K),he(f,"RID",h),he(f,"TYPE","terminate"),vi(a,f),h=new jn(a,a.j,h),h.L=2,h.v=na(un(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=h.v,f=!0),f||(h.g=$m(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Zo(h)}Bm(a)}function oa(a){a.g&&(Yc(a),a.g.cancel(),a.g=null)}function Dm(a){oa(a),a.u&&(c.clearTimeout(a.u),a.u=null),la(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function aa(a){if(!pm(a.h)&&!a.s){a.s=!0;var h=a.Ga;Me||Z(),z||(Me(),z=!0),Y.add(h,a),a.B=0}}function Vw(a,h){return gm(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=ci(g(a.Ga,a,h),Um(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const j=new jn(this,this.j,a);let D=this.o;if(this.S&&(D?(D=x(D),b(D,this.S)):D=this.S),this.m!==null||this.O||(j.H=D,D=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var y=this.i[f];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=Mm(this,j,h),f=un(this.I),he(f,"RID",a),he(f,"CVER",22),this.D&&he(f,"X-HTTP-Session-Id",this.D),vi(this,f),D&&(this.O?h="headers="+encodeURIComponent(String(Sm(D)))+"&"+h:this.m&&Gc(f,this.m,D)),qc(this.h,j),this.Ua&&he(f,"TYPE","init"),this.P?(he(f,"$req",h),he(f,"SID","null"),j.T=!0,zc(j,f,null)):zc(j,f,h),this.G=2}}else this.G==3&&(a?Om(this,a):this.i.length==0||pm(this.h)||Om(this))};function Om(a,h){var f;h?f=h.l:f=a.U++;const y=un(a.I);he(y,"SID",a.K),he(y,"RID",f),he(y,"AID",a.T),vi(a,y),a.m&&a.o&&Gc(y,a.m,a.o),f=new jn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Mm(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),qc(a.h,f),zc(f,y,h)}function vi(a,h){a.H&&U(a.H,function(f,y){he(h,y,f)}),a.l&&xm({},function(f,y){he(h,y,f)})}function Mm(a,h,f){f=Math.min(a.i.length,f);var y=a.l?g(a.l.Na,a.l,a):null;e:{var j=a.i;let D=-1;for(;;){const B=["count="+f];D==-1?0<f?(D=j[0].g,B.push("ofs="+D)):D=0:B.push("ofs="+D);let ue=!0;for(let Ue=0;Ue<f;Ue++){let ie=j[Ue].g;const Qe=j[Ue].map;if(ie-=D,0>ie)D=Math.max(0,j[Ue].g-100),ue=!1;else try{jw(Qe,B,"req"+ie+"_")}catch{y&&y(Qe)}}if(ue){y=B.join("&");break e}}}return a=a.i.splice(0,f),h.D=a,y}function Vm(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;Me||Z(),z||(Me(),z=!0),Y.add(h,a),a.v=0}}function Qc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=ci(g(a.Fa,a),Um(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Lm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=ci(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),oa(this),Lm(this))};function Yc(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Lm(a){a.g=new jn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=un(a.qa);he(h,"RID","rpc"),he(h,"SID",a.K),he(h,"AID",a.T),he(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&he(h,"TO",a.ja),he(h,"TYPE","xmlhttp"),vi(a,h),a.m&&a.o&&Gc(h,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=na(un(h)),f.m=null,f.P=!0,dm(f,a)}t.Za=function(){this.C!=null&&(this.C=null,oa(this),Qc(this),at(19))};function la(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Fm(a,h){var f=null;if(a.g==h){la(a),Yc(a),a.g=null;var y=2}else if(Hc(a.h,h))f=h.D,ym(a.h,h),y=1;else return;if(a.G!=0){if(h.o)if(y==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var j=a.B;y=Yo(),ot(y,new am(y,f)),aa(a)}else Vm(a);else if(j=h.s,j==3||j==0&&0<h.X||!(y==1&&Vw(a,h)||y==2&&Qc(a)))switch(f&&0<f.length&&(h=a.h,h.i=h.i.concat(f)),j){case 1:Nr(a,5);break;case 4:Nr(a,10);break;case 3:Nr(a,6);break;default:Nr(a,2)}}}function Um(a,h){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*h}function Nr(a,h){if(a.j.info("Error code "+h),h==2){var f=g(a.fb,a),y=a.Xa;const j=!y;y=new br(y||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ea(y,"https"),na(y),j?Rw(y.toString(),f):Pw(y.toString(),f)}else at(2);a.G=0,a.l&&a.l.sa(h),Bm(a),Dm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function Bm(a){if(a.G=0,a.ka=[],a.l){const h=vm(a.h);(h.length!=0||a.i.length!=0)&&(P(a.ka,h),P(a.ka,a.i),a.h.i.length=0,A(a.i),a.i.length=0),a.l.ra()}}function zm(a,h,f){var y=f instanceof br?un(f):new br(f);if(y.g!="")h&&(y.g=h+"."+y.g),ta(y,y.s);else{var j=c.location;y=j.protocol,h=h?h+"."+j.hostname:j.hostname,j=+j.port;var D=new br(null);y&&ea(D,y),h&&(D.g=h),j&&ta(D,j),f&&(D.l=f),y=D}return f=a.D,h=a.ya,f&&h&&he(y,f,h),he(y,"VER",a.la),vi(a,y),y}function $m(a,h,f){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Ie(new ra({eb:f})):new Ie(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wm(){}t=Wm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ca(){}ca.prototype.g=function(a,h){return new xt(a,h)};function xt(a,h){Ke.call(this),this.g=new jm(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!v(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!v(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new ts(this)}S(xt,Ke),xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xt.prototype.close=function(){Kc(this.g)},xt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Mc(a),a=f);h.i.push(new _w(h.Ya++,a)),h.G==3&&aa(h)},xt.prototype.N=function(){this.g.l=null,delete this.j,Kc(this.g),delete this.g,xt.aa.N.call(this)};function Hm(a){Lc.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const f in h){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}S(Hm,Lc);function qm(){Fc.call(this),this.status=1}S(qm,Fc);function ts(a){this.g=a}S(ts,Wm),ts.prototype.ua=function(){ot(this.g,"a")},ts.prototype.ta=function(a){ot(this.g,new Hm(a))},ts.prototype.sa=function(a){ot(this.g,new qm)},ts.prototype.ra=function(){ot(this.g,"b")},ca.prototype.createWebChannel=ca.prototype.g,xt.prototype.send=xt.prototype.o,xt.prototype.open=xt.prototype.m,xt.prototype.close=xt.prototype.close,Hx=function(){return new ca},Wx=function(){return Yo()},$x=Ir,zd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Jo.NO_ERROR=0,Jo.TIMEOUT=8,Jo.HTTP_ERROR=6,Ja=Jo,lm.COMPLETE="complete",zx=lm,rm.EventType=ai,ai.OPEN="a",ai.CLOSE="b",ai.ERROR="c",ai.MESSAGE="d",Ke.prototype.listen=Ke.prototype.K,Mi=rm,Ie.prototype.listenOnce=Ie.prototype.L,Ie.prototype.getLastError=Ie.prototype.Ka,Ie.prototype.getLastErrorCode=Ie.prototype.Ba,Ie.prototype.getStatus=Ie.prototype.Z,Ie.prototype.getResponseJson=Ie.prototype.Oa,Ie.prototype.getResponseText=Ie.prototype.oa,Ie.prototype.send=Ie.prototype.ea,Ie.prototype.setWithCredentials=Ie.prototype.Ha,Bx=Ie}).apply(typeof Ca<"u"?Ca:typeof self<"u"?self:typeof window<"u"?window:{});const Bg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ti="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr=new nf("@firebase/firestore");function Si(){return Hr.logLevel}function H(t,...e){if(Hr.logLevel<=ne.DEBUG){const n=e.map(pf);Hr.debug(`Firestore (${ti}): ${t}`,...n)}}function An(t,...e){if(Hr.logLevel<=ne.ERROR){const n=e.map(pf);Hr.error(`Firestore (${ti}): ${t}`,...n)}}function Bs(t,...e){if(Hr.logLevel<=ne.WARN){const n=e.map(pf);Hr.warn(`Firestore (${ti}): ${t}`,...n)}}function pf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t="Unexpected state"){const e=`FIRESTORE (${ti}) INTERNAL ASSERTION FAILED: `+t;throw An(e),new Error(e)}function le(t,e){t||Q()}function X(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends Pn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class d1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(et.UNAUTHENTICATED))}shutdown(){}}class h1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class f1{constructor(e){this.t=e,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){le(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new lr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new lr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new lr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(le(typeof r.accessToken=="string"),new qx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string"),new et(e)}}class m1{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=et.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class p1{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new m1(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class g1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class y1{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){le(this.o===void 0);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(le(typeof n.token=="string"),this.R=n.token,new g1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=v1(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function zs(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new W(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Oe.fromMillis(Date.now())}static fromDate(e){return Oe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Oe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.timestamp=e}static fromTimestamp(e){return new J(e)}static min(){return new J(new Oe(0,0))}static max(){return new J(new Oe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(),r===void 0?r=e.length-n:r>e.length-n&&Q(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return wo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof wo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class me extends wo{construct(e,n,r){return new me(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new me(n)}static emptyPath(){return new me([])}}const x1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $e extends wo{construct(e,n,r){return new $e(e,n,r)}static isValidIdentifier(e){return x1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$e.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $e(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new W(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new W(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new W(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new W(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $e(n)}static emptyPath(){return new $e([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(me.fromString(e))}static fromName(e){return new G(me.fromString(e).popFirst(5))}static empty(){return new G(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new me(e.slice()))}}function _1(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=J.fromTimestamp(r===1e9?new Oe(n+1,0):new Oe(n,r));return new hr(s,G.empty(),e)}function w1(t){return new hr(t.readTime,t.key,-1)}class hr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new hr(J.min(),G.empty(),-1)}static max(){return new hr(J.max(),G.empty(),-1)}}function E1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class T1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==I1)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(m=>{o[d]=m,++c,c===i&&r(o)},m=>s(m))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function b1(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}gf.oe=-1;function gc(t){return t==null}function Fl(t){return t===0&&1/t==-1/0}function N1(t){return typeof t=="number"&&Number.isInteger(t)&&!Fl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ni(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Kx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e,n){this.comparator=e,this.root=n||ze.EMPTY}insert(e,n){return new Ee(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ze.BLACK,null,null))}remove(e){return new Ee(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ze.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ra(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ra(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ra(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ra(this.root,e,this.comparator,!0)}}class Ra{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ze{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ze.RED,this.left=s??ze.EMPTY,this.right=i??ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ze(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ze.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ze.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();const e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}}ze.EMPTY=null,ze.RED=!0,ze.BLACK=!1;ze.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,n,r,s,i){return this}insert(e,n,r){return new ze(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.comparator=e,this.data=new Ee(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $g(this.data.getIterator())}getIteratorFrom(e){return new $g(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof He)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new He(this.comparator);return n.data=e,n}}class $g{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.fields=e,e.sort($e.comparator)}static empty(){return new Bt([])}unionWith(e){let n=new He($e.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Bt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Qx("Invalid base64 string: "+i):i}}(e);return new Ge(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ge(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ge.EMPTY_BYTE_STRING=new Ge("");const S1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fr(t){if(le(!!t),typeof t=="string"){let e=0;const n=S1.exec(t);if(le(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Se(t.seconds),nanos:Se(t.nanos)}}function Se(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qr(t){return typeof t=="string"?Ge.fromBase64String(t):Ge.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function vf(t){const e=t.mapValue.fields.__previous_value__;return yf(e)?vf(e):e}function Eo(t){const e=fr(t.mapValue.fields.__local_write_time__.timestampValue);return new Oe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e,n,r,s,i,o,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class Io{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Io("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Io&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa={mapValue:{}};function Gr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yf(t)?4:R1(t)?9007199254740991:C1(t)?10:11:Q()}function rn(t,e){if(t===e)return!0;const n=Gr(t);if(n!==Gr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Eo(t).isEqual(Eo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=fr(s.timestampValue),c=fr(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return qr(s.bytesValue).isEqual(qr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Se(s.geoPointValue.latitude)===Se(i.geoPointValue.latitude)&&Se(s.geoPointValue.longitude)===Se(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Se(s.integerValue)===Se(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Se(s.doubleValue),c=Se(i.doubleValue);return o===c?Fl(o)===Fl(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return zs(t.arrayValue.values||[],e.arrayValue.values||[],rn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(zg(o)!==zg(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!rn(o[u],c[u])))return!1;return!0}(t,e);default:return Q()}}function To(t,e){return(t.values||[]).find(n=>rn(n,e))!==void 0}function $s(t,e){if(t===e)return 0;const n=Gr(t),r=Gr(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=Se(i.integerValue||i.doubleValue),u=Se(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Wg(t.timestampValue,e.timestampValue);case 4:return Wg(Eo(t),Eo(e));case 5:return oe(t.stringValue,e.stringValue);case 6:return function(i,o){const c=qr(i),u=qr(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const m=oe(c[d],u[d]);if(m!==0)return m}return oe(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=oe(Se(i.latitude),Se(o.latitude));return c!==0?c:oe(Se(i.longitude),Se(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Hg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var c,u,d,m;const p=i.fields||{},g=o.fields||{},_=(c=p.value)===null||c===void 0?void 0:c.arrayValue,S=(u=g.value)===null||u===void 0?void 0:u.arrayValue,A=oe(((d=_==null?void 0:_.values)===null||d===void 0?void 0:d.length)||0,((m=S==null?void 0:S.values)===null||m===void 0?void 0:m.length)||0);return A!==0?A:Hg(_,S)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Pa.mapValue&&o===Pa.mapValue)return 0;if(i===Pa.mapValue)return 1;if(o===Pa.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=o.fields||{},m=Object.keys(d);u.sort(),m.sort();for(let p=0;p<u.length&&p<m.length;++p){const g=oe(u[p],m[p]);if(g!==0)return g;const _=$s(c[u[p]],d[m[p]]);if(_!==0)return _}return oe(u.length,m.length)}(t.mapValue,e.mapValue);default:throw Q()}}function Wg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);const n=fr(t),r=fr(e),s=oe(n.seconds,r.seconds);return s!==0?s:oe(n.nanos,r.nanos)}function Hg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=$s(n[s],r[s]);if(i)return i}return oe(n.length,r.length)}function Ws(t){return $d(t)}function $d(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=fr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return qr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=$d(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${$d(n.fields[o])}`;return s+"}"}(t.mapValue):Q()}function qg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Wd(t){return!!t&&"integerValue"in t}function xf(t){return!!t&&"arrayValue"in t}function Gg(t){return!!t&&"nullValue"in t}function Kg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xa(t){return!!t&&"mapValue"in t}function C1(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Qi(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ni(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Qi(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Qi(t.arrayValue.values[n]);return e}return Object.assign({},t)}function R1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.value=e}static empty(){return new At({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Xa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qi(n)}setAll(e){let n=$e.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=Qi(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Xa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return rn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Xa(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ni(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new At(Qi(this.value))}}function Yx(t){const e=[];return ni(t.fields,(n,r)=>{const s=new $e([n]);if(Xa(r)){const i=Yx(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Bt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new nt(e,0,J.min(),J.min(),J.min(),At.empty(),0)}static newFoundDocument(e,n,r,s){return new nt(e,1,n,J.min(),r,s,0)}static newNoDocument(e,n){return new nt(e,2,n,J.min(),J.min(),At.empty(),0)}static newUnknownDocument(e,n){return new nt(e,3,n,J.min(),J.min(),At.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=At.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=At.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n){this.position=e,this.inclusive=n}}function Qg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=$s(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Yg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!rn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n="asc"){this.field=e,this.dir=n}}function P1(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{}class ke extends Jx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new j1(e,n,r):n==="array-contains"?new M1(e,r):n==="in"?new V1(e,r):n==="not-in"?new L1(e,r):n==="array-contains-any"?new F1(e,r):new ke(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new D1(e,r):new O1(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison($s(n,this.value)):n!==null&&Gr(this.value)===Gr(n)&&this.matchesComparison($s(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qt extends Jx{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new qt(e,n)}matches(e){return Xx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Xx(t){return t.op==="and"}function Zx(t){return k1(t)&&Xx(t)}function k1(t){for(const e of t.filters)if(e instanceof qt)return!1;return!0}function Hd(t){if(t instanceof ke)return t.field.canonicalString()+t.op.toString()+Ws(t.value);if(Zx(t))return t.filters.map(e=>Hd(e)).join(",");{const e=t.filters.map(n=>Hd(n)).join(",");return`${t.op}(${e})`}}function e_(t,e){return t instanceof ke?function(r,s){return s instanceof ke&&r.op===s.op&&r.field.isEqual(s.field)&&rn(r.value,s.value)}(t,e):t instanceof qt?function(r,s){return s instanceof qt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&e_(o,s.filters[c]),!0):!1}(t,e):void Q()}function t_(t){return t instanceof ke?function(n){return`${n.field.canonicalString()} ${n.op} ${Ws(n.value)}`}(t):t instanceof qt?function(n){return n.op.toString()+" {"+n.getFilters().map(t_).join(" ,")+"}"}(t):"Filter"}class j1 extends ke{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class D1 extends ke{constructor(e,n){super(e,"in",n),this.keys=n_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class O1 extends ke{constructor(e,n){super(e,"not-in",n),this.keys=n_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function n_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class M1 extends ke{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return xf(n)&&To(n.arrayValue,this.value)}}class V1 extends ke{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&To(this.value.arrayValue,n)}}class L1 extends ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(To(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!To(this.value.arrayValue,n)}}class F1 extends ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!xf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>To(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.ue=null}}function Jg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new U1(t,e,n,r,s,i,o)}function _f(t){const e=X(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Hd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),gc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ws(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ws(r)).join(",")),e.ue=n}return e.ue}function wf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!P1(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!e_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Yg(t.startAt,e.startAt)&&Yg(t.endAt,e.endAt)}function qd(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function B1(t,e,n,r,s,i,o,c){return new ri(t,e,n,r,s,i,o,c)}function r_(t){return new ri(t)}function Xg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function s_(t){return t.collectionGroup!==null}function Yi(t){const e=X(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new He($e.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new bo(i,r))}),n.has($e.keyField().canonicalString())||e.ce.push(new bo($e.keyField(),r))}return e.ce}function tn(t){const e=X(t);return e.le||(e.le=z1(e,Yi(t))),e.le}function z1(t,e){if(t.limitType==="F")return Jg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new bo(s.field,i)});const n=t.endAt?new Ul(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ul(t.startAt.position,t.startAt.inclusive):null;return Jg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Gd(t,e){const n=t.filters.concat([e]);return new ri(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Bl(t,e,n){return new ri(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yc(t,e){return wf(tn(t),tn(e))&&t.limitType===e.limitType}function i_(t){return`${_f(tn(t))}|lt:${t.limitType}`}function os(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>t_(s)).join(", ")}]`),gc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ws(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ws(s)).join(",")),`Target(${r})`}(tn(t))}; limitType=${t.limitType})`}function vc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):G.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Yi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const d=Qg(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,Yi(r),s)||r.endAt&&!function(o,c,u){const d=Qg(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,Yi(r),s))}(t,e)}function $1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function o_(t){return(e,n)=>{let r=!1;for(const s of Yi(t)){const i=W1(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function W1(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(i,o,c){const u=o.data.field(i),d=c.data.field(i);return u!==null&&d!==null?$s(u,d):Q()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ni(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Kx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1=new Ee(G.comparator);function Cn(){return H1}const a_=new Ee(G.comparator);function Vi(...t){let e=a_;for(const n of t)e=e.insert(n.key,n);return e}function l_(t){let e=a_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function jr(){return Ji()}function c_(){return Ji()}function Ji(){return new si(t=>t.toString(),(t,e)=>t.isEqual(e))}const q1=new Ee(G.comparator),G1=new He(G.comparator);function te(...t){let e=G1;for(const n of t)e=e.add(n);return e}const K1=new He(oe);function Q1(){return K1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fl(e)?"-0":e}}function u_(t){return{integerValue:""+t}}function Y1(t,e){return N1(e)?u_(e):Ef(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(){this._=void 0}}function J1(t,e,n){return t instanceof zl?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&yf(i)&&(i=vf(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof No?h_(t,e):t instanceof So?f_(t,e):function(s,i){const o=d_(s,i),c=Zg(o)+Zg(s.Pe);return Wd(o)&&Wd(s.Pe)?u_(c):Ef(s.serializer,c)}(t,e)}function X1(t,e,n){return t instanceof No?h_(t,e):t instanceof So?f_(t,e):n}function d_(t,e){return t instanceof $l?function(r){return Wd(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class zl extends xc{}class No extends xc{constructor(e){super(),this.elements=e}}function h_(t,e){const n=m_(e);for(const r of t.elements)n.some(s=>rn(s,r))||n.push(r);return{arrayValue:{values:n}}}class So extends xc{constructor(e){super(),this.elements=e}}function f_(t,e){let n=m_(e);for(const r of t.elements)n=n.filter(s=>!rn(s,r));return{arrayValue:{values:n}}}class $l extends xc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Zg(t){return Se(t.integerValue||t.doubleValue)}function m_(t){return xf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Z1(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof No&&s instanceof No||r instanceof So&&s instanceof So?zs(r.elements,s.elements,rn):r instanceof $l&&s instanceof $l?rn(r.Pe,s.Pe):r instanceof zl&&s instanceof zl}(t.transform,e.transform)}class eC{constructor(e,n){this.version=e,this.transformResults=n}}class wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wn}static exists(e){return new wn(void 0,e)}static updateTime(e){return new wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Za(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class _c{}function p_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new y_(t.key,wn.none()):new $o(t.key,t.data,wn.none());{const n=t.data,r=At.empty();let s=new He($e.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Jr(t.key,r,new Bt(s.toArray()),wn.none())}}function tC(t,e,n){t instanceof $o?function(s,i,o){const c=s.value.clone(),u=ty(s.fieldTransforms,i,o.transformResults);c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Jr?function(s,i,o){if(!Za(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=ty(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(g_(s)),u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Xi(t,e,n,r){return t instanceof $o?function(i,o,c,u){if(!Za(i.precondition,o))return c;const d=i.value.clone(),m=ny(i.fieldTransforms,u,o);return d.setAll(m),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Jr?function(i,o,c,u){if(!Za(i.precondition,o))return c;const d=ny(i.fieldTransforms,u,o),m=o.data;return m.setAll(g_(i)),m.setAll(d),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,c){return Za(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function nC(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=d_(r.transform,s||null);i!=null&&(n===null&&(n=At.empty()),n.set(r.field,i))}return n||null}function ey(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&zs(r,s,(i,o)=>Z1(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class $o extends _c{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Jr extends _c{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function g_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ty(t,e,n){const r=new Map;le(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,X1(o,c,n[s]))}return r}function ny(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,J1(i,o,e))}return r}class y_ extends _c{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rC extends _c{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&tC(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Xi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Xi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=c_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const u=p_(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),te())}isEqual(e){return this.batchId===e.batchId&&zs(this.mutations,e.mutations,(n,r)=>ey(n,r))&&zs(this.baseMutations,e.baseMutations,(n,r)=>ey(n,r))}}class If{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){le(e.mutations.length===r.length);let s=function(){return q1}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new If(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re,re;function aC(t){switch(t){default:return Q();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function v_(t){if(t===void 0)return An("GRPC error has no .code"),M.UNKNOWN;switch(t){case Re.OK:return M.OK;case Re.CANCELLED:return M.CANCELLED;case Re.UNKNOWN:return M.UNKNOWN;case Re.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Re.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Re.INTERNAL:return M.INTERNAL;case Re.UNAVAILABLE:return M.UNAVAILABLE;case Re.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Re.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Re.NOT_FOUND:return M.NOT_FOUND;case Re.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Re.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Re.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Re.ABORTED:return M.ABORTED;case Re.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Re.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Re.DATA_LOSS:return M.DATA_LOSS;default:return Q()}}(re=Re||(Re={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=new Mr([4294967295,4294967295],0);function ry(t){const e=lC().encode(t),n=new Ux;return n.update(e),new Uint8Array(n.digest())}function sy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Mr([n,r],0),new Mr([s,i],0)]}class Tf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Li(`Invalid padding: ${n}`);if(r<0)throw new Li(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Li(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Li(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Mr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Mr.fromNumber(r)));return s.compare(cC)===1&&(s=new Mr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=ry(e),[r,s]=sy(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Tf(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;const n=ry(e),[r,s]=sy(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Li extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Wo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new wc(J.min(),s,new Ee(oe),Cn(),te())}}class Wo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Wo(r,n,te(),te(),te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class x_{constructor(e,n){this.targetId=e,this.me=n}}class __{constructor(e,n,r=Ge.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class iy{constructor(){this.fe=0,this.ge=ay(),this.pe=Ge.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=te(),n=te(),r=te();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Q()}}),new Wo(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=ay()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class uC{constructor(e){this.Le=e,this.Be=new Map,this.ke=Cn(),this.qe=oy(),this.Qe=new Ee(oe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(qd(i))if(r===0){const o=new G(i.path);this.Ue(n,o,nt.newNoDocument(o,J.min()))}else le(r===1);else{const o=this.Ye(n);if(o!==r){const c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=qr(r).toUint8Array()}catch(u){if(u instanceof Qx)return Bs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Tf(o,s,i)}catch(u){return Bs(u instanceof Li?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const c=this.Je(o);if(c){if(i.current&&qd(c.target)){const u=new G(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,nt.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=te();this.qe.forEach((i,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new wc(e,n,this.Qe,this.ke,r);return this.ke=Cn(),this.qe=oy(),this.Qe=new Ee(oe),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new iy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new He(oe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new iy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function oy(){return new Ee(G.comparator)}function ay(){return new Ee(G.comparator)}const dC={asc:"ASCENDING",desc:"DESCENDING"},hC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fC={and:"AND",or:"OR"};class mC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Kd(t,e){return t.useProto3Json||gc(e)?e:{value:e}}function Wl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function w_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pC(t,e){return Wl(t,e.toTimestamp())}function nn(t){return le(!!t),J.fromTimestamp(function(n){const r=fr(n);return new Oe(r.seconds,r.nanos)}(t))}function bf(t,e){return Qd(t,e).canonicalString()}function Qd(t,e){const n=function(s){return new me(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function E_(t){const e=me.fromString(t);return le(S_(e)),e}function Yd(t,e){return bf(t.databaseId,e.path)}function ku(t,e){const n=E_(e);if(n.get(1)!==t.databaseId.projectId)throw new W(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(T_(n))}function I_(t,e){return bf(t.databaseId,e)}function gC(t){const e=E_(t);return e.length===4?me.emptyPath():T_(e)}function Jd(t){return new me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function T_(t){return le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ly(t,e,n){return{name:Yd(t,e),fields:n.value.mapValue.fields}}function yC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,m){return d.useProto3Json?(le(m===void 0||typeof m=="string"),Ge.fromBase64String(m||"")):(le(m===void 0||m instanceof Buffer||m instanceof Uint8Array),Ge.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const m=d.code===void 0?M.UNKNOWN:v_(d.code);return new W(m,d.message||"")}(o);n=new __(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ku(t,r.document.name),i=nn(r.document.updateTime),o=r.document.createTime?nn(r.document.createTime):J.min(),c=new At({mapValue:{fields:r.document.fields}}),u=nt.newFoundDocument(s,i,o,c),d=r.targetIds||[],m=r.removedTargetIds||[];n=new el(d,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ku(t,r.document),i=r.readTime?nn(r.readTime):J.min(),o=nt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new el([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ku(t,r.document),i=r.removedTargetIds||[];n=new el([],i,s,null)}else{if(!("filter"in e))return Q();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new oC(s,i),c=r.targetId;n=new x_(c,o)}}return n}function vC(t,e){let n;if(e instanceof $o)n={update:ly(t,e.key,e.value)};else if(e instanceof y_)n={delete:Yd(t,e.key)};else if(e instanceof Jr)n={update:ly(t,e.key,e.data),updateMask:SC(e.fieldMask)};else{if(!(e instanceof rC))return Q();n={verify:Yd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof zl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof No)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof So)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof $l)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw Q()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:pC(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Q()}(t,e.precondition)),n}function xC(t,e){return t&&t.length>0?(le(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?nn(s.updateTime):nn(i);return o.isEqual(J.min())&&(o=nn(i)),new eC(o,s.transformResults||[])}(n,e))):[]}function _C(t,e){return{documents:[I_(t,e.path)]}}function wC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=I_(t,s);const i=function(d){if(d.length!==0)return N_(qt.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(m=>function(g){return{field:as(g.field),direction:TC(g.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Kd(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function EC(t){let e=gC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){le(r===1);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(p){const g=b_(p);return g instanceof qt&&Zx(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(S){return new bo(ls(S.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(p){let g;return g=typeof p=="object"?p.value:p,gc(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,_=p.values||[];return new Ul(_,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,_=p.values||[];return new Ul(_,g)}(n.endAt)),B1(e,s,o,i,c,"F",u,d)}function IC(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function b_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ls(n.unaryFilter.field);return ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ls(n.unaryFilter.field);return ke.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ls(n.unaryFilter.field);return ke.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ls(n.unaryFilter.field);return ke.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(t):t.fieldFilter!==void 0?function(n){return ke.create(ls(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return qt.create(n.compositeFilter.filters.map(r=>b_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Q()}}(n.compositeFilter.op))}(t):Q()}function TC(t){return dC[t]}function bC(t){return hC[t]}function NC(t){return fC[t]}function as(t){return{fieldPath:t.canonicalString()}}function ls(t){return $e.fromServerFormat(t.fieldPath)}function N_(t){return t instanceof ke?function(n){if(n.op==="=="){if(Kg(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NAN"}};if(Gg(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Kg(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NOT_NAN"}};if(Gg(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:as(n.field),op:bC(n.op),value:n.value}}}(t):t instanceof qt?function(n){const r=n.getFilters().map(s=>N_(s));return r.length===1?r[0]:{compositeFilter:{op:NC(n.op),filters:r}}}(t):Q()}function SC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function S_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,n,r,s,i=J.min(),o=J.min(),c=Ge.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Qn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.ct=e}}function CC(t){const e=EC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Bl(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this.un=new PC}addToCollectionParentIndex(e,n){return this.un.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(hr.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(hr.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class PC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new He(me.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new He(me.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Hs(0)}static kn(){return new Hs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(){this.changes=new si(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Xi(r.mutation,s,Bt.empty(),Oe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=te()){const s=jr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Vi();return i.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=jr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,te()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=Cn();const o=Ji(),c=function(){return Ji()}();return n.forEach((u,d)=>{const m=r.get(d.key);s.has(d.key)&&(m===void 0||m.mutation instanceof Jr)?i=i.insert(d.key,d):m!==void 0?(o.set(d.key,m.mutation.getFieldMask()),Xi(m.mutation,d,m.mutation.getFieldMask(),Oe.now())):o.set(d.key,Bt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,m)=>o.set(d,m)),n.forEach((d,m)=>{var p;return c.set(d,new jC(m,(p=o.get(d))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){const r=Ji();let s=new Ee((o,c)=>o-c),i=te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let m=r.get(u)||Bt.empty();m=c.applyToLocalView(d,m),r.set(u,m);const p=(s.get(c.batchId)||te()).add(u);s=s.insert(c.batchId,p)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,m=u.value,p=c_();m.forEach(g=>{if(!i.has(g)){const _=p_(n.get(g),r.get(g));_!==null&&p.set(g,_),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):s_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(jr());let c=-1,u=i;return o.next(d=>L.forEach(d,(m,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),i.get(m)?L.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{u=u.insert(m,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,te())).next(m=>({batchId:c,changes:l_(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let s=Vi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Vi();return this.indexManager.getCollectionParents(e,i).next(c=>L.forEach(c,u=>{const d=function(p,g){return new ri(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(m=>{m.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const m=d.getKey();o.get(m)===null&&(o=o.insert(m,nt.newInvalidDocument(m)))});let c=Vi();return o.forEach((u,d)=>{const m=i.get(u);m!==void 0&&Xi(m.mutation,d,Bt.empty(),Oe.now()),vc(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return L.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:nn(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:CC(s.bundledQuery),readTime:nn(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(){this.overlays=new Ee(G.comparator),this.Ir=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=jr();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=jr(),i=n.length+1,o=new G(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ee((d,m)=>d-m);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let m=i.get(d.largestBatchId);m===null&&(m=jr(),i=i.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const c=jr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,m)=>c.set(d,m)),!(c.size()>=s)););return L.resolve(c)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new iC(n,r));let i=this.Ir.get(n);i===void 0&&(i=te(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(){this.sessionToken=Ge.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(){this.Tr=new He(Ve.Er),this.dr=new He(Ve.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ve(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ve(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new G(new me([])),r=new Ve(n,e),s=new Ve(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new G(new me([])),r=new Ve(n,e),s=new Ve(n,e+1);let i=te();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ve(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ve{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return G.comparator(e.key,n.key)||oe(e.wr,n.wr)}static Ar(e,n){return oe(e.wr,n.wr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new He(Ve.Er)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new sC(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.br=this.br.add(new Ve(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ve(n,0),s=new Ve(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const c=this.Dr(o.wr);i.push(c)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new He(oe);return n.forEach(s=>{const i=new Ve(s,0),o=new Ve(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],c=>{r=r.add(c.wr)})}),L.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;G.isDocumentKey(i)||(i=i.child(""));const o=new Ve(new G(i),0);let c=new He(oe);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.wr)),!0)},o),L.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){le(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return L.forEach(n.mutations,s=>{const i=new Ve(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ve(n,0),s=this.br.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e){this.Mr=e,this.docs=function(){return new Ee(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():nt.newInvalidDocument(n))}getEntries(e,n){let r=Cn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():nt.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Cn();const o=n.path,c=new G(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:m}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||E1(w1(m),r)<=0||(s.has(m.key)||vc(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Q()}Or(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new UC(this)}getSize(e){return L.resolve(this.size)}}class UC extends kC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e){this.persistence=e,this.Nr=new si(n=>_f(n),wf),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Nf,this.targetCount=0,this.kr=Hs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),L.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Hs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Kn(n),L.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n){this.qr={},this.overlays={},this.Qr=new gf(0),this.Kr=!1,this.Kr=!0,this.$r=new VC,this.referenceDelegate=e(this),this.Ur=new BC(this),this.indexManager=new RC,this.remoteDocumentCache=function(s){return new FC(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new AC(n),this.Gr=new OC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new MC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new LC(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new $C(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return L.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class $C extends T1{constructor(e){super(),this.currentSequenceNumber=e}}class Sf{constructor(e){this.persistence=e,this.Jr=new Nf,this.Yr=null}static Zr(e){return new Sf(e)}get Xr(){if(this.Yr)return this.Yr;throw Q()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),L.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Xr,r=>{const s=G.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,J.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return L.or([()=>L.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=te(),s=te();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Af(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Pb()?8:b1(st())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new WC;return this.Xi(e,n,o).next(c=>{if(i.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Si()<=ne.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",os(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),L.resolve()):(Si()<=ne.DEBUG&&H("QueryEngine","Query:",os(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Si()<=ne.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",os(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tn(n))):L.resolve())}Yi(e,n){if(Xg(n))return L.resolve(null);let r=tn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Bl(n,null,"F"),r=tn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=te(...i);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,c);return this.ns(n,d,o,u.readTime)?this.Yi(e,Bl(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return Xg(n)||s.isEqual(J.min())?L.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?L.resolve(null):(Si()<=ne.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),os(n)),this.rs(e,o,n,_1(s,-1)).next(c=>c))})}ts(e,n){let r=new He(o_(e));return n.forEach((s,i)=>{vc(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Si()<=ne.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",os(n)),this.Ji.getDocumentsMatchingQuery(e,n,hr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ee(oe),this._s=new si(i=>_f(i),wf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function GC(t,e,n,r){return new qC(t,e,n,r)}async function A_(t,e){const n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let u=te();for(const d of s){o.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}for(const d of i){c.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:c}))})})}function KC(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,m){const p=d.batch,g=p.keys();let _=L.resolve();return g.forEach(S=>{_=_.next(()=>m.getEntry(u,S)).next(A=>{const P=d.docVersions.get(S);le(P!==null),A.version.compareTo(P)<0&&(p.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),m.addEntry(A)))})}),_.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=te();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function C_(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function QC(t,e){const n=X(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const c=[];e.targetChanges.forEach((m,p)=>{const g=s.get(p);if(!g)return;c.push(n.Ur.removeMatchingKeys(i,m.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,m.addedDocuments,p)));let _=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(Ge.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):m.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(m.resumeToken,r)),s=s.insert(p,_),function(A,P,T){return A.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(g,_,m)&&c.push(n.Ur.updateTargetData(i,_))});let u=Cn(),d=te();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),c.push(YC(i,o,e.documentUpdates).next(m=>{u=m.Ps,d=m.Is})),!r.isEqual(J.min())){const m=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(m)}return L.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function YC(t,e,n){let r=te(),s=te();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Cn();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):H("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function JC(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function XC(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Qn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Xd(t,e,n){const r=X(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!zo(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function cy(t,e,n){const r=X(t);let s=J.min(),i=te();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,m){const p=X(u),g=p._s.get(m);return g!==void 0?L.resolve(p.os.get(g)):p.Ur.getTargetData(d,m)}(r,o,tn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:J.min(),n?i:te())).next(c=>(ZC(r,$1(e),c),{documents:c,Ts:i})))}function ZC(t,e,n){let r=t.us.get(e)||J.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class uy{constructor(){this.activeTargetIds=Q1()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eR{constructor(){this.so=new uy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new uy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ka=null;function ju(){return ka===null?ka=function(){return 268435456+Math.round(2147483648*Math.random())}():ka++,"0x"+ka.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze="WebChannelConnection";class sR extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const c=ju(),u=this.xo(n,r.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${c}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,u,d,s).then(m=>(H("RestConnection",`Received RPC '${n}' ${c}: `,m),m),m=>{throw Bs("RestConnection",`RPC '${n}' ${c} failed with error: `,m,"url: ",u,"request:",s),m})}Lo(n,r,s,i,o,c){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ti}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=nR[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=ju();return new Promise((o,c)=>{const u=new Bx;u.setWithCredentials(!0),u.listenOnce(zx.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ja.NO_ERROR:const m=u.getResponseJson();H(Ze,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(m)),o(m);break;case Ja.TIMEOUT:H(Ze,`RPC '${e}' ${i} timed out`),c(new W(M.DEADLINE_EXCEEDED,"Request time out"));break;case Ja.HTTP_ERROR:const p=u.getStatus();if(H(Ze,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g==null?void 0:g.error;if(_&&_.status&&_.message){const S=function(P){const T=P.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(T)>=0?T:M.UNKNOWN}(_.status);c(new W(S,_.message))}else c(new W(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new W(M.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{H(Ze,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);H(Ze,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=ju(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Hx(),c=Wx(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const m=i.join("");H(Ze,`Creating RPC '${e}' stream ${s}: ${m}`,u);const p=o.createWebChannel(m,u);let g=!1,_=!1;const S=new rR({Io:P=>{_?H(Ze,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(g||(H(Ze,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),H(Ze,`RPC '${e}' stream ${s} sending:`,P),p.send(P))},To:()=>p.close()}),A=(P,T,v)=>{P.listen(T,E=>{try{v(E)}catch(R){setTimeout(()=>{throw R},0)}})};return A(p,Mi.EventType.OPEN,()=>{_||(H(Ze,`RPC '${e}' stream ${s} transport opened.`),S.yo())}),A(p,Mi.EventType.CLOSE,()=>{_||(_=!0,H(Ze,`RPC '${e}' stream ${s} transport closed`),S.So())}),A(p,Mi.EventType.ERROR,P=>{_||(_=!0,Bs(Ze,`RPC '${e}' stream ${s} transport errored:`,P),S.So(new W(M.UNAVAILABLE,"The operation could not be completed")))}),A(p,Mi.EventType.MESSAGE,P=>{var T;if(!_){const v=P.data[0];le(!!v);const E=v,R=E.error||((T=E[0])===null||T===void 0?void 0:T.error);if(R){H(Ze,`RPC '${e}' stream ${s} received error:`,R);const V=R.status;let U=function(w){const b=Re[w];if(b!==void 0)return v_(b)}(V),I=R.message;U===void 0&&(U=M.INTERNAL,I="Unknown error status: "+V+" with message "+R.message),_=!0,S.So(new W(U,I)),p.close()}else H(Ze,`RPC '${e}' stream ${s} received:`,v),S.bo(v)}}),A(c,$x.STAT_EVENT,P=>{P.stat===zd.PROXY?H(Ze,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===zd.NOPROXY&&H(Ze,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}}function Du(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(t){return new mC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,n,r,s,i,o,c,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new R_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(An(n.toString()),An("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new W(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iR extends P_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=yC(this.serializer,e),r=function(i){if(!("targetChange"in i))return J.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?nn(o.readTime):J.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Jd(this.serializer),n.addTarget=function(i,o){let c;const u=o.target;if(c=qd(u)?{documents:_C(i,u)}:{query:wC(i,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=w_(i,o.resumeToken);const d=Kd(i,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(J.min())>0){c.readTime=Wl(i,o.snapshotVersion.toTimestamp());const d=Kd(i,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=IC(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Jd(this.serializer),n.removeTarget=e,this.a_(n)}}class oR extends P_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return le(!!e.streamToken),this.lastStreamToken=e.streamToken,le(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=xC(e.writeResults,e.commitTime),r=nn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Jd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>vC(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new W(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Qd(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new W(M.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Qd(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class lR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(An(n),this.D_=!1):H("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Xr(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=X(u);d.L_.add(4),await Ho(d),d.q_.set("Unknown"),d.L_.delete(4),await Ic(d)}(this))})}),this.q_=new lR(r,s)}}async function Ic(t){if(Xr(t))for(const e of t.B_)await e(!0)}async function Ho(t){for(const e of t.B_)await e(!1)}function k_(t,e){const n=X(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),kf(n)?Pf(n):ii(n).r_()&&Rf(n,e))}function Cf(t,e){const n=X(t),r=ii(n);n.N_.delete(e),r.r_()&&j_(n,e),n.N_.size===0&&(r.r_()?r.o_():Xr(n)&&n.q_.set("Unknown"))}function Rf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ii(t).A_(e)}function j_(t,e){t.Q_.xe(e),ii(t).R_(e)}function Pf(t){t.Q_=new uC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ii(t).start(),t.q_.v_()}function kf(t){return Xr(t)&&!ii(t).n_()&&t.N_.size>0}function Xr(t){return X(t).L_.size===0}function D_(t){t.Q_=void 0}async function uR(t){t.q_.set("Online")}async function dR(t){t.N_.forEach((e,n)=>{Rf(t,e)})}async function hR(t,e){D_(t),kf(t)?(t.q_.M_(e),Pf(t)):t.q_.set("Unknown")}async function fR(t,e,n){if(t.q_.set("Online"),e instanceof __&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.N_.delete(c),s.Q_.removeTarget(c))}(t,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Hl(t,r)}else if(e instanceof el?t.Q_.Ke(e):e instanceof x_?t.Q_.He(e):t.Q_.We(e),!n.isEqual(J.min()))try{const r=await C_(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.Q_.rt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const m=i.N_.get(d);m&&i.N_.set(d,m.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const m=i.N_.get(u);if(!m)return;i.N_.set(u,m.withResumeToken(Ge.EMPTY_BYTE_STRING,m.snapshotVersion)),j_(i,u);const p=new Qn(m.target,u,d,m.sequenceNumber);Rf(i,p)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){H("RemoteStore","Failed to raise snapshot:",r),await Hl(t,r)}}async function Hl(t,e,n){if(!zo(e))throw e;t.L_.add(1),await Ho(t),t.q_.set("Offline"),n||(n=()=>C_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ic(t)})}function O_(t,e){return e().catch(n=>Hl(t,n,e))}async function Tc(t){const e=X(t),n=mr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;mR(e);)try{const s=await JC(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,pR(e,s)}catch(s){await Hl(e,s)}M_(e)&&V_(e)}function mR(t){return Xr(t)&&t.O_.length<10}function pR(t,e){t.O_.push(e);const n=mr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function M_(t){return Xr(t)&&!mr(t).n_()&&t.O_.length>0}function V_(t){mr(t).start()}async function gR(t){mr(t).p_()}async function yR(t){const e=mr(t);for(const n of t.O_)e.m_(n.mutations)}async function vR(t,e,n){const r=t.O_.shift(),s=If.from(r,e,n);await O_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Tc(t)}async function xR(t,e){e&&mr(t).V_&&await async function(r,s){if(function(o){return aC(o)&&o!==M.ABORTED}(s.code)){const i=r.O_.shift();mr(r).s_(),await O_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Tc(r)}}(t,e),M_(t)&&V_(t)}async function hy(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const r=Xr(n);n.L_.add(3),await Ho(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ic(n)}async function _R(t,e){const n=X(t);e?(n.L_.delete(2),await Ic(n)):e||(n.L_.add(2),await Ho(n),n.q_.set("Unknown"))}function ii(t){return t.K_||(t.K_=function(n,r,s){const i=X(n);return i.w_(),new iR(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:uR.bind(null,t),Ro:dR.bind(null,t),mo:hR.bind(null,t),d_:fR.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),kf(t)?Pf(t):t.q_.set("Unknown")):(await t.K_.stop(),D_(t))})),t.K_}function mr(t){return t.U_||(t.U_=function(n,r,s){const i=X(n);return i.w_(),new oR(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:gR.bind(null,t),mo:xR.bind(null,t),f_:yR.bind(null,t),g_:vR.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Tc(t)):(await t.U_.stop(),t.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new jf(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Df(t,e){if(An("AsyncQueue",`${e}: ${t}`),zo(t))return new W(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=Vi(),this.sortedSet=new Ee(this.comparator)}static emptySet(e){return new Ps(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ps)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ps;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(){this.W_=new Ee(G.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Q():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class qs{constructor(e,n,r,s,i,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new qs(e,n,Ps.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class ER{constructor(){this.queries=my(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=X(n),i=s.queries;s.queries=my(),i.forEach((o,c)=>{for(const u of c.j_)u.onError(r)})})(this,new W(M.ABORTED,"Firestore shutting down"))}}function my(){return new si(t=>i_(t),yc)}async function IR(t,e){const n=X(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new wR,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Df(o,`Initialization of query '${os(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Of(n)}async function TR(t,e){const n=X(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function bR(t,e){const n=X(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.j_)c.X_(s)&&(r=!0);o.z_=s}}r&&Of(n)}function NR(t,e,n){const r=X(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Of(t){t.Y_.forEach(e=>{e.next()})}var Zd,py;(py=Zd||(Zd={})).ea="default",py.Cache="cache";class SR{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new qs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=qs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Zd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e){this.key=e}}class F_{constructor(e){this.key=e}}class AR{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=te(),this.mutatedKeys=te(),this.Aa=o_(e),this.Ra=new Ps(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new fy,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,p)=>{const g=s.get(m),_=vc(this.query,p)?p:null,S=!!g&&this.mutatedKeys.has(g.key),A=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let P=!1;g&&_?g.data.isEqual(_.data)?S!==A&&(r.track({type:3,doc:_}),P=!0):this.ga(g,_)||(r.track({type:2,doc:_}),P=!0,(u&&this.Aa(_,u)>0||d&&this.Aa(_,d)<0)&&(c=!0)):!g&&_?(r.track({type:0,doc:_}),P=!0):g&&!_&&(r.track({type:1,doc:g}),P=!0,(u||d)&&(c=!0)),P&&(_?(o=o.add(_),i=A?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{Ra:o,fa:r,ns:c,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((m,p)=>function(_,S){const A=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return A(_)-A(S)}(m.type,p.type)||this.Aa(m.doc,p.doc)),this.pa(r),s=s!=null&&s;const c=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new qs(this.query,e.Ra,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new fy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=te(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new F_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new L_(r))}),n}ba(e){this.Ta=e.Ts,this.da=te();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return qs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class CR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class RR{constructor(e){this.key=e,this.va=!1}}class PR{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new si(c=>i_(c),yc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ee(G.comparator),this.Na=new Map,this.La=new Nf,this.Ba={},this.ka=new Map,this.qa=Hs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function kR(t,e,n=!0){const r=H_(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await U_(r,e,n,!0),s}async function jR(t,e){const n=H_(t);await U_(n,e,!0,!1)}async function U_(t,e,n,r){const s=await XC(t.localStore,tn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await DR(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&k_(t.remoteStore,s),c}async function DR(t,e,n,r,s){t.Ka=(p,g,_)=>async function(A,P,T,v){let E=P.view.ma(T);E.ns&&(E=await cy(A.localStore,P.query,!1).then(({documents:I})=>P.view.ma(I,E)));const R=v&&v.targetChanges.get(P.targetId),V=v&&v.targetMismatches.get(P.targetId)!=null,U=P.view.applyChanges(E,A.isPrimaryClient,R,V);return yy(A,P.targetId,U.wa),U.snapshot}(t,p,g,_);const i=await cy(t.localStore,e,!0),o=new AR(e,i.Ts),c=o.ma(i.documents),u=Wo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(c,t.isPrimaryClient,u);yy(t,n,d.wa);const m=new CR(e,n,o);return t.Fa.set(e,m),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function OR(t,e,n){const r=X(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!yc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Xd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Cf(r.remoteStore,s.targetId),eh(r,s.targetId)}).catch(Bo)):(eh(r,s.targetId),await Xd(r.localStore,s.targetId,!0))}async function MR(t,e){const n=X(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Cf(n.remoteStore,r.targetId))}async function VR(t,e,n){const r=WR(t);try{const s=await function(o,c){const u=X(o),d=Oe.now(),m=c.reduce((_,S)=>_.add(S.key),te());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let S=Cn(),A=te();return u.cs.getEntries(_,m).next(P=>{S=P,S.forEach((T,v)=>{v.isValidDocument()||(A=A.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,S)).next(P=>{p=P;const T=[];for(const v of c){const E=nC(v,p.get(v.key).overlayedDocument);E!=null&&T.push(new Jr(v.key,E,Yx(E.value.mapValue),wn.exists(!0)))}return u.mutationQueue.addMutationBatch(_,d,T,c)}).next(P=>{g=P;const T=P.applyToLocalDocumentSet(p,A);return u.documentOverlayCache.saveOverlays(_,P.batchId,T)})}).then(()=>({batchId:g.batchId,changes:l_(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Ee(oe)),d=d.insert(c,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await qo(r,s.changes),await Tc(r.remoteStore)}catch(s){const i=Df(s,"Failed to persist write");n.reject(i)}}async function B_(t,e){const n=X(t);try{const r=await QC(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(le(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?le(o.va):s.removedDocuments.size>0&&(le(o.va),o.va=!1))}),await qo(n,r,e)}catch(r){await Bo(r)}}function gy(t,e,n){const r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const c=o.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=X(o);u.onlineState=c;let d=!1;u.queries.forEach((m,p)=>{for(const g of p.j_)g.Z_(c)&&(d=!0)}),d&&Of(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function LR(t,e,n){const r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Ee(G.comparator);o=o.insert(i,nt.newNoDocument(i,J.min()));const c=te().add(i),u=new wc(J.min(),new Map,new Ee(oe),o,c);await B_(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),Mf(r)}else await Xd(r.localStore,e,!1).then(()=>eh(r,e,n)).catch(Bo)}async function FR(t,e){const n=X(t),r=e.batch.batchId;try{const s=await KC(n.localStore,e);$_(n,r,null),z_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await qo(n,s)}catch(s){await Bo(s)}}async function UR(t,e,n){const r=X(t);try{const s=await function(o,c){const u=X(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return u.mutationQueue.lookupMutationBatch(d,c).next(p=>(le(p!==null),m=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,m,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>u.localDocuments.getDocuments(d,m))})}(r.localStore,e);$_(r,e,n),z_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await qo(r,s)}catch(s){await Bo(s)}}function z_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function $_(t,e,n){const r=X(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function eh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||W_(t,r)})}function W_(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Cf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Mf(t))}function yy(t,e,n){for(const r of n)r instanceof L_?(t.La.addReference(r.key,e),BR(t,r)):r instanceof F_?(H("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||W_(t,r.key)):Q()}function BR(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(H("SyncEngine","New document in limbo: "+n),t.xa.add(r),Mf(t))}function Mf(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new G(me.fromString(e)),r=t.qa.next();t.Na.set(r,new RR(n)),t.Oa=t.Oa.insert(n,r),k_(t.remoteStore,new Qn(tn(r_(n.path)),r,"TargetPurposeLimboResolution",gf.oe))}}async function qo(t,e,n){const r=X(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,n).then(d=>{var m;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=Af.Wi(u.targetId,d);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const m=X(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>L.forEach(d,g=>L.forEach(g.$i,_=>m.persistence.referenceDelegate.addReference(p,g.targetId,_)).next(()=>L.forEach(g.Ui,_=>m.persistence.referenceDelegate.removeReference(p,g.targetId,_)))))}catch(p){if(!zo(p))throw p;H("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const _=m.os.get(g),S=_.snapshotVersion,A=_.withLastLimboFreeSnapshotVersion(S);m.os=m.os.insert(g,A)}}}(r.localStore,i))}async function zR(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const r=await A_(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(c=>{c.forEach(u=>{u.reject(new W(M.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await qo(n,r.hs)}}function $R(t,e){const n=X(t),r=n.Na.get(e);if(r&&r.va)return te().add(r.key);{let s=te();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const c=n.Fa.get(o);s=s.unionWith(c.view.Va)}return s}}function H_(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=B_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$R.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LR.bind(null,e),e.Ca.d_=bR.bind(null,e.eventManager),e.Ca.$a=NR.bind(null,e.eventManager),e}function WR(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UR.bind(null,e),e}class ql{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ec(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return GC(this.persistence,new HC,e.initialUser,this.serializer)}Ga(e){return new zC(Sf.Zr,this.serializer)}Wa(e){return new eR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ql.provider={build:()=>new ql};class th{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zR.bind(null,this.syncEngine),await _R(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ER}()}createDatastore(e){const n=Ec(e.databaseInfo.databaseId),r=function(i){return new sR(i)}(e.databaseInfo);return function(i,o,c,u){return new aR(i,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new cR(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>gy(this.syncEngine,n,0),function(){return dy.D()?new dy:new tR}())}createSyncEngine(e,n){return function(s,i,o,c,u,d,m){const p=new PR(s,i,o,c,u,d);return m&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=X(s);H("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Ho(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}th.provider={build:()=>new th};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):An("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=et.UNAUTHENTICATED,this.clientId=Gx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Df(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ou(t,e){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await A_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function vy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await GR(t);H("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>hy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>hy(e.remoteStore,s)),t._onlineComponents=e}async function GR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ou(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Bs("Error using user provided cache. Falling back to memory cache: "+n),await Ou(t,new ql)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await Ou(t,new ql);return t._offlineComponents}async function q_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await vy(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await vy(t,new th))),t._onlineComponents}function KR(t){return q_(t).then(e=>e.syncEngine)}async function QR(t){const e=await q_(t),n=e.eventManager;return n.onListen=kR.bind(null,e.syncEngine),n.onUnlisten=OR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=jR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=MR.bind(null,e.syncEngine),n}function YR(t,e,n={}){const r=new lr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const m=new HR({next:g=>{m.Za(),o.enqueueAndForget(()=>TR(i,p)),g.fromCache&&u.source==="server"?d.reject(new W(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new SR(c,m,{includeMetadataChanges:!0,_a:!0});return IR(i,p)}(await QR(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(t,e,n){if(!n)throw new W(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function JR(t,e,n,r){if(e===!0&&r===!0)throw new W(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function _y(t){if(!G.isDocumentKey(t))throw new W(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wy(t){if(G.isDocumentKey(t))throw new W(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function bc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q()}function Gl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bc(t);throw new W(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function XR(t,e){if(e<=0)throw new W(M.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=G_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new W(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new W(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new W(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ey({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ey(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new d1;switch(r.type){case"firstParty":return new p1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=xy.get(n);r&&(H("ComponentProvider","Removing Datastore"),xy.delete(n),r.terminate())}(this),Promise.resolve()}}function ZR(t,e,n,r={}){var s;const i=(t=Gl(t,Nc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Bs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=et.MOCK_USER;else{c=Tb(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new W(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new et(d)}t._authCredentials=new h1(new qx(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new wr(this.firestore,e,this._query)}}class Pt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pt(this.firestore,e,this._key)}}class cr extends wr{constructor(e,n,r){super(e,n,r_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new G(e))}withConverter(e){return new cr(this.firestore,e,this._path)}}function kt(t,e,...n){if(t=it(t),K_("collection","path",e),t instanceof Nc){const r=me.fromString(e,...n);return wy(r),new cr(t,null,r)}{if(!(t instanceof Pt||t instanceof cr))throw new W(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(me.fromString(e,...n));return wy(r),new cr(t.firestore,null,r)}}function eP(t,e,...n){if(t=it(t),arguments.length===1&&(e=Gx.newId()),K_("doc","path",e),t instanceof Nc){const r=me.fromString(e,...n);return _y(r),new Pt(t,null,new G(r))}{if(!(t instanceof Pt||t instanceof cr))throw new W(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(me.fromString(e,...n));return _y(r),new Pt(t.firestore,t instanceof cr?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new R_(this,"async_queue_retry"),this.Vu=()=>{const r=Du();r&&H("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Du();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Du();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new lr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!zo(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw An("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=jf.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Q()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Vf extends Nc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Iy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Iy(e),this._firestoreClient=void 0,await e}}}function tP(t,e){const n=typeof t=="object"?t:rx(),r=typeof t=="string"?t:"(default)",s=sf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Eb("firestore");i&&ZR(s,...i)}return s}function Q_(t){if(t._terminated)throw new W(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||nP(t),t._firestoreClient}function nP(t){var e,n,r;const s=t._freezeSettings(),i=function(c,u,d,m){return new A1(c,u,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,G_(m.experimentalLongPollingOptions),m.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new qR(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gs(Ge.fromBase64String(e))}catch(n){throw new W(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Gs(Ge.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $e(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=/^__.*__$/;class sP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Jr(e,this.data,this.fieldMask,n,this.fieldTransforms):new $o(e,this.data,n,this.fieldTransforms)}}function J_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}class Bf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Bf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Kl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(J_(this.Cu)&&rP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class iP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ec(e)}Qu(e,n,r,s=!1){return new Bf({Cu:e,methodName:n,qu:r,path:$e.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function X_(t){const e=t._freezeSettings(),n=Ec(t._databaseId);return new iP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function oP(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);tw("Data must be an object, but it was:",o,r);const c=Z_(r,o);let u,d;if(i.merge)u=new Bt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const p of i.mergeFields){const g=lP(e,p,n);if(!o.contains(g))throw new W(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);uP(m,g)||m.push(g)}u=new Bt(m),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new sP(new At(c),u,d)}function aP(t,e,n,r=!1){return zf(n,t.Qu(r?4:3,e))}function zf(t,e){if(ew(t=it(t)))return tw("Unsupported field value:",e,t),Z_(t,e);if(t instanceof Y_)return function(r,s){if(!J_(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let u=zf(c,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=it(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Y1(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Oe.fromDate(r);return{timestampValue:Wl(s.serializer,i)}}if(r instanceof Oe){const i=new Oe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wl(s.serializer,i)}}if(r instanceof Ff)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gs)return{bytesValue:w_(s.serializer,r._byteString)};if(r instanceof Pt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:bf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Uf)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return Ef(c.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${bc(r)}`)}(t,e)}function Z_(t,e){const n={};return Kx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ni(t,(r,s)=>{const i=zf(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function ew(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Oe||t instanceof Ff||t instanceof Gs||t instanceof Pt||t instanceof Y_||t instanceof Uf)}function tw(t,e,n){if(!ew(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=bc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function lP(t,e,n){if((e=it(e))instanceof Lf)return e._internalPath;if(typeof e=="string")return nw(t,e);throw Kl("Field path arguments must be of type string or ",t,!1,void 0,n)}const cP=new RegExp("[~\\*/\\[\\]]");function nw(t,e,n){if(e.search(cP)>=0)throw Kl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Lf(...e.split("."))._internalPath}catch{throw Kl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Kl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new W(M.INVALID_ARGUMENT,c+t+u)}function uP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Sc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dP extends rw{data(){return super.data()}}function Sc(t,e){return typeof e=="string"?nw(t,e):e instanceof Lf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $f{}class Wf extends $f{}function tl(t,e,...n){let r=[];e instanceof $f&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Hf).length,c=i.filter(u=>u instanceof Ac).length;if(o>1||o>0&&c>0)throw new W(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Ac extends Wf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ac(e,n,r)}_apply(e){const n=this._parse(e);return sw(e._query,n),new wr(e.firestore,e.converter,Gd(e._query,n))}_parse(e){const n=X_(e.firestore);return function(i,o,c,u,d,m,p){let g;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new W(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){by(p,m);const _=[];for(const S of p)_.push(Ty(u,i,S));g={arrayValue:{values:_}}}else g=Ty(u,i,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||by(p,m),g=aP(c,o,p,m==="in"||m==="not-in");return ke.create(d,m,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function nl(t,e,n){const r=e,s=Sc("where",t);return Ac._create(s,r,n)}class Hf extends $f{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Hf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:qt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const c=i.getFlattenedFilters();for(const u of c)sw(o,u),o=Gd(o,u)}(e._query,n),new wr(e.firestore,e.converter,Gd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qf extends Wf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new qf(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new W(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new W(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bo(i,o)}(e._query,this._field,this._direction);return new wr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new ri(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function rl(t,e="asc"){const n=e,r=Sc("orderBy",t);return qf._create(r,n)}class Gf extends Wf{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Gf(e,n,r)}_apply(e){return new wr(e.firestore,e.converter,Bl(e._query,this._limit,this._limitType))}}function Mu(t){return XR("limit",t),Gf._create("limit",t,"F")}function Ty(t,e,n){if(typeof(n=it(n))=="string"){if(n==="")throw new W(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!s_(e)&&n.indexOf("/")!==-1)throw new W(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(me.fromString(n));if(!G.isDocumentKey(r))throw new W(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qg(t,new G(r))}if(n instanceof Pt)return qg(t,n._key);throw new W(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bc(n)}.`)}function by(t,e){if(!Array.isArray(t)||t.length===0)throw new W(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sw(t,e){const n=function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class fP{convertValue(e,n="none"){switch(Gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Se(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ni(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Se(o.doubleValue));return new Uf(i)}convertGeoPoint(e){return new Ff(Se(e.latitude),Se(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=vf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Eo(e));default:return null}}convertTimestamp(e){const n=fr(e);return new Oe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=me.fromString(e);le(S_(r));const s=new Io(r.get(1),r.get(3)),i=new G(r.popFirst(5));return s.isEqual(n)||An(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pP extends rw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new sl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Sc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class sl extends pP{data(e={}){return super.data(e)}}class gP{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ja(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new sl(this._firestore,this._userDataWriter,r.key,r,new ja(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new sl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ja(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new sl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ja(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,m=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),m=o.indexOf(c.doc.key)),{type:yP(c.type),doc:u,oldIndex:d,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function yP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}class vP extends fP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,n)}}function il(t){t=Gl(t,wr);const e=Gl(t.firestore,Vf),n=Q_(e),r=new vP(e);return hP(t._query),YR(n,t._query).then(s=>new gP(e,r,t,s))}function Er(t,e){const n=Gl(t.firestore,Vf),r=eP(t),s=mP(t.converter,e);return xP(n,[oP(X_(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,wn.exists(!1))]).then(()=>r)}function xP(t,e){return function(r,s){const i=new lr;return r.asyncQueue.enqueueAndForget(async()=>VR(await KR(r),s,i)),i.promise}(Q_(t),e)}(function(e,n=!0){(function(s){ti=s})(Zs),Fs(new zr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new Vf(new f1(r.getProvider("auth-internal")),new y1(r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new W(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Io(d.options.projectId,m)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),ar(Bg,"4.7.3",e),ar(Bg,"4.7.3","esm2017")})();const _P={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0,measurementId:void 0},iw=nx(_P),Da=a1(iw),jt=tP(iw),ow=O.createContext();function ht(){return O.useContext(ow)}function wP({children:t}){const[e,n]=O.useState(null),[r,s]=O.useState(!0);O.useEffect(()=>QS(Da,m=>{n(m),s(!1)}),[]);const u={user:e,signup:async(d,m,p)=>{const g=await $S(Da,d,m);return p&&await qS(g.user,{displayName:p}),g},login:(d,m)=>WS(Da,d,m),logout:()=>YS(Da)};return l.jsx(ow.Provider,{value:u,children:!r&&t})}function EP(){var s;const{user:t,logout:e}=ht(),[n,r]=O.useState(!1);return l.jsxs(l.Fragment,{children:[l.jsx("nav",{className:"bg-white border-b-2 border-emerald-100 sticky top-0 z-50 shadow-lg",children:l.jsx("div",{className:"max-w-7xl mx-auto px-6 py-3",children:l.jsxs("div",{className:"flex items-center justify-between gap-8",children:[l.jsxs(q,{to:"/",className:"flex items-center gap-3 hover:opacity-80 transition-opacity flex-shrink-0",children:[l.jsx("img",{src:"/images/amoma-bot-logo.png",alt:"AMOMA",className:"w-12 h-12 rounded-full border-2 border-emerald-500 shadow-lg",onError:i=>{i.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48"><circle cx="24" cy="24" r="24" fill="%2310b981"/><text x="24" y="30" text-anchor="middle" fill="white" font-size="18" font-weight="bold">A</text></svg>'}}),l.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-emerald-600 to-green-600 bg-clip-text text-transparent whitespace-nowrap",children:"AMOMA"})]}),l.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[!t&&l.jsxs(l.Fragment,{children:[l.jsx(q,{to:"/",className:"text-gray-700 hover:text-emerald-600 font-medium transition-colors text-sm whitespace-nowrap",children:"Home"}),l.jsx(q,{to:"/about",className:"text-gray-700 hover:text-emerald-600 font-medium transition-colors text-sm whitespace-nowrap",children:"About"}),l.jsx(q,{to:"/features",className:"text-gray-700 hover:text-emerald-600 font-medium transition-colors text-sm whitespace-nowrap",children:"Features"}),l.jsx(q,{to:"/resources",className:"text-gray-700 hover:text-emerald-600 font-medium transition-colors text-sm whitespace-nowrap",children:"Resources"}),l.jsx(q,{to:"/login",className:"text-emerald-600 hover:text-emerald-700 font-semibold transition-colors text-sm whitespace-nowrap",children:"Login"}),l.jsx(q,{to:"/signup",className:"bg-gradient-to-r from-emerald-600 to-green-700 text-white px-5 py-2 rounded-lg font-semibold text-sm hover:from-emerald-700 hover:to-green-800 transition-all shadow-lg whitespace-nowrap",children:"Sign Up"})]}),t&&l.jsxs(l.Fragment,{children:[l.jsx(q,{to:"/dashboard",className:"text-gray-700 hover:text-emerald-600 font-medium transition-colors text-sm whitespace-nowrap",children:" Dashboard"}),l.jsx(q,{to:"/chat",className:"text-gray-700 hover:text-emerald-600 font-medium transition-colors text-sm whitespace-nowrap",children:" Chat"}),l.jsx(q,{to:"/assessments",className:"text-gray-700 hover:text-emerald-600 font-medium transition-colors text-sm whitespace-nowrap",children:" Assessments"}),l.jsx(q,{to:"/journal",className:"text-gray-700 hover:text-emerald-600 font-medium transition-colors text-sm whitespace-nowrap",children:" Journal"}),l.jsx(q,{to:"/games",className:"text-gray-700 hover:text-emerald-600 font-medium transition-colors text-sm whitespace-nowrap",children:" Games"}),l.jsx("button",{onClick:()=>r(!0),className:"text-gray-700 hover:text-emerald-600 font-medium transition-colors text-sm whitespace-nowrap",children:" Creators"}),l.jsxs("span",{className:"text-gray-600 text-sm whitespace-nowrap",children:["Hi, ",l.jsx("strong",{className:"text-emerald-600",children:t.displayName||((s=t.email)==null?void 0:s.split("@")[0])}),"!"]}),l.jsx("button",{onClick:e,className:"bg-white text-emerald-600 px-4 py-2 rounded-lg font-semibold text-sm border-2 border-emerald-500 hover:bg-emerald-50 transition-all whitespace-nowrap",children:"Logout"})]})]})]})})}),n&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>r(!1),children:l.jsxs("div",{className:"bg-white rounded-2xl max-w-5xl w-full max-h-[90vh] overflow-y-auto p-10",onClick:i=>i.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-10",children:[l.jsx("h2",{className:"text-4xl font-bold text-gray-900",children:"Platform Creators"}),l.jsx("button",{onClick:()=>r(!1),className:"text-gray-500 hover:text-gray-700 text-4xl leading-none",children:""})]}),l.jsx("div",{className:"mb-12 pb-12 border-b-2 border-gray-200",children:l.jsxs("div",{className:"flex gap-8 items-start",children:[l.jsx("img",{src:"/images/resti_photo.jpg",alt:"Dr. Resti Tito H. Villarino",className:"w-48 h-48 rounded-full object-cover border-4 border-emerald-600 flex-shrink-0 shadow-2xl",onError:i=>i.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="192" height="192"><circle cx="96" cy="96" r="96" fill="%2310b981"/><text x="96" y="116" text-anchor="middle" fill="white" font-size="56" font-weight="bold">RV</text></svg>'}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Resti Tito H. Villarino, Dev.Ed.D, RN, LPT"}),l.jsx("p",{className:"text-gray-700 leading-relaxed mb-4 text-base",children:"Clinical Instructor at the West Visayas State UniversityCollege of Nursing and a Regular Member of the National Research Council of the Philippines (Medical Sciences Division). With over a decade of research, teaching, and clinical experience, his scholarship centers on mental health, well-being, digital health interventions, and climate-related psychosocial resilience."}),l.jsx("p",{className:"text-gray-700 leading-relaxed mb-4 text-base",children:"A recipient of the Canada ASEAN-SEED Research Scholarship and the SSHN Research Mobility Grant (France), Dr. Villarino has authored and reviewed numerous Scopus and Web of Science-indexed publications in collaboration with scholars from Canada, France, and Asia. His studiesparticularly on AI-assisted wellness programs, DASS-21, and PERMA-based interventions, as well as the integration of mental health promotion in higher educationserve as the empirical foundation of AMOMA (Adaptive Multidimensional Optimization for Mental Health & Activity), an AI-enhanced life-saving platform that advances holistic student wellness and clinician-supported digital care."}),l.jsxs("div",{className:"flex gap-4 text-sm",children:[l.jsx("a",{href:"https://orcid.org/0000-0002-5752-1742",target:"_blank",rel:"noopener noreferrer",className:"text-emerald-600 hover:text-emerald-700 font-medium hover:underline",children:"ORCID"}),l.jsx("span",{className:"text-gray-400",children:"|"}),l.jsx("span",{className:"text-gray-600",children:"Scopus: 57303977500"}),l.jsx("span",{className:"text-gray-400",children:"|"}),l.jsx("span",{className:"text-gray-600",children:"ResearcherID: ACU-3465-2022"})]})]})]})}),l.jsx("div",{children:l.jsxs("div",{className:"flex gap-8 items-start",children:[l.jsx("img",{src:"/images/mau_photo.jpg",alt:"Maureen Lorence F. Villarino",className:"w-48 h-48 rounded-full object-cover border-4 border-orange-500 flex-shrink-0 shadow-2xl",onError:i=>i.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="192" height="192"><circle cx="96" cy="96" r="96" fill="%23f97316"/><text x="96" y="116" text-anchor="middle" fill="white" font-size="56" font-weight="bold">MV</text></svg>'}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Maureen Lorence F. Villarino, MA.Ed, RN, LPT"}),l.jsx("p",{className:"text-gray-700 leading-relaxed text-base",children:"Registered Nurse and Licensed Professional Teacher with a background in health, science education, and well-being research. She is a Clinical Instructor at the West Visayas State UniversityCollege of Nursing and an Associate Member of the National Research Council of the Philippines (Medical Sciences Division). Her research work focuses on the intersection of health promotion and health education, serving as a co-researcher in government-funded projects such as the Online Well-Being Development Program for College Students during the COVID-19 Pandemic (DOSTNRCP NSTEP) and the Lifestyle Intervention using the Modified BASNEF Model in Hypertension Management (GAA-funded). As a co-developer of AMOMA (Adaptive Multidimensional Optimization for Mental Health & Activity), she contributes her expertise in health education and evidence-based behavioral interventions to create a holistic, AI-enhanced platform for improving students' mental well-being and resilience."})]})]})})]})})]})}function IP(){return l.jsx("footer",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white py-12",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[l.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-10",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-bold mb-4 text-emerald-400",children:"AMOMA"}),l.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"Evidence-based AI wellness platform for college students worldwide. Combining research excellence with compassionate care."})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold mb-4 text-emerald-400 text-lg",children:"Quick Links"}),l.jsxs("ul",{className:"space-y-2 text-sm",children:[l.jsx("li",{children:l.jsx("a",{href:"/about",className:"text-gray-300 hover:text-emerald-400 transition-colors",children:"About AMOMA"})}),l.jsx("li",{children:l.jsx("a",{href:"/features",className:"text-gray-300 hover:text-emerald-400 transition-colors",children:"Features"})}),l.jsx("li",{children:l.jsx("a",{href:"/resources",className:"text-gray-300 hover:text-emerald-400 transition-colors",children:"Resources"})}),l.jsx("li",{children:l.jsx("a",{href:"/assessments",className:"text-gray-300 hover:text-emerald-400 transition-colors",children:"Assessments"})})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold mb-4 text-orange-400 text-lg",children:" Crisis Support"}),l.jsxs("ul",{className:"space-y-2 text-sm",children:[l.jsxs("li",{className:"text-gray-300",children:[l.jsx("strong",{children:"Emergency:"})," 911"]}),l.jsxs("li",{className:"text-gray-300",children:[l.jsx("strong",{children:"NCMH Crisis:"})," 1553"]}),l.jsxs("li",{className:"text-gray-300",children:[l.jsx("strong",{children:"Crisis Text:"})," HOME to 741741"]}),l.jsxs("li",{className:"text-gray-300",children:[l.jsx("strong",{children:"Suicide Lifeline:"})," 1-800-273-8255"]})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold mb-4 text-emerald-400 text-lg",children:"Support"}),l.jsx("p",{className:"text-gray-300 text-sm mb-3",children:"Available 24/7 for college students worldwide"}),l.jsx("a",{href:"/chat",className:"inline-block bg-emerald-600 hover:bg-emerald-700 text-white px-5 py-2 rounded-lg text-sm font-semibold transition-colors shadow-lg",children:"Chat with AMOMA"})]})]}),l.jsxs("div",{className:"border-t-2 border-gray-700 pt-8",children:[l.jsx("div",{className:"text-center text-sm text-gray-400 mb-6",children:l.jsxs("p",{className:"mb-4 text-gray-300",children:[l.jsx("strong",{className:"text-white",children:"Disclaimer:"})," AMOMA is an educational wellness tool. It is not a substitute for professional medical or mental health care. If you are experiencing a medical emergency, please contact emergency services or a crisis hotline immediately."]})}),l.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 mb-6 border-2 border-gray-700",children:[l.jsx("p",{className:"text-gray-200 mb-2 text-center text-sm",children:l.jsx("strong",{className:"text-emerald-400",children:"Copyright  2025 Resti Tito H. Villarino. All rights reserved."})}),l.jsx("p",{className:"text-gray-400 text-xs leading-relaxed text-center",children:"The content on this website, including text, images, and other materials, is protected by copyright law. No part of this website may be reproduced, distributed, or transmitted in any form or by any means without the prior written permission of the copyright owner."}),l.jsxs("p",{className:"text-gray-400 text-xs mt-3 text-center",children:["For inquiries, contact:"," ",l.jsx("a",{href:"mailto:restitito.villarino@wvsu.edu.ph",className:"text-emerald-400 hover:text-emerald-300 hover:underline",children:"restitito.villarino@wvsu.edu.ph"})]})]})]})]})})}function TP(){const{user:t}=ht();return l.jsxs("div",{className:"min-h-screen",children:[l.jsx("section",{className:"bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50 py-24",children:l.jsx("div",{className:"max-w-6xl mx-auto px-6",children:l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"flex justify-center items-center gap-8 mb-12",children:[l.jsx("img",{src:"/images/developer_logo.png",alt:"Dr. Resti Villarino",className:"w-24 h-24 rounded-full object-cover border-4 border-emerald-600 shadow-2xl hover:scale-105 transition-transform",onError:e=>e.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="96" height="96"><circle cx="48" cy="48" r="48" fill="%2310b981"/><text x="48" y="60" text-anchor="middle" fill="white" font-size="32" font-weight="bold">RV</text></svg>'}),l.jsx("img",{src:"/images/amoma-bot-logo.png",alt:"AMOMA Bot",className:"w-32 h-32 rounded-full object-cover border-4 border-emerald-500 shadow-2xl",onError:e=>e.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><circle cx="64" cy="64" r="64" fill="%2310b981"/><text x="64" y="80" text-anchor="middle" fill="white" font-size="40" font-weight="bold">A</text></svg>'}),l.jsx("img",{src:"/images/developer2_logo.jpg",alt:"Maureen Villarino",className:"w-24 h-24 rounded-full object-cover border-4 border-orange-500 shadow-2xl hover:scale-105 transition-transform",onError:e=>e.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="96" height="96"><circle cx="48" cy="48" r="48" fill="%23f97316"/><text x="48" y="60" text-anchor="middle" fill="white" font-size="32" font-weight="bold">MV</text></svg>'})]}),l.jsx("h1",{className:"text-6xl font-bold text-gray-900 mb-3 tracking-tight",children:"AMOMA"}),l.jsxs("h2",{className:"text-2xl font-semibold text-gray-800 mb-6 leading-relaxed",children:[l.jsx("span",{className:"font-bold text-emerald-600",children:"A"}),"daptive"," ",l.jsx("span",{className:"font-bold text-emerald-600",children:"M"}),"ultidimensional"," ",l.jsx("span",{className:"font-bold text-emerald-600",children:"O"}),"ptimization for"," ",l.jsx("span",{className:"font-bold text-emerald-600",children:"M"}),"ental Health &"," ",l.jsx("span",{className:"font-bold text-emerald-600",children:"A"}),"ctivity"]}),l.jsx("p",{className:"text-lg text-gray-700 mb-10 max-w-3xl mx-auto leading-relaxed",children:"An AI-enhanced wellness platform for college students worldwide, integrating validated mental health assessments (DASS-21, PERMA), lifestyle tracking, therapeutic games, journal analytics, and an empathetic AI support chatbot grounded in evidence-based practice."}),t?l.jsx(q,{to:"/chat",className:"bg-gradient-to-r from-emerald-600 to-green-700 text-white px-10 py-4 rounded-xl font-semibold text-lg hover:from-emerald-700 hover:to-green-800 transition-all shadow-xl inline-block",children:" Chat with AMOMA"}):l.jsxs("div",{className:"flex gap-4 justify-center",children:[l.jsx(q,{to:"/signup",className:"bg-gradient-to-r from-emerald-600 to-green-700 text-white px-10 py-4 rounded-xl font-semibold text-lg hover:from-emerald-700 hover:to-green-800 transition-all shadow-xl hover:shadow-2xl transform hover:scale-105",children:"Get Started Free"}),l.jsx(q,{to:"/about",className:"bg-white text-emerald-600 px-10 py-4 rounded-xl font-semibold text-lg border-2 border-emerald-600 hover:bg-emerald-50 transition-all shadow-lg hover:shadow-xl transform hover:scale-105",children:"Learn More"})]}),l.jsx("p",{className:"text-sm text-gray-600 mt-6",children:"No credit card required  Takes 2 minutes  100% Confidential"})]})})}),l.jsx("section",{className:"py-20 bg-white",children:l.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[l.jsx("h2",{className:"text-4xl font-bold text-center text-gray-900 mb-4",children:"Why Students Choose AMOMA"}),l.jsx("p",{className:"text-center text-gray-600 mb-16 text-lg",children:"Evidence-based tools for holistic wellness"}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 rounded-2xl p-8 shadow-lg hover:shadow-2xl transition-all border-2 border-emerald-100",children:[l.jsx("div",{className:"text-5xl mb-4",children:""}),l.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900",children:"24/7 AI Wellness Companion"}),l.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Empathetic AI trained in CBT, ACT, and mindfulness techniques, providing immediate support when you need it most."})]}),l.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-2xl p-8 shadow-lg hover:shadow-2xl transition-all border-2 border-blue-100",children:[l.jsx("div",{className:"text-5xl mb-4",children:""}),l.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900",children:"Validated Assessments"}),l.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Track mental health (DASS-21), well-being (PERMA), and physical health with clinically validated tools used by professionals worldwide."})]}),l.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-8 shadow-lg hover:shadow-2xl transition-all border-2 border-purple-100",children:[l.jsx("div",{className:"text-5xl mb-4",children:""}),l.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900",children:"Therapeutic Games"}),l.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Evidence-based wellness games designed by mental health professionals to reduce stress and build resilience."})]})]})]})}),l.jsx("section",{className:"bg-gradient-to-r from-emerald-600 via-green-600 to-teal-700 py-20 text-white",children:l.jsxs("div",{className:"max-w-4xl mx-auto text-center px-6",children:[l.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Ready to Start Your Wellness Journey?"}),l.jsx("p",{className:"text-xl mb-8 text-emerald-50",children:"Join thousands of college students worldwide using AMOMA to improve their mental and physical health"}),!t&&l.jsx(q,{to:"/signup",className:"bg-white text-emerald-600 px-10 py-4 rounded-xl font-bold text-lg hover:bg-gray-100 transition-all inline-block shadow-2xl hover:shadow-3xl transform hover:scale-105",children:"Sign Up Now - It's Free"})]})})]})}function bP(){return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50 py-16",children:l.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[l.jsx("h1",{className:"text-5xl font-bold text-gray-900 mb-8 text-center",children:"About AMOMA"}),l.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-xl mb-8 border-2 border-emerald-100",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4 text-emerald-700",children:"Our Mission"}),l.jsxs("p",{className:"text-gray-700 leading-relaxed text-lg",children:[l.jsx("strong",{className:"text-emerald-600",children:"AMOMA"})," is an AI-enhanced wellness platform designed specifically for college students worldwide. We combine evidence-based health guidance with cutting-edge artificial intelligence to support your physical and mental well-being throughout your academic journey."]})]}),l.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-xl mb-8 border-2 border-emerald-100",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 text-emerald-700",children:"Research Foundation"}),l.jsx("p",{className:"text-gray-700 mb-6 text-lg",children:"AMOMA is built upon rigorous scientific research, integrating:"}),l.jsxs("div",{className:"space-y-4 text-gray-700",children:[l.jsxs("div",{className:"flex items-start gap-4 bg-emerald-50 p-4 rounded-xl",children:[l.jsx("span",{className:"text-emerald-600 text-2xl flex-shrink-0 font-bold",children:""}),l.jsxs("p",{className:"leading-relaxed",children:[l.jsx("strong",{children:"DASS-21:"})," Depression, Anxiety and Stress Scale - a validated 21-item assessment tool widely used in clinical and research settings to measure emotional states (Lovibond & Lovibond, 1995)."]})]}),l.jsxs("div",{className:"flex items-start gap-4 bg-blue-50 p-4 rounded-xl",children:[l.jsx("span",{className:"text-blue-600 text-2xl flex-shrink-0 font-bold",children:""}),l.jsxs("p",{className:"leading-relaxed",children:[l.jsx("strong",{children:"PERMA Model:"})," Seligman's (2011) comprehensive well-being framework assessing Positive emotions, Engagement, Relationships, Meaning, and Accomplishment."]})]}),l.jsxs("div",{className:"flex items-start gap-4 bg-purple-50 p-4 rounded-xl",children:[l.jsx("span",{className:"text-purple-600 text-2xl flex-shrink-0 font-bold",children:""}),l.jsxs("p",{className:"leading-relaxed",children:[l.jsx("strong",{children:"Cognitive Behavioral Therapy (CBT):"})," Evidence-based therapeutic techniques proven effective for anxiety and depression (Beck, 2011)."]})]}),l.jsxs("div",{className:"flex items-start gap-4 bg-green-50 p-4 rounded-xl",children:[l.jsx("span",{className:"text-green-600 text-2xl flex-shrink-0 font-bold",children:""}),l.jsxs("p",{className:"leading-relaxed",children:[l.jsx("strong",{children:"Lifestyle Medicine:"})," Integrating physical activity, nutrition, and sleep science for holistic health (Rippe, 2019)."]})]}),l.jsxs("div",{className:"flex items-start gap-4 bg-orange-50 p-4 rounded-xl",children:[l.jsx("span",{className:"text-orange-600 text-2xl flex-shrink-0 font-bold",children:""}),l.jsxs("p",{className:"leading-relaxed",children:[l.jsx("strong",{children:"Digital Health Interventions:"})," AI-assisted wellness programs with clinical oversight, following best practices in e-mental health (Torous et al., 2020)."]})]})]})]}),l.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-xl mb-8 border-2 border-emerald-100",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 text-emerald-700",children:"How AMOMA Works"}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex gap-6 items-start",children:[l.jsx("span",{className:"text-5xl flex-shrink-0",children:"1"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-xl text-gray-900 mb-2",children:"Complete Validated Assessments"}),l.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Take scientifically validated DASS-21, PERMA, and physical health assessments to establish your wellness baseline."})]})]}),l.jsxs("div",{className:"flex gap-6 items-start",children:[l.jsx("span",{className:"text-5xl flex-shrink-0",children:"2"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-xl text-gray-900 mb-2",children:"Receive Evidence-Based Insights"}),l.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Get AI-powered analysis anchored in peer-reviewed research and clinical best practices."})]})]}),l.jsxs("div",{className:"flex gap-6 items-start",children:[l.jsx("span",{className:"text-5xl flex-shrink-0",children:"3"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-xl text-gray-900 mb-2",children:"Track & Improve Your Well-Being"}),l.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Monitor progress through interactive dashboards, journal analytics, and therapeutic games."})]})]})]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-emerald-600 to-green-700 rounded-2xl p-8 shadow-xl text-white text-center",children:[l.jsx("h3",{className:"text-2xl font-bold mb-3",children:"Important Disclaimer"}),l.jsxs("p",{className:"text-emerald-50 leading-relaxed mb-4",children:["AMOMA is an educational wellness tool and is ",l.jsx("strong",{children:"not a substitute for professional medical or mental health care"}),". If you are experiencing a medical emergency, please contact emergency services (dial 911) or the NCMH Crisis Hotline at 1553 immediately."]})]}),l.jsx("div",{className:"text-center mt-10",children:l.jsx(q,{to:"/signup",className:"bg-gradient-to-r from-emerald-600 to-green-700 text-white px-10 py-4 rounded-xl font-bold text-lg hover:from-emerald-700 hover:to-green-800 transition-all shadow-xl inline-block",children:"Start Your Wellness Journey"})})]})})}function NP(){const t=[{icon:"",title:"AI Wellness Chat",description:"Talk to AMOMA, your 24/7 AI wellness companion. Get instant support for stress, anxiety, exercise guidance, nutrition advice, and mental health resources.",features:["Evidence-based responses","Crisis intervention support","Culturally-sensitive advice"]},{icon:"",title:"Mental Health Assessments",description:"Track your mental health with validated tools: DASS-21 for depression, anxiety, and stress; PERMA for overall well-being.",features:["Clinically validated tools","Weekly progress tracking","Visual trend dashboard"]},{icon:"",title:"Physical Health Monitoring",description:"Monitor physical activity levels, nutrition habits, and sleep quality with personalized recommendations.",features:["Activity tracking","Nutrition guidance","Sleep hygiene tips"]},{icon:"",title:"Reflective Journaling",description:"Guided journaling prompts with AI-powered thematic analysis to understand your emotional patterns and progress over time.",features:["Mood tracking","Pattern recognition","Insight generation"]},{icon:"",title:"Wellness Games",description:"Engage with evidence-based therapeutic games designed to reduce stress and improve mental well-being.",features:["Breathing exercises","Gratitude practices","CBT-based activities"]},{icon:"",title:"Privacy & Security",description:"Your data is encrypted and secure. We never share your personal information. Full GDPR and data privacy compliance.",features:["End-to-end encryption","Anonymous research data","You own your data"]}];return l.jsx("div",{className:"min-h-screen gradient-green py-12",children:l.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"AMOMA Features"}),l.jsx("p",{className:"text-xl text-gray-700",children:"Comprehensive wellness support designed specifically for Filipino college students"})]}),l.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:t.map((e,n)=>l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"text-5xl mb-4",children:e.icon}),l.jsx("h3",{className:"text-2xl font-bold mb-3",children:e.title}),l.jsx("p",{className:"text-gray-700 mb-4",children:e.description}),l.jsx("ul",{className:"space-y-2",children:e.features.map((r,s)=>l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-emerald-600",children:""}),l.jsx("span",{className:"text-gray-600",children:r})]},s))})]},n))}),l.jsxs("div",{className:"card mt-12 bg-gradient-to-r from-emerald-50 to-green-50 border-2 border-emerald-200",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:" Evidence-Based Approach"}),l.jsx("p",{className:"text-gray-700 leading-relaxed",children:"AMOMA is grounded in scientific research and clinical best practices. Our interventions are based on:"}),l.jsx("ul",{className:"mt-4 grid md:grid-cols-2 gap-3",children:["WHO Mental Health Guidelines","ACSM Exercise Recommendations","CBT & ACT Therapeutic Techniques","Lifestyle Medicine Principles"].map((e,n)=>l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-emerald-600 font-bold",children:""}),l.jsx("span",{className:"text-gray-700",children:e})]},n))})]})]})})}function SP(){return l.jsx("div",{className:"min-h-screen gradient-green py-12",children:l.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[l.jsx("h1",{className:"text-4xl font-bold text-center text-gray-900 mb-4",children:"Wellness Resources"}),l.jsx("p",{className:"text-center text-gray-700 mb-12",children:"A comprehensive collection of mental health and wellness resources for Filipino college students"}),l.jsxs("div",{className:"card mb-8 bg-red-50 border-2 border-red-200",children:[l.jsx("h2",{className:"text-2xl font-bold text-red-800 mb-4",children:" Crisis Support (24/7)"}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-red-900 mb-2",children:"National Crisis Hotlines"}),l.jsxs("ul",{className:"space-y-2 text-sm",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"NCMH Crisis Hotline:"})," 1553 (24/7, Free)"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Landline:"})," 0917-899-USAP (8727)"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Smart/TNT:"})," 0908-639-2672"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Globe/TM:"})," 0917-899-8727"]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-red-900 mb-2",children:"Emergency Services"}),l.jsxs("ul",{className:"space-y-2 text-sm",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Emergency:"})," 911"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"PNP Hotline:"})," 117"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Red Cross:"})," 143"]})]})]})]}),l.jsxs("p",{className:"mt-4 text-sm text-red-700 italic",children:[l.jsx("strong",{children:"AMOMA"})," is an educational companion, not a substitute for professional care. For emergencies, contact your campus clinic or nearest hospital."]})]}),l.jsxs("div",{className:"card mb-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:" Campus Mental Health Services"}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold mb-2",children:"University of the Philippines"}),l.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Office of Counseling & Guidance"}),l.jsx("p",{className:"text-sm",children:" (02) 8981-8500 loc. 2436"}),l.jsx("p",{className:"text-sm",children:" Mon-Fri: 8am-5pm"})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold mb-2",children:"De La Salle University"}),l.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Counseling and Career Services"}),l.jsx("p",{className:"text-sm",children:" (02) 8524-4611 loc. 112"})]})]}),l.jsx("p",{className:"text-sm text-gray-600 mt-4",children:"Note: Check with your university's guidance office for more information. Most universities offer free counseling services."})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-8",children:[l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-900",children:" Mental Health Topics"}),l.jsxs("ul",{className:"space-y-3",children:[l.jsxs("li",{children:[l.jsx("strong",{className:"text-emerald-600",children:"Stress Management"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Learn techniques to manage academic and personal stress"})]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-emerald-600",children:"Anxiety & Depression"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Understanding symptoms and seeking appropriate help"})]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-emerald-600",children:"Sleep Hygiene"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Establish healthy sleep habits for better mental health"})]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-emerald-600",children:"Building Resilience"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Develop coping strategies for life's challenges"})]})]})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-900",children:" Physical Wellness"}),l.jsxs("ul",{className:"space-y-3",children:[l.jsxs("li",{children:[l.jsx("strong",{className:"text-emerald-600",children:"Exercise Guidelines"}),l.jsx("p",{className:"text-sm text-gray-600",children:"150 minutes moderate activity per week recommended"})]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-emerald-600",children:"Nutrition for Students"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Eating well on a student budget"})]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-emerald-600",children:"Campus Recreation"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Find activities and facilities on your campus"})]}),l.jsxs("li",{children:[l.jsx("strong",{className:"text-emerald-600",children:"Mindfulness & Yoga"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Mind-body practices for holistic wellness"})]})]})]})]}),l.jsxs("div",{className:"card mb-8",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-900",children:" Online Resources"}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-emerald-600 mb-2",children:"Mental Health Philippines"}),l.jsxs("ul",{className:"text-sm space-y-1",children:[l.jsxs("li",{children:[" ",l.jsx("a",{href:"https://doh.gov.ph",className:"text-blue-600 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"DOH Mental Health"})]}),l.jsx("li",{children:" National Center for Mental Health"}),l.jsx("li",{children:" MindNation - Online Therapy"})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-emerald-600 mb-2",children:"Global Resources"}),l.jsxs("ul",{className:"text-sm space-y-1",children:[l.jsx("li",{children:" WHO Mental Health"}),l.jsx("li",{children:" NIMH - Research & Info"}),l.jsx("li",{children:" Headspace - Meditation App"})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-emerald-600 mb-2",children:"Student-Focused"}),l.jsxs("ul",{className:"text-sm space-y-1",children:[l.jsx("li",{children:" Active Minds"}),l.jsx("li",{children:" JED Foundation"}),l.jsx("li",{children:" The Steve Fund"})]})]})]})]}),l.jsxs("div",{className:"card bg-gradient-to-r from-emerald-50 to-green-50",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-900",children:" Daily Self-Care Tips"}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold mb-2 text-emerald-700",children:"Morning Routine"}),l.jsxs("ul",{className:"text-sm space-y-1 text-gray-700",children:[l.jsx("li",{children:" Wake at consistent time"}),l.jsx("li",{children:" Drink water"}),l.jsx("li",{children:" 5-minute stretching"}),l.jsx("li",{children:" Healthy breakfast"})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold mb-2 text-emerald-700",children:"During the Day"}),l.jsxs("ul",{className:"text-sm space-y-1 text-gray-700",children:[l.jsx("li",{children:" Take study breaks"}),l.jsx("li",{children:" Stay hydrated"}),l.jsx("li",{children:" Connect with friends"}),l.jsx("li",{children:" Move your body"})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold mb-2 text-emerald-700",children:"Evening Routine"}),l.jsxs("ul",{className:"text-sm space-y-1 text-gray-700",children:[l.jsx("li",{children:" No screens before bed"}),l.jsx("li",{children:" Reflect on gratitude"}),l.jsx("li",{children:" Prepare for tomorrow"}),l.jsx("li",{children:" 7-9 hours sleep"})]})]})]})]})]})})}function AP(){const[t,e]=O.useState(""),[n,r]=O.useState(""),[s,i]=O.useState(""),[o,c]=O.useState(!1),{login:u}=ht(),d=Do(),m=async p=>{p.preventDefault();try{i(""),c(!0),await u(t,n),d("/dashboard")}catch{i("Failed to log in. Please check your credentials.")}finally{c(!1)}};return l.jsx("div",{className:"min-h-screen gradient-green flex items-center justify-center py-12 px-4",children:l.jsxs("div",{className:"max-w-md w-full",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("img",{src:"/images/amoma-bot-logo.png",alt:"AMOMA",className:"w-20 h-20 rounded-full mx-auto mb-4 border-4 border-emerald-500 shadow-xl",onError:p=>p.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80"><circle cx="40" cy="40" r="40" fill="%2310b981"/><text x="40" y="50" text-anchor="middle" fill="white" font-size="28" font-weight="bold">A</text></svg>'}),l.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Welcome Back!"}),l.jsx("p",{className:"text-gray-600 mt-2",children:"Continue your wellness journey"})]}),l.jsxs("div",{className:"card",children:[s&&l.jsx("div",{className:"bg-red-50 border-2 border-red-200 text-red-700 px-4 py-3 rounded-xl mb-4",children:s}),l.jsxs("form",{onSubmit:m,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),l.jsx("input",{type:"email",value:t,onChange:p=>e(p.target.value),className:"input-field",placeholder:"your.email@example.com",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),l.jsx("input",{type:"password",value:n,onChange:p=>r(p.target.value),className:"input-field",placeholder:"",required:!0})]}),l.jsx("button",{type:"submit",disabled:o,className:"w-full btn-primary py-3 text-lg",children:o?" Logging in...":" Sign In"})]}),l.jsxs("p",{className:"text-center text-gray-600 mt-6",children:["New to AMOMA?"," ",l.jsx(q,{to:"/signup",className:"text-emerald-600 hover:text-emerald-700 font-semibold",children:"Create Account"})]})]})]})})}function CP(){const[t,e]=O.useState(""),[n,r]=O.useState(""),[s,i]=O.useState(""),[o,c]=O.useState(""),[u,d]=O.useState(""),[m,p]=O.useState(!1),{signup:g}=ht(),_=Do(),S=async A=>{if(A.preventDefault(),s!==o)return d("Passwords do not match");if(s.length<6)return d("Password must be at least 6 characters");try{d(""),p(!0),await g(n,s,t),_("/dashboard")}catch(P){P.code==="auth/email-already-in-use"?d("This email is already registered. Please login instead."):d("Failed to create account. Please try again.")}finally{p(!1)}};return l.jsx("div",{className:"min-h-screen gradient-green flex items-center justify-center py-12 px-4",children:l.jsxs("div",{className:"max-w-md w-full",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("img",{src:"/images/amoma-bot-logo.png",alt:"AMOMA",className:"w-20 h-20 rounded-full mx-auto mb-4 border-4 border-emerald-500 shadow-xl",onError:A=>A.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80"><circle cx="40" cy="40" r="40" fill="%2310b981"/><text x="40" y="50" text-anchor="middle" fill="white" font-size="28" font-weight="bold">A</text></svg>'}),l.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Join AMOMA"}),l.jsx("p",{className:"text-gray-600 mt-2",children:"Start your wellness journey today"})]}),l.jsxs("div",{className:"card",children:[u&&l.jsx("div",{className:"bg-red-50 border-2 border-red-200 text-red-700 px-4 py-3 rounded-xl mb-4",children:u}),l.jsxs("form",{onSubmit:S,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),l.jsx("input",{type:"text",value:t,onChange:A=>e(A.target.value),className:"input-field",placeholder:"Juan Dela Cruz",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),l.jsx("input",{type:"email",value:n,onChange:A=>r(A.target.value),className:"input-field",placeholder:"your.email@example.com",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),l.jsx("input",{type:"password",value:s,onChange:A=>i(A.target.value),className:"input-field",placeholder:"At least 6 characters",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),l.jsx("input",{type:"password",value:o,onChange:A=>c(A.target.value),className:"input-field",placeholder:"Re-enter password",required:!0})]}),l.jsx("button",{type:"submit",disabled:m,className:"w-full btn-primary py-3 text-lg",children:m?" Creating Account...":" Create Account"})]}),l.jsxs("p",{className:"text-center text-gray-600 mt-6",children:["Already have an account?"," ",l.jsx(q,{to:"/login",className:"text-emerald-600 hover:text-emerald-700 font-semibold",children:"Sign In"})]})]})]})})}function RP(){var P,T,v,E;const{user:t}=ht(),[e,n]=O.useState([]),[r,s]=O.useState([]),[i,o]=O.useState([]),[c,u]=O.useState(!0),[d,m]=O.useState(null),p=(t==null?void 0:t.displayName)||((P=t==null?void 0:t.email)==null?void 0:P.split("@")[0])||"User";O.useEffect(()=>{g()},[t]);const g=async()=>{if(t)try{const R=tl(kt(jt,"assessments"),nl("userId","==",t.uid),rl("completedAt","desc"),Mu(10)),U=(await il(R)).docs.map(ye=>{var Me;return{id:ye.id,...ye.data(),completedAt:(Me=ye.data().completedAt)==null?void 0:Me.toDate()}});n(U);const I=U.find(ye=>ye.type==="dass21"),x=U.find(ye=>ye.type==="perma"),w=U.find(ye=>ye.type==="physical");m({dass21:I==null?void 0:I.scores,perma:x==null?void 0:x.scores,physical:w==null?void 0:w.scores});const b=tl(kt(jt,"journalEntries"),nl("userId","==",t.uid),rl("createdAt","desc"),Mu(5)),k=(await il(b)).docs.map(ye=>{var Me;return{id:ye.id,...ye.data(),createdAt:(Me=ye.data().createdAt)==null?void 0:Me.toDate()}});s(k);const N=tl(kt(jt,"gameEntries"),nl("userId","==",t.uid),rl("createdAt","desc"),Mu(10)),sn=(await il(N)).docs.map(ye=>{var Me;return{id:ye.id,...ye.data(),createdAt:(Me=ye.data().createdAt)==null?void 0:Me.toDate()}});o(sn)}catch(R){console.error("Error loading dashboard:",R)}finally{u(!1)}},_=R=>R?new Date(R).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",S=R=>({happy:"",calm:"",sad:"",anxious:"",frustrated:""})[R]||"",A=R=>({gratitude:"",mandala:"",breathing:"","body-scan":"","worry-tree":""})[R]||"";return c?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-20 w-20 border-b-4 border-emerald-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600 font-semibold text-lg",children:"Loading your wellness dashboard..."})]})}):l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50 py-10 px-4",children:l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsxs("div",{className:"mb-10",children:[l.jsx("h1",{className:"text-5xl font-bold text-gray-900 mb-3",children:"Health & Wellness Dashboard"}),l.jsxs("p",{className:"text-gray-600 text-lg",children:["Welcome back, ",l.jsx("strong",{className:"text-emerald-600",children:p}),"!  Here's your wellness overview"]})]}),d&&(d.dass21||d.perma||d.physical)&&l.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-xl mb-8 border-2 border-emerald-200",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Latest Assessment Scores"}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[d.dass21&&l.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border-2 border-blue-200",children:[l.jsx("h3",{className:"font-bold text-blue-900 mb-3 text-lg",children:"DASS-21"}),l.jsxs("div",{className:"space-y-2 text-sm",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Depression:"})," ",d.dass21.depression]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Anxiety:"})," ",d.dass21.anxiety]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Stress:"})," ",d.dass21.stress]})]})]}),d.perma&&l.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 rounded-xl p-6 border-2 border-cyan-200",children:[l.jsx("h3",{className:"font-bold text-cyan-900 mb-3 text-lg",children:"PERMA Well-Being"}),l.jsxs("div",{className:"space-y-2 text-sm",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Overall:"})," ",(T=d.perma.overall)==null?void 0:T.toFixed(2)]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Positive:"})," ",(v=d.perma.positive)==null?void 0:v.toFixed(2)]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Engagement:"})," ",(E=d.perma.engagement)==null?void 0:E.toFixed(2)]})]})]}),d.physical&&l.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-6 border-2 border-green-200",children:[l.jsx("h3",{className:"font-bold text-green-900 mb-3 text-lg",children:"Physical Health"}),l.jsxs("div",{className:"space-y-2 text-sm",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Total:"})," ",Math.round(d.physical.total),"/100"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Exercise:"})," ",Math.round(d.physical.exercise),"/100"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Nutrition:"})," ",Math.round(d.physical.nutrition),"/100"]})]})]})]})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-8",children:[l.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border-2 border-emerald-100",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:" Recent Assessments"}),l.jsx(q,{to:"/assessments",className:"text-emerald-600 hover:text-emerald-700 font-semibold text-sm",children:"View All "})]}),e.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("p",{className:"text-gray-500 mb-4",children:"No assessments completed yet"}),l.jsx(q,{to:"/assessments",className:"bg-gradient-to-r from-emerald-600 to-green-700 text-white px-6 py-3 rounded-xl font-semibold hover:from-emerald-700 hover:to-green-800 transition-all inline-block shadow-lg",children:"Take Your First Assessment"})]}):l.jsx("div",{className:"space-y-3",children:e.map(R=>{var V;return l.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-4 hover:border-emerald-300 transition-all hover:shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:(V=R.type)==null?void 0:V.toUpperCase()}),l.jsx("span",{className:"text-xs text-gray-500",children:_(R.completedAt)})]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Completed"})]},R.id)})})]}),l.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border-2 border-emerald-100",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:" Recent Journal Entries"}),l.jsx(q,{to:"/journal",className:"text-emerald-600 hover:text-emerald-700 font-semibold text-sm",children:"View All "})]}),r.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("p",{className:"text-gray-500 mb-4",children:"No journal entries yet"}),l.jsx(q,{to:"/journal",className:"bg-gradient-to-r from-emerald-600 to-green-700 text-white px-6 py-3 rounded-xl font-semibold hover:from-emerald-700 hover:to-green-800 transition-all inline-block shadow-lg",children:"Start Journaling"})]}):l.jsx("div",{className:"space-y-3",children:r.map(R=>l.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-4 hover:border-emerald-300 transition-all hover:shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("span",{className:"text-2xl",children:S(R.mood)}),l.jsx("div",{className:"flex-1",children:l.jsx("p",{className:"text-xs font-semibold text-gray-900",children:_(R.createdAt)})})]}),l.jsx("p",{className:"text-gray-700 text-sm line-clamp-2",children:R.content})]},R.id))})]})]}),i.length>0&&l.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl mb-8 border-2 border-emerald-100",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:" Recent Wellness Games"}),l.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:i.map(R=>{var V;return l.jsx("div",{className:"border-2 border-gray-200 rounded-xl p-4 hover:border-emerald-300 transition-all",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"text-3xl",children:A(R.game)}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-bold text-gray-900 mb-1",children:(V=R.game)==null?void 0:V.replace("-"," ").toUpperCase()}),l.jsx("p",{className:"text-xs text-gray-500 mb-2",children:_(R.createdAt)}),R.entry&&l.jsxs("p",{className:"text-sm text-gray-700 italic line-clamp-2",children:['"',R.entry,'"']}),R.reflection&&l.jsxs("p",{className:"text-sm text-gray-700 italic line-clamp-2",children:['"',R.reflection,'"']}),R.worry&&l.jsxs("p",{className:"text-sm text-gray-700 italic line-clamp-2",children:['Worry: "',R.worry,'"']})]})]})},R.id)})})]}),l.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-xl border-2 border-emerald-100",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:" Quick Actions"}),l.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[l.jsxs(q,{to:"/chat",className:"bg-gradient-to-br from-emerald-500 to-green-600 text-white p-6 rounded-xl hover:shadow-2xl transition-all text-center group transform hover:scale-105",children:[l.jsx("div",{className:"text-5xl mb-3 group-hover:scale-110 transition-transform",children:""}),l.jsx("h3",{className:"font-bold text-lg",children:"Chat with AMOMA"})]}),l.jsxs(q,{to:"/assessments",className:"bg-gradient-to-br from-blue-500 to-indigo-600 text-white p-6 rounded-xl hover:shadow-2xl transition-all text-center group transform hover:scale-105",children:[l.jsx("div",{className:"text-5xl mb-3 group-hover:scale-110 transition-transform",children:""}),l.jsx("h3",{className:"font-bold text-lg",children:"Take Assessment"})]}),l.jsxs(q,{to:"/journal",className:"bg-gradient-to-br from-purple-500 to-pink-600 text-white p-6 rounded-xl hover:shadow-2xl transition-all text-center group transform hover:scale-105",children:[l.jsx("div",{className:"text-5xl mb-3 group-hover:scale-110 transition-transform",children:""}),l.jsx("h3",{className:"font-bold text-lg",children:"Write Journal"})]}),l.jsxs(q,{to:"/games",className:"bg-gradient-to-br from-orange-500 to-red-600 text-white p-6 rounded-xl hover:shadow-2xl transition-all text-center group transform hover:scale-105",children:[l.jsx("div",{className:"text-5xl mb-3 group-hover:scale-110 transition-transform",children:""}),l.jsx("h3",{className:"font-bold text-lg",children:"Play Games"})]})]})]})]})})}const PP=void 0;async function kP(t){const e=`You are AMOMA, a warm and empathetic AI wellness companion for college students. You provide evidence-based guidance using CBT, mindfulness, and lifestyle medicine.

CRITICAL FORMATTING RULES:
- NEVER use asterisks (**) for bold text
- NEVER use markdown formatting
- Use plain text only
- Use numbered lists with actual numbers (1., 2., 3.)
- Use bullet points with simple dashes (-)

RESPONSE STYLE:
- Be warm, empathetic, and conversational
- Use simple language, avoid medical jargon
- Give practical, actionable advice
- Validate feelings before offering solutions
- Keep responses under 200 words

TOPICS YOU HELP WITH:
- Stress, anxiety, depression
- Sleep problems
- Study strategies and focus
- Exercise and nutrition
- Relationships

IMPORTANT:
- Start with empathy and validation
- If serious crisis, recommend NCMH hotline: 1553
- You're supportive but not a replacement for therapy`;try{const n=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${PP}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"system",content:e},...t],temperature:.7,max_tokens:500})});if(!n.ok)throw new Error("API request failed");return(await n.json()).choices[0].message.content}catch(n){console.error("OpenAI API Error:",n);const r=t[t.length-1].content.toLowerCase();return r.includes("sad")||r.includes("depressed")?`I hear that you're feeling down, and I want you to know those feelings are completely valid. It takes courage to share that.

Here are some things that might help right now:

1. Reach out to someone you trust - a friend, family member, or counselor
2. Try a 10-minute walk outside - movement and fresh air can help lift mood
3. Do one small thing you enjoy today, even if it's just listening to music
4. Practice self-compassion - be as kind to yourself as you would to a friend

If these feelings have been lasting more than 2 weeks, I really encourage you to talk with a counselor. The NCMH Crisis Hotline (1553) is available 24/7 if you need immediate support.

What's one small thing you could do for yourself today?`:r.includes("stress")||r.includes("anxious")||r.includes("overwhelm")?`I understand you're feeling stressed. Let's work on bringing that stress level down together.

Quick relief (try right now):
1. Take 5 deep breaths - breathe in for 4 seconds, hold for 4, breathe out for 6
2. Close your eyes and rest for 60 seconds
3. Drink a glass of water - dehydration affects mood
4. Step outside for 2 minutes if you can

For managing stress ongoing:
- Break tasks into smaller, manageable steps
- Prioritize - what's truly urgent vs what can wait?
- Take 5-minute breaks every hour when studying
- Talk to someone about how you're feeling

What's the main thing stressing you right now? Let's break it down together.`:r.includes("sleep")||r.includes("insomnia")||r.includes("tired")?`Sleep issues can really affect everything. Let's work on improving your sleep quality.

Tonight, try these:
1. No screens 30 minutes before bed
2. Keep your room cool and dark
3. Try deep breathing while lying in bed
4. Go to bed at the same time each night

Build better sleep habits:
- Wake up at the same time daily (yes, even weekends)
- Get morning sunlight exposure
- Avoid caffeine after 2pm
- Exercise during the day, not before bed

How many hours are you currently sleeping? Let's set a realistic sleep goal together.`:r.includes("focus")||r.includes("concentrate")||r.includes("distracted")?`Difficulty focusing is really common, especially when stressed. Let's tackle this together.

Immediate strategies:
1. Remove all distractions - phone away, close extra browser tabs
2. Try Pomodoro Technique: 25 minutes focused work, 5 minute break
3. Start with the easiest task to build momentum
4. Focus on just one thing at a time

Check these factors affecting focus:
- Sleep: Are you getting 7-9 hours?
- Nutrition: Did you eat recently?
- Environment: Is your study space comfortable and quiet?
- Stress: High anxiety directly impacts concentration

What are you trying to focus on right now? I'm here to help.`:`I'm here to support you. I want to help, so could you tell me more about what you're experiencing?

Whether it's:
- Stress or anxiety
- Sleep problems
- Difficulty concentrating
- Relationship issues
- Physical health concerns
- Or anything else on your mind

I'm here to listen and provide evidence-based guidance. What would be most helpful to discuss?`}}function jP(){var p;const{user:t}=ht(),[e,n]=O.useState([]),[r,s]=O.useState(""),[i,o]=O.useState(!1),c=O.useRef(null),u=(t==null?void 0:t.displayName)||((p=t==null?void 0:t.email)==null?void 0:p.split("@")[0])||"there";O.useEffect(()=>{n([{role:"assistant",content:`Hi ${u}! I'm AMOMA, your AI wellness companion. I'm here to support you with evidence-based guidance for mental health, physical wellness, and academic success.

 How can I help you today?`}])},[u]),O.useEffect(()=>{d()},[e]);const d=()=>{var g;(g=c.current)==null||g.scrollIntoView({behavior:"smooth"})},m=async g=>{if(g.preventDefault(),!r.trim()||i)return;const _={role:"user",content:r};n(S=>[...S,_]),s(""),o(!0);try{const S=[...e,_].map(P=>({role:P.role,content:P.content})),A=await kP(S);n(P=>[...P,{role:"assistant",content:A}])}catch(S){console.error("Chat error:",S),n(A=>[...A,{role:"assistant",content:"I'm here to support you. Could you tell me more about what you're experiencing? Whether it's stress, sleep issues, concentration problems, or anything else - I'm here to listen and provide evidence-based guidance."}])}finally{o(!1)}};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50 py-8 px-4",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx("div",{className:"bg-white rounded-2xl p-6 mb-6 shadow-xl border-2 border-emerald-200",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("img",{src:"/images/amoma-bot-logo.png",alt:"AMOMA",className:"w-16 h-16 rounded-full border-4 border-emerald-500 shadow-lg",onError:g=>{g.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64"><circle cx="32" cy="32" r="32" fill="%2310b981"/><text x="32" y="40" text-anchor="middle" fill="white" font-size="24" font-weight="bold">A</text></svg>'}}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Chat with AMOMA"}),l.jsx("p",{className:"text-gray-600",children:"Your 24/7 AI wellness companion "})]})]})}),l.jsx("div",{className:"bg-white rounded-2xl p-6 h-[500px] overflow-y-auto mb-6 shadow-xl border-2 border-emerald-200",children:l.jsxs("div",{className:"space-y-4",children:[e.map((g,_)=>l.jsxs("div",{className:`flex gap-3 ${g.role==="user"?"justify-end":"justify-start"}`,children:[g.role==="assistant"&&l.jsx("img",{src:"/images/amoma-bot-logo.png",alt:"AMOMA",className:"w-10 h-10 rounded-full border-2 border-emerald-500 flex-shrink-0 shadow-md",onError:S=>{S.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40"><circle cx="20" cy="20" r="20" fill="%2310b981"/><text x="20" y="26" text-anchor="middle" fill="white" font-size="16" font-weight="bold">A</text></svg>'}}),l.jsx("div",{className:`max-w-[70%] rounded-2xl p-4 ${g.role==="user"?"bg-gradient-to-r from-emerald-500 to-green-600 text-white":"bg-gray-100 text-gray-900"}`,children:l.jsx("p",{className:"whitespace-pre-wrap leading-relaxed",children:g.content})})]},_)),i&&l.jsxs("div",{className:"flex gap-3",children:[l.jsx("img",{src:"/images/amoma-bot-logo.png",alt:"AMOMA",className:"w-10 h-10 rounded-full border-2 border-emerald-500 shadow-md",onError:g=>{g.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40"><circle cx="20" cy="20" r="20" fill="%2310b981"/><text x="20" y="26" text-anchor="middle" fill="white" font-size="16" font-weight="bold">A</text></svg>'}}),l.jsx("div",{className:"bg-gray-100 rounded-2xl p-4",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-bounce"}),l.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),l.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]})})]}),l.jsx("div",{ref:c})]})}),l.jsxs("form",{onSubmit:m,className:"bg-white rounded-2xl p-6 shadow-xl border-2 border-emerald-200",children:[l.jsxs("div",{className:"flex gap-3",children:[l.jsx("input",{type:"text",value:r,onChange:g=>s(g.target.value),placeholder:"Type your message... (Press Enter to send)",disabled:i,className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-200 transition-all"}),l.jsx("button",{type:"submit",disabled:i||!r.trim(),className:"bg-gradient-to-r from-emerald-600 to-green-700 text-white px-8 py-3 rounded-xl font-semibold hover:from-emerald-700 hover:to-green-800 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:"Send"})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-3",children:" AMOMA provides educational support, not medical advice. For emergencies, call NCMH: 1553"})]}),l.jsxs("div",{className:"bg-red-50 rounded-2xl p-6 mt-6 border-2 border-red-200 shadow-xl",children:[l.jsx("h3",{className:"font-bold text-red-800 mb-3 text-lg",children:" Mental Health Crisis Support - Philippines"}),l.jsx("p",{className:"text-sm text-red-700 mb-3",children:l.jsx("strong",{children:"If you're in crisis, please reach out immediately:"})}),l.jsxs("ul",{className:"text-sm text-red-700 space-y-2",children:[l.jsxs("li",{children:[" ",l.jsx("strong",{children:"NCMH Crisis Hotline:"})," 1553 (24/7, Free)"]}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Landline:"})," 0917-899-USAP (8727)"]}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Smart/TNT:"})," 0908-639-2672"]}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Globe/TM:"})," 0917-899-8727"]})]}),l.jsx("p",{className:"text-xs text-red-600 mt-3 italic",children:"AMOMA is an educational companion, not a substitute for professional care. For emergencies, contact your campus clinic or nearest hospital."})]})]})})}const ss=[{id:1,text:"I couldn't seem to experience any positive feeling at all",category:"depression"},{id:2,text:"I was aware of dryness of my mouth",category:"anxiety"},{id:3,text:"I found it hard to wind down",category:"stress"},{id:4,text:"I had difficulty in breathing (e.g., excessively rapid breathing, breathlessness)",category:"anxiety"},{id:5,text:"I found it difficult to work up the initiative to do things",category:"depression"},{id:6,text:"I tended to over-react to situations",category:"stress"},{id:7,text:"I experienced trembling (e.g., in the hands)",category:"anxiety"},{id:8,text:"I felt that I was using a lot of nervous energy",category:"stress"},{id:9,text:"I was worried about situations in which I might panic and make a fool of myself",category:"anxiety"},{id:10,text:"I felt that I had nothing to look forward to",category:"depression"},{id:11,text:"I found myself getting agitated",category:"stress"},{id:12,text:"I found it difficult to relax",category:"stress"},{id:13,text:"I felt down-hearted and blue",category:"depression"},{id:14,text:"I was intolerant of anything that kept me from getting on with what I was doing",category:"stress"},{id:15,text:"I felt I was close to panic",category:"anxiety"},{id:16,text:"I was unable to become enthusiastic about anything",category:"depression"},{id:17,text:"I felt I wasn't worth much as a person",category:"depression"},{id:18,text:"I felt that I was rather touchy",category:"stress"},{id:19,text:"I was aware of the action of my heart in the absence of physical exertion",category:"anxiety"},{id:20,text:"I felt scared without any good reason",category:"anxiety"},{id:21,text:"I felt that life was meaningless",category:"depression"}],DP=[{value:0,label:"Did not apply to me at all"},{value:1,label:"Applied to me to some degree, or some of the time"},{value:2,label:"Applied to me to a considerable degree, or a good part of the time"},{value:3,label:"Applied to me very much, or most of the time"}];function OP(){const{user:t}=ht();Do();const[e,n]=O.useState(0),[r,s]=O.useState({}),[i,o]=O.useState(!1),[c,u]=O.useState(null),d=_=>{const S={...r,[e]:_};s(S),e<ss.length-1?n(e+1):m(S)},m=async _=>{let S=0,A=0,P=0;ss.forEach((v,E)=>{const R=_[E]||0;v.category==="depression"&&(S+=R),v.category==="anxiety"&&(A+=R),v.category==="stress"&&(P+=R)}),S*=2,A*=2,P*=2;const T={depression:S,anxiety:A,stress:P};u(T),o(!0);try{await Er(kt(jt,"assessments"),{userId:t.uid,userEmail:t.email,type:"dass21",scores:T,completedAt:new Date})}catch(v){console.error("Error saving assessment:",v)}},p=(_,S)=>S==="depression"?_<=9?{level:"Normal",color:"text-green-600"}:_<=13?{level:"Mild",color:"text-yellow-600"}:_<=20?{level:"Moderate",color:"text-orange-600"}:_<=27?{level:"Severe",color:"text-red-600"}:{level:"Extremely Severe",color:"text-red-800"}:S==="anxiety"?_<=7?{level:"Normal",color:"text-green-600"}:_<=9?{level:"Mild",color:"text-yellow-600"}:_<=14?{level:"Moderate",color:"text-orange-600"}:_<=19?{level:"Severe",color:"text-red-600"}:{level:"Extremely Severe",color:"text-red-800"}:_<=14?{level:"Normal",color:"text-green-600"}:_<=18?{level:"Mild",color:"text-yellow-600"}:_<=25?{level:"Moderate",color:"text-orange-600"}:_<=33?{level:"Severe",color:"text-red-600"}:{level:"Extremely Severe",color:"text-red-800"},g=(e+1)/ss.length*100;if(i&&c){const _=p(c.depression,"depression"),S=p(c.anxiety,"anxiety"),A=p(c.stress,"stress");return l.jsx("div",{className:"min-h-screen gradient-green py-12 px-4",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx(q,{to:"/assessments",className:"text-emerald-600 hover:text-emerald-700 font-medium mb-6 inline-block",children:" Back to Assessments"}),l.jsxs("div",{className:"card mb-8 text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-emerald-500 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx("span",{className:"text-4xl",children:""})}),l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Assessment Complete!"}),l.jsx("p",{className:"text-gray-600",children:"Here are your DASS-21 results for the past 7 days"})]}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[l.jsxs("div",{className:"card border-l-4 border-blue-500",children:[l.jsx("h3",{className:"text-sm text-gray-600 mb-1",children:"DEPRESSION"}),l.jsx("p",{className:"text-4xl font-bold text-gray-900 mb-2",children:c.depression}),l.jsx("p",{className:`text-lg font-semibold ${_.color}`,children:_.level})]}),l.jsxs("div",{className:"card border-l-4 border-yellow-500",children:[l.jsx("h3",{className:"text-sm text-gray-600 mb-1",children:"ANXIETY"}),l.jsx("p",{className:"text-4xl font-bold text-gray-900 mb-2",children:c.anxiety}),l.jsx("p",{className:`text-lg font-semibold ${S.color}`,children:S.level})]}),l.jsxs("div",{className:"card border-l-4 border-purple-500",children:[l.jsx("h3",{className:"text-sm text-gray-600 mb-1",children:"STRESS"}),l.jsx("p",{className:"text-4xl font-bold text-gray-900 mb-2",children:c.stress}),l.jsx("p",{className:`text-lg font-semibold ${A.color}`,children:A.level})]})]}),l.jsxs("div",{className:"card bg-blue-50 border-2 border-blue-200 mb-8",children:[l.jsx("h3",{className:"font-bold text-lg mb-2 text-blue-900",children:" What do these scores mean?"}),l.jsx("p",{className:"text-gray-700 mb-4",children:"These scores indicate your level of distress over the past 7 days. Higher scores suggest you may benefit from additional support."}),l.jsxs("div",{className:"space-y-2 text-sm",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Depression:"})," 0-9 Normal  10-13 Mild  14-20 Moderate  21-27 Severe  28+ Extremely Severe"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Anxiety:"})," 0-7 Normal  8-9 Mild  10-14 Moderate  15-19 Severe  20+ Extremely Severe"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Stress:"})," 0-14 Normal  15-18 Mild  19-25 Moderate  26-33 Severe  34+ Extremely Severe"]})]})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx(q,{to:"/dashboard",className:"btn-primary flex-1 text-center",children:"Continue to Dashboard"}),l.jsx(q,{to:"/assessments",className:"btn-secondary flex-1 text-center",children:"Take Another Assessment"})]})]})})}return l.jsx("div",{className:"min-h-screen gradient-green py-12 px-4",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx(q,{to:"/assessments",className:"text-emerald-600 hover:text-emerald-700 font-medium mb-6 inline-block",children:" Back to Assessments"}),l.jsxs("div",{className:"card mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"DASS-21 Assessment"}),l.jsxs("p",{className:"text-gray-600 mb-6",children:["Please read each statement and select the response that indicates how much the statement applied to you ",l.jsx("strong",{children:"over the past 7 days"}),". There are no right or wrong answers."]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[l.jsx("span",{children:"Progress"}),l.jsxs("span",{children:[e+1," / ",ss.length]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:l.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-green-600 h-3 rounded-full transition-all duration-300",style:{width:`${g}%`}})})]}),l.jsxs("div",{className:"card bg-blue-50 border-2 border-blue-200 mb-6",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-2",children:" Score Interpretation:"}),l.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Depression:"})," 0-9 Normal  10-13 Mild  14-20 Moderate  21+ Severe"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Anxiety:"})," 0-7 Normal  8-9 Mild  10-14 Moderate  15+ Severe"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Stress:"})," 0-14 Normal  15-18 Mild  19-25 Moderate  26+ Severe"]})]})]})]}),l.jsxs("div",{className:"card mb-6",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500 text-white flex items-center justify-center font-bold text-lg",children:e+1}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-1",children:ss[e].category.toUpperCase()}),l.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Over the past 7 days, ",ss[e].text.toLowerCase()]})]})]}),l.jsx("div",{className:"space-y-3",children:DP.map(_=>l.jsx("button",{onClick:()=>d(_.value),className:"w-full p-4 text-left border-2 border-gray-200 rounded-xl hover:border-emerald-500 hover:bg-emerald-50 transition-all",children:l.jsx("p",{className:"font-medium text-gray-900",children:_.label})},_.value))})]}),l.jsx("div",{className:"text-center text-sm text-gray-600",children:l.jsx("p",{children:" Your responses will be saved locally and securely"})})]})})}const is=[{id:1,text:"In general, how often did you feel joyful?",domain:"positive"},{id:2,text:"In general, how often did you feel positive?",domain:"positive"},{id:3,text:"In general, how often did you feel contented?",domain:"positive"},{id:4,text:"In general, to what extent did you feel excited and interested in things?",domain:"engagement"},{id:5,text:"In general, to what extent did you lose track of time while doing something you enjoy?",domain:"engagement"},{id:6,text:"In general, to what extent did you become absorbed in what you were doing?",domain:"engagement"},{id:7,text:"In general, to what extent did you receive help and support from others when you needed it?",domain:"relationships"},{id:8,text:"In general, to what extent did you feel loved?",domain:"relationships"},{id:9,text:"In general, how satisfied were you with your personal relationships?",domain:"relationships"},{id:10,text:"In general, to what extent did you lead a purposeful and meaningful life?",domain:"meaning"},{id:11,text:"In general, to what extent did you generally feel that what you do in your life is valuable and worthwhile?",domain:"meaning"},{id:12,text:"In general, did you have a sense of direction in your life?",domain:"meaning"},{id:13,text:"In general, how often were you able to handle your responsibilities?",domain:"accomplishment"},{id:14,text:"In general, how often did you accomplish important goals you have set for yourself?",domain:"accomplishment"},{id:15,text:"In general, how capable were you at managing your daily responsibilities?",domain:"accomplishment"}],MP=[{value:0,label:"Never"},{value:1,label:"Rarely"},{value:2,label:"Sometimes"},{value:3,label:"Often"},{value:4,label:"Always"}];function VP(){const{user:t}=ht(),[e,n]=O.useState(0),[r,s]=O.useState({}),[i,o]=O.useState(!1),[c,u]=O.useState(null),d=S=>{const A={...r,[e]:S};s(A),e<is.length-1?n(e+1):m(A)},m=async S=>{const A={positive:0,engagement:0,relationships:0,meaning:0,accomplishment:0},P={positive:0,engagement:0,relationships:0,meaning:0,accomplishment:0};is.forEach((v,E)=>{const R=S[E]||0;A[v.domain]+=R,P[v.domain]++}),Object.keys(A).forEach(v=>{A[v]=A[v]/P[v]});const T=Object.values(A).reduce((v,E)=>v+E,0)/5;A.overall=T,u(A),o(!0);try{await Er(kt(jt,"assessments"),{userId:t.uid,userEmail:t.email,type:"perma",scores:A,completedAt:new Date})}catch(v){console.error("Error saving assessment:",v)}},p=S=>S>=3.5?"text-green-600":S>=2.5?"text-yellow-600":S>=1.5?"text-orange-600":"text-red-600",g=S=>S>=3.5?"Flourishing":S>=2.5?"Moderate":S>=1.5?"Low":"Very Low",_=(e+1)/is.length*100;return i&&c?l.jsx("div",{className:"min-h-screen gradient-green py-12 px-4",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx(q,{to:"/assessments",className:"text-emerald-600 hover:text-emerald-700 font-medium mb-6 inline-block",children:" Back to Assessments"}),l.jsxs("div",{className:"card mb-8 text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-cyan-500 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx("span",{className:"text-4xl",children:""})}),l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Assessment Complete!"}),l.jsx("p",{className:"text-gray-600",children:"Here are your PERMA well-being scores for the past 7 days"})]}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[l.jsxs("div",{className:"card border-l-4 border-cyan-500",children:[l.jsx("h3",{className:"text-sm text-gray-600 mb-1",children:"OVERALL SCORE"}),l.jsx("p",{className:"text-4xl font-bold text-gray-900 mb-2",children:c.overall.toFixed(2)}),l.jsx("p",{className:`text-lg font-semibold ${p(c.overall)}`,children:g(c.overall)})]}),l.jsxs("div",{className:"card border-l-4 border-pink-500",children:[l.jsx("h3",{className:"text-sm text-gray-600 mb-1",children:"Positive"}),l.jsx("p",{className:"text-4xl font-bold text-gray-900 mb-2",children:c.positive.toFixed(2)}),l.jsx("p",{className:`text-lg font-semibold ${p(c.positive)}`,children:g(c.positive)})]}),l.jsxs("div",{className:"card border-l-4 border-blue-500",children:[l.jsx("h3",{className:"text-sm text-gray-600 mb-1",children:"Engagement"}),l.jsx("p",{className:"text-4xl font-bold text-gray-900 mb-2",children:c.engagement.toFixed(2)}),l.jsx("p",{className:`text-lg font-semibold ${p(c.engagement)}`,children:g(c.engagement)})]}),l.jsxs("div",{className:"card border-l-4 border-green-500",children:[l.jsx("h3",{className:"text-sm text-gray-600 mb-1",children:"Relationships"}),l.jsx("p",{className:"text-4xl font-bold text-gray-900 mb-2",children:c.relationships.toFixed(2)}),l.jsx("p",{className:`text-lg font-semibold ${p(c.relationships)}`,children:g(c.relationships)})]}),l.jsxs("div",{className:"card border-l-4 border-purple-500",children:[l.jsx("h3",{className:"text-sm text-gray-600 mb-1",children:"Meaning"}),l.jsx("p",{className:"text-4xl font-bold text-gray-900 mb-2",children:c.meaning.toFixed(2)}),l.jsx("p",{className:`text-lg font-semibold ${p(c.meaning)}`,children:g(c.meaning)})]}),l.jsxs("div",{className:"card border-l-4 border-orange-500",children:[l.jsx("h3",{className:"text-sm text-gray-600 mb-1",children:"Accomplishment"}),l.jsx("p",{className:"text-4xl font-bold text-gray-900 mb-2",children:c.accomplishment.toFixed(2)}),l.jsx("p",{className:`text-lg font-semibold ${p(c.accomplishment)}`,children:g(c.accomplishment)})]})]}),l.jsxs("div",{className:"card bg-blue-50 border-2 border-blue-200 mb-8",children:[l.jsx("h3",{className:"font-bold text-lg mb-2 text-blue-900",children:" What do these scores mean?"}),l.jsx("p",{className:"text-gray-700 mb-4",children:"Your PERMA profile shows how balanced your well-being is across five domains: Positive Emotions, Engagement, Relationships, Meaning, and Accomplishment. Scores closer to 4 indicate stronger well-being."}),l.jsxs("div",{className:"text-sm space-y-1",children:[l.jsxs("p",{children:[" ",l.jsx("strong",{children:"3.5-4.0:"})," Flourishing  ",l.jsx("strong",{children:"2.5-3.4:"})," Moderate"]}),l.jsxs("p",{children:[" ",l.jsx("strong",{children:"1.5-2.4:"})," Low  ",l.jsx("strong",{children:"0-1.4:"})," Very Low"]})]})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx(q,{to:"/dashboard",className:"btn-primary flex-1 text-center",children:"Continue to Dashboard"}),l.jsx(q,{to:"/assessments",className:"btn-secondary flex-1 text-center",children:"Take Another Assessment"})]})]})}):l.jsx("div",{className:"min-h-screen gradient-green py-12 px-4",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx(q,{to:"/assessments",className:"text-emerald-600 hover:text-emerald-700 font-medium mb-6 inline-block",children:" Back to Assessments"}),l.jsxs("div",{className:"card mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"PERMA Well-Being Profiler"}),l.jsxs("p",{className:"text-gray-600 mb-6",children:["Please answer honestly based on ",l.jsx("strong",{children:"your experiences over the past 7 days"}),"."]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[l.jsx("span",{children:"Progress"}),l.jsxs("span",{children:[e+1," / ",is.length]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:l.jsx("div",{className:"bg-gradient-to-r from-cyan-500 to-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${_}%`}})})]})]}),l.jsxs("div",{className:"card mb-6",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-500 text-white flex items-center justify-center font-bold text-lg",children:e+1}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-1",children:is[e].domain.toUpperCase()}),l.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Over the past 7 days, ",is[e].text.toLowerCase()]})]})]}),l.jsx("div",{className:"space-y-3",children:MP.map(S=>l.jsxs("button",{onClick:()=>d(S.value),className:"w-full p-4 text-left border-2 border-gray-200 rounded-xl hover:border-cyan-500 hover:bg-cyan-50 transition-all flex justify-between items-center",children:[l.jsx("span",{className:"font-medium text-gray-900",children:S.label}),l.jsx("span",{className:"text-2xl text-gray-400",children:S.value})]},S.value))})]})]})})}const Ai=[{id:1,text:"How many days did you engage in at least 30 minutes of moderate physical activity?",category:"exercise",options:[{value:0,label:"0 days"},{value:1,label:"1-2 days"},{value:2,label:"3-4 days"},{value:3,label:"5-6 days"},{value:4,label:"Every day"}]},{id:2,text:"How many servings of fruits and vegetables did you eat daily?",category:"nutrition",options:[{value:0,label:"0-1 servings"},{value:1,label:"2-3 servings"},{value:2,label:"4-5 servings"},{value:3,label:"6-7 servings"},{value:4,label:"8+ servings"}]},{id:3,text:"How many hours of sleep did you get on average per night?",category:"sleep",options:[{value:0,label:"Less than 5 hours"},{value:1,label:"5-6 hours"},{value:2,label:"6-7 hours"},{value:3,label:"7-8 hours"},{value:4,label:"8-9 hours"}]},{id:4,text:"How would you rate the quality of your sleep?",category:"sleep",options:[{value:0,label:"Very poor"},{value:1,label:"Poor"},{value:2,label:"Fair"},{value:3,label:"Good"},{value:4,label:"Excellent"}]},{id:5,text:"How many glasses of water did you drink daily?",category:"nutrition",options:[{value:0,label:"1-2 glasses"},{value:1,label:"3-4 glasses"},{value:2,label:"5-6 glasses"},{value:3,label:"7-8 glasses"},{value:4,label:"9+ glasses"}]},{id:6,text:"How often did you eat balanced meals (protein, carbs, vegetables)?",category:"nutrition",options:[{value:0,label:"Rarely"},{value:1,label:"Sometimes (1-2 meals/day)"},{value:2,label:"Often (2 meals/day)"},{value:3,label:"Usually (3 meals/day)"},{value:4,label:"Always (all meals)"}]},{id:7,text:"How many days did you do strength training or resistance exercises?",category:"exercise",options:[{value:0,label:"0 days"},{value:1,label:"1 day"},{value:2,label:"2 days"},{value:3,label:"3 days"},{value:4,label:"4+ days"}]},{id:8,text:"How consistent was your sleep schedule (same bedtime/wake time)?",category:"sleep",options:[{value:0,label:"Very inconsistent"},{value:1,label:"Inconsistent"},{value:2,label:"Somewhat consistent"},{value:3,label:"Mostly consistent"},{value:4,label:"Very consistent"}]},{id:9,text:"How often did you limit processed foods and sugary drinks?",category:"nutrition",options:[{value:0,label:"Never"},{value:1,label:"Rarely"},{value:2,label:"Sometimes"},{value:3,label:"Often"},{value:4,label:"Always"}]},{id:10,text:"How would you rate your overall energy levels?",category:"overall",options:[{value:0,label:"Very low"},{value:1,label:"Low"},{value:2,label:"Moderate"},{value:3,label:"High"},{value:4,label:"Very high"}]},{id:11,text:"How often did you take breaks from sitting/screen time?",category:"exercise",options:[{value:0,label:"Never"},{value:1,label:"Rarely"},{value:2,label:"Sometimes"},{value:3,label:"Often"},{value:4,label:"Regularly"}]},{id:12,text:"How satisfied are you with your current physical health?",category:"overall",options:[{value:0,label:"Very dissatisfied"},{value:1,label:"Dissatisfied"},{value:2,label:"Neutral"},{value:3,label:"Satisfied"},{value:4,label:"Very satisfied"}]}];function LP(){const{user:t}=ht(),[e,n]=O.useState(0),[r,s]=O.useState({}),[i,o]=O.useState(!1),[c,u]=O.useState(null),d=A=>{const P={...r,[e]:A};s(P),e<Ai.length-1?n(e+1):m(P)},m=async A=>{const P={exercise:0,nutrition:0,sleep:0,overall:0},T={exercise:0,nutrition:0,sleep:0,overall:0};Ai.forEach((E,R)=>{const V=A[R]||0;P[E.category]+=V,T[E.category]++}),Object.keys(P).forEach(E=>{P[E]=P[E]/T[E]*25});const v=Object.values(P).reduce((E,R)=>E+R,0)/4;P.total=v,u(P),o(!0);try{await Er(kt(jt,"assessments"),{userId:t.uid,userEmail:t.email,type:"physical",scores:P,completedAt:new Date})}catch(E){console.error("Error saving assessment:",E)}},p=A=>A>=75?"text-green-600":A>=50?"text-yellow-600":A>=25?"text-orange-600":"text-red-600",g=A=>A>=75?"Excellent":A>=50?"Good":A>=25?"Fair":"Needs Improvement",_=(e+1)/Ai.length*100,S=Ai[e];return i&&c?l.jsx("div",{className:"min-h-screen gradient-green py-12 px-4",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx(q,{to:"/assessments",className:"text-emerald-600 hover:text-emerald-700 font-medium mb-6 inline-block",children:" Back to Assessments"}),l.jsxs("div",{className:"card mb-8 text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-emerald-500 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx("span",{className:"text-4xl",children:""})}),l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Assessment Complete!"}),l.jsx("p",{className:"text-gray-600",children:"Here are your physical health scores for the past 7 days"})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[l.jsxs("div",{className:"card border-l-4 border-emerald-500 md:col-span-2",children:[l.jsx("h3",{className:"text-sm text-gray-600 mb-1",children:"TOTAL SCORE"}),l.jsxs("p",{className:"text-5xl font-bold text-gray-900 mb-2",children:[Math.round(c.total),"/100"]}),l.jsx("p",{className:`text-xl font-semibold ${p(c.total)}`,children:g(c.total)})]}),l.jsxs("div",{className:"card border-l-4 border-blue-500",children:[l.jsx("h3",{className:"text-sm text-gray-600 mb-1",children:" Exercise"}),l.jsxs("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:[Math.round(c.exercise),"/100"]}),l.jsx("p",{className:`text-lg font-semibold ${p(c.exercise)}`,children:g(c.exercise)})]}),l.jsxs("div",{className:"card border-l-4 border-green-500",children:[l.jsx("h3",{className:"text-sm text-gray-600 mb-1",children:" Nutrition"}),l.jsxs("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:[Math.round(c.nutrition),"/100"]}),l.jsx("p",{className:`text-lg font-semibold ${p(c.nutrition)}`,children:g(c.nutrition)})]}),l.jsxs("div",{className:"card border-l-4 border-purple-500",children:[l.jsx("h3",{className:"text-sm text-gray-600 mb-1",children:" Sleep"}),l.jsxs("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:[Math.round(c.sleep),"/100"]}),l.jsx("p",{className:`text-lg font-semibold ${p(c.sleep)}`,children:g(c.sleep)})]}),l.jsxs("div",{className:"card border-l-4 border-orange-500",children:[l.jsx("h3",{className:"text-sm text-gray-600 mb-1",children:" Overall Wellness"}),l.jsxs("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:[Math.round(c.overall),"/100"]}),l.jsx("p",{className:`text-lg font-semibold ${p(c.overall)}`,children:g(c.overall)})]})]}),l.jsxs("div",{className:"card bg-emerald-50 border-2 border-emerald-200 mb-8",children:[l.jsx("h3",{className:"font-bold text-lg mb-2 text-emerald-900",children:" Score Interpretation"}),l.jsxs("div",{className:"text-sm space-y-1",children:[l.jsxs("p",{children:[" ",l.jsx("strong",{children:"75-100:"})," Excellent - Keep up the great work!"]}),l.jsxs("p",{children:[" ",l.jsx("strong",{children:"50-74:"})," Good - You're on the right track"]}),l.jsxs("p",{children:[" ",l.jsx("strong",{children:"25-49:"})," Fair - Room for improvement"]}),l.jsxs("p",{children:[" ",l.jsx("strong",{children:"0-24:"})," Needs Improvement - Let's work on this together"]})]})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx(q,{to:"/dashboard",className:"btn-primary flex-1 text-center",children:"Continue to Dashboard"}),l.jsx(q,{to:"/chat",className:"btn-secondary flex-1 text-center",children:"Chat with AMOMA"})]})]})}):l.jsx("div",{className:"min-h-screen gradient-green py-12 px-4",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx(q,{to:"/assessments",className:"text-emerald-600 hover:text-emerald-700 font-medium mb-6 inline-block",children:" Back to Assessments"}),l.jsxs("div",{className:"card mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Physical Health Assessment"}),l.jsxs("p",{className:"text-gray-600 mb-6",children:["Please answer based on ",l.jsx("strong",{children:"your habits over the past 7 days"}),"."]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[l.jsx("span",{children:"Progress"}),l.jsxs("span",{children:[e+1," / ",Ai.length]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:l.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-green-600 h-3 rounded-full transition-all duration-300",style:{width:`${_}%`}})})]})]}),l.jsxs("div",{className:"card mb-6",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-500 text-white flex items-center justify-center font-bold text-lg",children:e+1}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-1",children:S.category.toUpperCase()}),l.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Over the past 7 days, ",S.text.toLowerCase()]})]})]}),l.jsx("div",{className:"space-y-3",children:S.options.map(A=>l.jsx("button",{onClick:()=>d(A.value),className:"w-full p-4 text-left border-2 border-gray-200 rounded-xl hover:border-emerald-500 hover:bg-emerald-50 transition-all",children:l.jsx("p",{className:"font-medium text-gray-900",children:A.label})},A.value))})]})]})})}function FP(){return l.jsx("div",{className:"min-h-screen gradient-green py-12 px-4",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx("h1",{className:"text-4xl font-bold text-center text-gray-900 mb-4",children:"Health Assessments"}),l.jsx("p",{className:"text-center text-gray-700 mb-12",children:"Take regular assessments to track your mental health and well-being journey"}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[l.jsxs("div",{className:"card hover:shadow-xl transition-all",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4 text-blue-600",children:"DASS-21"}),l.jsx("p",{className:"text-gray-700 mb-4",children:"Measures depression, anxiety, and stress levels over the past week"}),l.jsxs("ul",{className:"text-sm text-gray-600 mb-4 space-y-1",children:[l.jsx("li",{children:" 21 questions"}),l.jsx("li",{children:" Takes ~5-7 minutes"}),l.jsx("li",{children:" Validated assessment tool"})]}),l.jsx(q,{to:"/assessments/dass21",className:"btn-primary w-full block text-center",children:"Start DASS-21"})]}),l.jsxs("div",{className:"card hover:shadow-xl transition-all",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4 text-cyan-600",children:"PERMA Profiler"}),l.jsx("p",{className:"text-gray-700 mb-4",children:"Assesses five domains of positive well-being"}),l.jsxs("ul",{className:"text-sm text-gray-600 mb-4 space-y-1",children:[l.jsx("li",{children:" 15 questions"}),l.jsx("li",{children:" Takes ~3-5 minutes"}),l.jsx("li",{children:" Evidence-based framework"})]}),l.jsx(q,{to:"/assessments/perma",className:"btn-primary w-full block text-center",children:"Start PERMA"})]}),l.jsxs("div",{className:"card hover:shadow-xl transition-all md:col-span-2",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4 text-emerald-600",children:"Physical Health Assessment"}),l.jsx("p",{className:"text-gray-700 mb-4",children:"Track physical activity, nutrition, and sleep quality"}),l.jsxs("ul",{className:"text-sm text-gray-600 mb-4 space-y-1",children:[l.jsx("li",{children:" 12 questions"}),l.jsx("li",{children:" Takes ~3-4 minutes"}),l.jsx("li",{children:" Comprehensive lifestyle tracking"})]}),l.jsx(q,{to:"/assessments/physical",className:"btn-primary w-full block text-center",children:"Start Physical Health"})]})]}),l.jsxs("div",{className:"card bg-emerald-50 border-2 border-emerald-200",children:[l.jsx("h3",{className:"font-bold text-lg mb-2 text-emerald-800",children:" Weekly Assessments"}),l.jsx("p",{className:"text-gray-700",children:"For best results, complete these assessments weekly. Your progress will be tracked and visualized in your dashboard."})]})]})})}function UP(){return l.jsxs(tf,{children:[l.jsx(Te,{path:"/",element:l.jsx(FP,{})}),l.jsx(Te,{path:"/dass21",element:l.jsx(OP,{})}),l.jsx(Te,{path:"/perma",element:l.jsx(VP,{})}),l.jsx(Te,{path:"/physical",element:l.jsx(LP,{})})]})}function BP(){var T;const{user:t}=ht(),[e,n]=O.useState(""),[r,s]=O.useState(""),[i,o]=O.useState([]),[c,u]=O.useState(!1),[d,m]=O.useState(!1),p=(t==null?void 0:t.displayName)||((T=t==null?void 0:t.email)==null?void 0:T.split("@")[0])||"User",g=[{emoji:"",label:"Happy",value:"happy"},{emoji:"",label:"Calm",value:"calm"},{emoji:"",label:"Sad",value:"sad"},{emoji:"",label:"Anxious",value:"anxious"},{emoji:"",label:"Frustrated",value:"frustrated"}];O.useEffect(()=>{_()},[t]);const _=async()=>{if(t)try{const v=tl(kt(jt,"journalEntries"),nl("userId","==",t.uid),rl("createdAt","desc")),R=(await il(v)).docs.map(V=>{var U;return{id:V.id,...V.data(),createdAt:(U=V.data().createdAt)==null?void 0:U.toDate()}});o(R)}catch(v){console.error("Error loading entries:",v)}},S=async v=>{if(v.preventDefault(),!(!e.trim()||!r)){u(!0);try{await Er(kt(jt,"journalEntries"),{userId:t.uid,userEmail:t.email,content:e,mood:r,createdAt:new Date}),m(!0),n(""),s(""),await _(),setTimeout(()=>m(!1),3e3)}catch(E){console.error("Error saving entry:",E),alert("Failed to save entry. Please try again.")}finally{u(!1)}}},A=v=>v?new Date(v).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",P=v=>{const E=g.find(R=>R.value===v);return E?E.emoji:""};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50 py-10 px-4",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-xl mb-8 border-2 border-emerald-200",children:[l.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3",children:"Reflective Journal"}),l.jsxs("p",{className:"text-gray-600 mb-8 text-lg",children:["Welcome, ",l.jsx("strong",{className:"text-emerald-600",children:p}),"!  Express your thoughts and track your emotional journey"]}),d&&l.jsx("div",{className:"bg-emerald-50 border-2 border-emerald-200 rounded-xl p-4 mb-6",children:l.jsx("p",{className:"text-emerald-800 font-semibold",children:" Journal entry saved successfully!"})}),l.jsxs("form",{onSubmit:S,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"How are you feeling today?"}),l.jsx("div",{className:"flex gap-4 flex-wrap",children:g.map(v=>l.jsxs("button",{type:"button",onClick:()=>s(v.value),className:`flex flex-col items-center gap-2 p-4 rounded-xl border-2 transition-all ${r===v.value?"border-emerald-500 bg-emerald-50 shadow-lg transform scale-105":"border-gray-200 hover:border-emerald-300 hover:shadow-md"}`,children:[l.jsx("span",{className:"text-5xl",children:v.emoji}),l.jsx("span",{className:"text-sm font-semibold text-gray-700",children:v.label})]},v.value))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Your thoughts and reflections..."}),l.jsx("textarea",{value:e,onChange:v=>n(v.target.value),placeholder:"What's on your mind today? How are you feeling? What happened? What are you grateful for?",className:"w-full h-48 p-4 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 focus:outline-none resize-none text-base",required:!0}),l.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[e.length," characters"]})]}),l.jsx("button",{type:"submit",disabled:c||!e.trim()||!r,className:"bg-gradient-to-r from-emerald-600 to-green-700 text-white px-10 py-4 rounded-xl font-bold text-lg hover:from-emerald-700 hover:to-green-800 transition-all w-full disabled:opacity-50 disabled:cursor-not-allowed shadow-xl",children:c?"Saving...":" Save Entry"})]})]}),i.length>0&&l.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-xl border-2 border-emerald-200",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:" Past Journal Entries"}),l.jsx("div",{className:"space-y-4",children:i.map(v=>l.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-6 hover:border-emerald-300 transition-all hover:shadow-lg",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[l.jsx("span",{className:"text-4xl",children:P(v.mood)}),l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-gray-900 text-lg",children:A(v.createdAt)}),l.jsx("p",{className:"text-sm text-gray-500",children:v.mood})]})]}),l.jsx("p",{className:"text-gray-700 whitespace-pre-wrap leading-relaxed",children:v.content})]},v.id))})]})]})})}function zP(){const{user:t}=ht(),[e,n]=O.useState(""),[r,s]=O.useState([]),[i,o]=O.useState(!1),c=["","","","","","","",""],u=async()=>{if(!e.trim())return;const d=c[Math.floor(Math.random()*c.length)];s([...r,{text:e,emoji:d}]),n("");try{await Er(kt(jt,"gameEntries"),{userId:t.uid,game:"gratitude",entry:e,createdAt:new Date})}catch(m){console.error("Error saving:",m)}r.length>=2&&o(!0)};return l.jsx("div",{className:"min-h-screen gradient-green py-12 px-4",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx(q,{to:"/games",className:"text-emerald-600 hover:text-emerald-700 font-medium mb-6 inline-block",children:" Back to Games"}),l.jsxs("div",{className:"card mb-8",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-pink-500 to-rose-600 mx-auto mb-4 flex items-center justify-center text-4xl",children:""}),l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Plant Your Gratitude Garden"}),l.jsx("p",{className:"text-gray-600",children:"Each gratitude you write plants a beautiful flower"})]}),!i&&l.jsxs("div",{className:"mb-8",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"What are you grateful for today?"}),l.jsx("textarea",{value:e,onChange:d=>n(d.target.value),placeholder:"I'm grateful for... (e.g., my family's support, a beautiful sunset, a good cup of coffee)",className:"w-full h-32 p-4 border-2 border-gray-200 rounded-xl focus:border-pink-500 focus:outline-none resize-none",maxLength:200}),l.jsxs("div",{className:"flex justify-between items-center mt-2",children:[l.jsxs("span",{className:"text-sm text-gray-500",children:[e.length,"/200 characters"]}),l.jsx("button",{onClick:u,disabled:!e.trim(),className:"btn-primary px-6 py-2",children:" Plant Flower"})]})]}),r.length>0&&l.jsxs("div",{className:"bg-gradient-to-b from-green-100 to-green-50 rounded-2xl p-8 mb-6",children:[l.jsx("h3",{className:"text-xl font-bold text-center text-gray-900 mb-6",children:"Your Garden "}),l.jsx("div",{className:"grid grid-cols-3 gap-6",children:r.map((d,m)=>l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-6xl mb-2 animate-bounce",children:d.emoji}),l.jsxs("p",{className:"text-sm text-gray-700 italic",children:['"',d.text,'"']})]},m))})]}),i&&l.jsxs("div",{className:"bg-pink-50 border-2 border-pink-200 rounded-2xl p-6 text-center",children:[l.jsx("div",{className:"text-5xl mb-4",children:""}),l.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Beautiful Garden!"}),l.jsxs("p",{className:"text-gray-700 mb-4",children:["You've planted ",r.length," flowers of gratitude. Research shows that regular gratitude practice can improve mood, reduce stress, and enhance overall well-being."]}),l.jsxs("div",{className:"flex gap-4 justify-center",children:[l.jsx("button",{onClick:()=>{s([]),o(!1)},className:"btn-secondary px-6 py-2",children:"Plant More"}),l.jsx(q,{to:"/games",className:"btn-primary px-6 py-2",children:"Play Another Game"})]})]})]}),l.jsxs("div",{className:"card bg-pink-50",children:[l.jsx("h3",{className:"font-bold text-lg mb-2 text-pink-900",children:" Benefits of Gratitude"}),l.jsxs("ul",{className:"text-gray-700 space-y-1 text-sm",children:[l.jsx("li",{children:" Improves mood and life satisfaction"}),l.jsx("li",{children:" Reduces stress and anxiety"}),l.jsx("li",{children:" Enhances relationships and social connections"}),l.jsx("li",{children:" Promotes better sleep quality"})]})]})]})})}function $P(){const{user:t}=ht(),[e,n]=O.useState(null),[r,s]=O.useState(""),[i,o]=O.useState([]),[c,u]=O.useState(!1),d=[{name:"Red",hex:"#EF4444",emotion:"Energy/Passion"},{name:"Orange",hex:"#F97316",emotion:"Joy/Creativity"},{name:"Yellow",hex:"#EAB308",emotion:"Optimism/Happiness"},{name:"Green",hex:"#10B981",emotion:"Calm/Balance"},{name:"Blue",hex:"#3B82F6",emotion:"Peace/Trust"},{name:"Purple",hex:"#8B5CF6",emotion:"Wisdom/Spirituality"},{name:"Pink",hex:"#EC4899",emotion:"Love/Compassion"},{name:"Gray",hex:"#6B7280",emotion:"Neutral/Uncertain"}],m=async()=>{if(!e||!r.trim())return;const p={color:e,reflection:r,timestamp:new Date};o([...i,p]),s("");try{await Er(kt(jt,"gameEntries"),{userId:t.uid,game:"mandala",color:e.name,reflection:r,createdAt:new Date})}catch(g){console.error("Error saving:",g)}i.length>=3&&u(!0)};return l.jsx("div",{className:"min-h-screen gradient-green py-12 px-4",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx(q,{to:"/games",className:"text-emerald-600 hover:text-emerald-700 font-medium mb-6 inline-block",children:" Back to Games"}),l.jsxs("div",{className:"card mb-8",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-purple-500 to-indigo-600 mx-auto mb-4 flex items-center justify-center text-4xl",children:""}),l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Color Your Mood Mandala"}),l.jsx("p",{className:"text-gray-600",children:"Choose colors that represent your feelings"})]}),!c&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:"Choose a color:"}),l.jsx("div",{className:"grid grid-cols-4 gap-3",children:d.map(p=>l.jsxs("button",{onClick:()=>n(p),className:`p-4 rounded-xl border-4 transition-all ${(e==null?void 0:e.name)===p.name?"border-gray-900 shadow-lg scale-105":"border-transparent hover:border-gray-300"}`,style:{backgroundColor:p.hex},children:[l.jsx("div",{className:"text-white font-bold text-sm drop-shadow-lg",children:p.name}),l.jsx("div",{className:"text-white text-xs drop-shadow-lg",children:p.emotion})]},p.name))})]}),e&&l.jsxs("div",{className:"mb-6",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Why did you choose ",e.name,"? What does it represent for you today?"]}),l.jsx("textarea",{value:r,onChange:p=>s(p.target.value),placeholder:`This color represents... (e.g., I chose ${e.name.toLowerCase()} because...)`,className:"w-full h-32 p-4 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none resize-none",maxLength:200}),l.jsxs("div",{className:"flex justify-between items-center mt-2",children:[l.jsxs("span",{className:"text-sm text-gray-500",children:[r.length,"/200 characters"]}),l.jsx("button",{onClick:m,disabled:!r.trim(),className:"btn-primary px-6 py-2",children:"Add to Mandala"})]})]})]}),i.length>0&&l.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-6 mb-6",children:[l.jsx("h3",{className:"text-xl font-bold text-center text-gray-900 mb-4",children:"Your Mood Mandala"}),l.jsx("div",{className:"flex justify-center mb-6",children:l.jsx("div",{className:"flex gap-2",children:i.map((p,g)=>l.jsx("div",{className:"w-16 h-16 rounded-full shadow-lg animate-pulse",style:{backgroundColor:p.color.hex},title:p.reflection},g))})}),l.jsx("div",{className:"space-y-3",children:i.map((p,g)=>l.jsx("div",{className:"bg-white rounded-xl p-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded-full flex-shrink-0",style:{backgroundColor:p.color.hex}}),l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-sm text-gray-900",children:[p.color.name," - ",p.color.emotion]}),l.jsxs("p",{className:"text-sm text-gray-700 italic",children:['"',p.reflection,'"']})]})]})},g))})]}),c&&l.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-2xl p-6 text-center",children:[l.jsx("div",{className:"text-5xl mb-4",children:""}),l.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Mandala Complete!"}),l.jsx("p",{className:"text-gray-700 mb-4",children:"You've created a beautiful representation of your emotions. Art therapy helps process feelings and promotes self-awareness and emotional regulation."}),l.jsxs("div",{className:"flex gap-4 justify-center",children:[l.jsx("button",{onClick:()=>{o([]),u(!1),n(null)},className:"btn-secondary px-6 py-2",children:"Create Another"}),l.jsx(q,{to:"/games",className:"btn-primary px-6 py-2",children:"Play Another Game"})]})]})]}),l.jsxs("div",{className:"card bg-purple-50",children:[l.jsx("h3",{className:"font-bold text-lg mb-2 text-purple-900",children:" Color Psychology"}),l.jsx("p",{className:"text-gray-700 text-sm",children:"Colors can influence emotions and mood. Art therapy using colors helps express feelings that might be difficult to put into words, promoting emotional awareness and healing."})]})]})})}function WP(){const[t,e]=O.useState(!1),[n,r]=O.useState("ready"),[s,i]=O.useState(0),[o,c]=O.useState(0);O.useEffect(()=>{if(!t)return;const g=setTimeout(()=>{n==="inhale"&&s<4?i(s+1):n==="inhale"&&s===4?(r("hold"),i(0)):n==="hold"&&s<4?i(s+1):n==="hold"&&s===4?(r("exhale"),i(0)):n==="exhale"&&s<6?i(s+1):n==="exhale"&&s===6&&(c(o+1),r("inhale"),i(0))},1e3);return()=>clearTimeout(g)},[t,n,s,o]);const u=()=>{e(!0),r("inhale"),i(0),c(0)},d=()=>{e(!1),r("ready"),i(0)},m=()=>n==="inhale"?100+s*50:n==="hold"?300:n==="exhale"?300-s*50:150,p=()=>n==="inhale"?"Breathe In...":n==="hold"?"Hold...":n==="exhale"?"Breathe Out...":"Ready?";return l.jsx("div",{className:"min-h-screen gradient-green py-12 px-4",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx(q,{to:"/games",className:"text-emerald-600 hover:text-emerald-700 font-medium mb-6 inline-block",children:" Back to Games"}),l.jsxs("div",{className:"card mb-8",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-500 to-cyan-600 mx-auto mb-4 flex items-center justify-center text-4xl",children:""}),l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Breathing Bubble"}),l.jsx("p",{className:"text-gray-600",children:"Follow the bubble to practice mindful breathing"})]}),l.jsx("div",{className:"bg-gradient-to-b from-blue-50 to-cyan-50 rounded-2xl p-12 mb-6",children:l.jsxs("div",{className:"flex flex-col items-center justify-center",children:[l.jsx("div",{className:"rounded-full bg-gradient-to-br from-blue-400 to-cyan-400 shadow-2xl transition-all duration-1000 ease-in-out flex items-center justify-center",style:{width:`${m()}px`,height:`${m()}px`},children:l.jsx("span",{className:"text-white font-bold text-2xl drop-shadow-lg",children:s>0?s:""})}),l.jsxs("div",{className:"mt-8 text-center",children:[l.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:p()}),l.jsxs("p",{className:"text-lg text-gray-600",children:["Cycles completed: ",o]})]})]})}),l.jsx("div",{className:"text-center mb-6",children:t?l.jsx("button",{onClick:d,className:"btn-secondary px-12 py-4 text-lg",children:"Stop Exercise"}):l.jsx("button",{onClick:u,className:"btn-primary px-12 py-4 text-lg",children:"Start Breathing Exercise"})}),o>=3&&l.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-2xl p-6 text-center",children:[l.jsx("div",{className:"text-5xl mb-4",children:""}),l.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Great Work!"}),l.jsxs("p",{className:"text-gray-700 mb-4",children:["You've completed ",o," breathing cycles. Deep breathing activates your parasympathetic nervous system, reducing stress and promoting relaxation."]}),l.jsx(q,{to:"/games",className:"btn-primary px-6 py-2 inline-block",children:"Play Another Game"})]})]}),l.jsxs("div",{className:"card bg-blue-50",children:[l.jsx("h3",{className:"font-bold text-lg mb-2 text-blue-900",children:" Box Breathing (4-4-6)"}),l.jsx("p",{className:"text-gray-700 text-sm mb-3",children:"This breathing technique is used by Navy SEALs to stay calm under pressure. It helps reduce stress, improve focus, and regulate emotions."}),l.jsxs("ul",{className:"text-gray-700 space-y-1 text-sm",children:[l.jsx("li",{children:" Inhale for 4 seconds"}),l.jsx("li",{children:" Hold for 4 seconds"}),l.jsx("li",{children:" Exhale for 6 seconds"}),l.jsx("li",{children:" Repeat 3-5 times"})]})]})]})})}function HP(){const{user:t}=ht(),[e,n]=O.useState("input"),[r,s]=O.useState(""),[i,o]=O.useState(null),[c,u]=O.useState(""),[d,m]=O.useState(!1),p=()=>{r.trim()&&n("control")},g=A=>{o(A),n(A==="no"?"letGo":"action")},_=async()=>{if(c.trim()){try{await Er(kt(jt,"gameEntries"),{userId:t.uid,game:"worry-tree",worry:r,canControl:i,action:c,createdAt:new Date})}catch(A){console.error("Error saving:",A)}m(!0)}},S=()=>{n("input"),s(""),o(null),u(""),m(!1)};return d?l.jsx("div",{className:"min-h-screen gradient-green py-12 px-4",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx(q,{to:"/games",className:"text-emerald-600 hover:text-emerald-700 font-medium mb-6 inline-block",children:" Back to Games"}),l.jsxs("div",{className:"card text-center",children:[l.jsx("div",{className:"text-6xl mb-6",children:""}),l.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Action Plan Created!"}),l.jsx("p",{className:"text-gray-700 mb-6",children:"You've identified a concrete action. Now commit to taking this step!"}),l.jsxs("div",{className:"bg-orange-50 border-2 border-orange-200 rounded-xl p-6 mb-6 max-w-2xl mx-auto text-left",children:[l.jsx("h3",{className:"font-bold text-lg mb-2 text-orange-900",children:"Your Worry:"}),l.jsxs("p",{className:"text-gray-700 mb-4 italic",children:['"',r,'"']}),l.jsx("h3",{className:"font-bold text-lg mb-2 text-orange-900",children:"Your Action Plan:"}),l.jsxs("p",{className:"text-gray-700 italic",children:['"',c,'"']})]}),l.jsxs("div",{className:"flex gap-4 justify-center",children:[l.jsx("button",{onClick:S,className:"btn-secondary px-6 py-2",children:"Process Another Worry"}),l.jsx(q,{to:"/games",className:"btn-primary px-6 py-2",children:"Play Another Game"})]})]})]})}):e==="letGo"?l.jsx("div",{className:"min-h-screen gradient-green py-12 px-4",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx(q,{to:"/games",className:"text-emerald-600 hover:text-emerald-700 font-medium mb-6 inline-block",children:" Back to Games"}),l.jsxs("div",{className:"card text-center",children:[l.jsx("div",{className:"text-6xl mb-6",children:""}),l.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Let It Go"}),l.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-6 mb-6 max-w-2xl mx-auto text-left",children:[l.jsx("h3",{className:"font-bold text-lg mb-2 text-blue-900",children:"Your Worry:"}),l.jsxs("p",{className:"text-gray-700 mb-4 italic",children:['"',r,'"']}),l.jsx("h3",{className:"font-bold text-lg mb-3 text-blue-900",children:"This worry is outside your control."}),l.jsx("p",{className:"text-gray-700 mb-4",children:"Since you can't control this situation, the healthiest response is to practice acceptance and redirect your energy toward things you can influence."}),l.jsx("h4",{className:"font-bold mb-2 text-gray-900",children:"Try these strategies:"}),l.jsxs("ul",{className:"text-gray-700 space-y-2 text-sm",children:[l.jsx("li",{children:" Practice mindfulness: Focus on the present moment"}),l.jsx("li",{children:" Challenge catastrophic thinking: What's realistic?"}),l.jsx("li",{children:" Distract with positive activities: Exercise, hobbies, friends"}),l.jsx("li",{children:" Use the 5-4-3-2-1 grounding technique for anxiety"}),l.jsx("li",{children:' Write it down and symbolically "let it go"'})]})]}),l.jsxs("div",{className:"flex gap-4 justify-center",children:[l.jsx("button",{onClick:S,className:"btn-secondary px-6 py-2",children:"Process Another Worry"}),l.jsx(q,{to:"/chat",className:"btn-primary px-6 py-2",children:"Talk to AMOMA"})]})]})]})}):l.jsx("div",{className:"min-h-screen gradient-green py-12 px-4",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx(q,{to:"/games",className:"text-emerald-600 hover:text-emerald-700 font-medium mb-6 inline-block",children:" Back to Games"}),l.jsxs("div",{className:"card mb-8",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-orange-500 to-amber-600 mx-auto mb-4 flex items-center justify-center text-4xl",children:""}),l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Worry Tree (CBT Tool)"}),l.jsx("p",{className:"text-gray-600",children:"A structured way to manage worries effectively"})]}),e==="input"&&l.jsx(l.Fragment,{children:l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"What's worrying you right now?"}),l.jsx("textarea",{value:r,onChange:A=>s(A.target.value),placeholder:"I'm worried about... (e.g., my upcoming exam, a difficult conversation, my health)",className:"w-full h-32 p-4 border-2 border-gray-200 rounded-xl focus:border-orange-500 focus:outline-none resize-none",maxLength:200}),l.jsxs("div",{className:"flex justify-between items-center mt-2",children:[l.jsxs("span",{className:"text-sm text-gray-500",children:[r.length,"/200 characters"]}),l.jsx("button",{onClick:p,disabled:!r.trim(),className:"btn-primary px-6 py-2",children:"Next "})]})]})}),e==="control"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-orange-50 rounded-xl p-6 mb-6",children:[l.jsx("h3",{className:"font-bold text-lg mb-2 text-gray-900",children:"Your Worry:"}),l.jsxs("p",{className:"text-gray-700 italic mb-4",children:['"',r,'"']})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-4 text-center",children:"Can you do something about this worry right now?"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("button",{onClick:()=>g("yes"),className:"p-6 border-2 border-green-500 rounded-xl hover:bg-green-50 transition-all",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("p",{className:"font-bold text-gray-900",children:"Yes, I can"}),l.jsx("p",{className:"text-sm text-gray-600",children:"There's an action I can take"})]}),l.jsxs("button",{onClick:()=>g("no"),className:"p-6 border-2 border-blue-500 rounded-xl hover:bg-blue-50 transition-all",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("p",{className:"font-bold text-gray-900",children:"No, I can't"}),l.jsx("p",{className:"text-sm text-gray-600",children:"It's outside my control"})]})]})]})]}),e==="action"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-orange-50 rounded-xl p-6 mb-6",children:[l.jsx("h3",{className:"font-bold text-lg mb-2 text-gray-900",children:"Your Worry:"}),l.jsxs("p",{className:"text-gray-700 italic",children:['"',r,'"']})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"What specific action can you take to address this worry?"}),l.jsx("textarea",{value:c,onChange:A=>u(A.target.value),placeholder:"I will... (e.g., study for 30 minutes today, schedule that conversation, make a doctor's appointment)",className:"w-full h-32 p-4 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:outline-none resize-none",maxLength:200}),l.jsxs("div",{className:"flex justify-between items-center mt-2",children:[l.jsxs("span",{className:"text-sm text-gray-500",children:[c.length,"/200 characters"]}),l.jsx("button",{onClick:_,disabled:!c.trim(),className:"btn-primary px-6 py-2",children:"Create Action Plan"})]})]})]})]}),l.jsxs("div",{className:"card bg-orange-50",children:[l.jsx("h3",{className:"font-bold text-lg mb-2 text-orange-900",children:" How the Worry Tree Works"}),l.jsx("p",{className:"text-gray-700 text-sm mb-3",children:"The Worry Tree is a cognitive behavioral therapy (CBT) technique that helps you:"}),l.jsxs("ul",{className:"text-gray-700 space-y-1 text-sm",children:[l.jsx("li",{children:" Distinguish between productive and unproductive worry"}),l.jsx("li",{children:" Focus energy on problems you can solve"}),l.jsx("li",{children:" Let go of things outside your control"}),l.jsx("li",{children:" Reduce rumination and anxiety"})]})]})]})})}function qP(){const{user:t}=ht(),[e,n]=O.useState(0),[r,s]=O.useState(""),[i,o]=O.useState(!1),[c,u]=O.useState(!1),d=[{part:"Feet & Toes",emoji:"",instruction:"Focus on your feet and toes. Notice any tension, warmth, or sensations. Wiggle your toes gently.",duration:"30 seconds"},{part:"Legs",emoji:"",instruction:"Bring awareness to your calves and thighs. Feel them relax and sink into your chair or bed.",duration:"30 seconds"},{part:"Stomach & Back",emoji:"",instruction:"Notice your abdomen rising and falling with each breath. Feel your lower back supported.",duration:"30 seconds"},{part:"Chest & Shoulders",emoji:"",instruction:"Feel your chest expand with each breath. Let your shoulders drop away from your ears.",duration:"30 seconds"},{part:"Arms & Hands",emoji:"",instruction:"Scan down your arms to your fingertips. Release any tension you find. Let your hands rest.",duration:"30 seconds"},{part:"Neck & Face",emoji:"",instruction:"Relax your jaw. Soften your forehead. Feel the tension melt from your neck and face.",duration:"30 seconds"},{part:"Whole Body",emoji:"",instruction:"Take a moment to feel your whole body relaxed and peaceful. Notice how different you feel.",duration:"30 seconds"}],m=()=>{e<d.length-1?n(e+1):o(!0)},p=async()=>{if(r.trim()){try{await Er(kt(jt,"gameEntries"),{userId:t.uid,game:"body-scan",reflection:r,createdAt:new Date})}catch(S){console.error("Error saving:",S)}u(!0)}};if(c)return l.jsx("div",{className:"min-h-screen gradient-green py-12 px-4",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx(q,{to:"/games",className:"text-emerald-600 hover:text-emerald-700 font-medium mb-6 inline-block",children:" Back to Games"}),l.jsxs("div",{className:"card text-center",children:[l.jsx("div",{className:"text-6xl mb-6",children:""}),l.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Body Scan Complete!"}),l.jsx("p",{className:"text-gray-700 mb-6 max-w-2xl mx-auto",children:"Great work! Body scan meditation helps reduce stress, improve body awareness, and promote deep relaxation. Regular practice can improve sleep and reduce chronic pain."}),l.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-6 mb-6 max-w-2xl mx-auto",children:[l.jsx("h3",{className:"font-bold text-lg mb-2 text-green-900",children:"Your Reflection:"}),l.jsxs("p",{className:"text-gray-700 italic",children:['"',r,'"']})]}),l.jsxs("div",{className:"flex gap-4 justify-center",children:[l.jsx("button",{onClick:()=>{n(0),s(""),o(!1),u(!1)},className:"btn-secondary px-6 py-2",children:"Practice Again"}),l.jsx(q,{to:"/games",className:"btn-primary px-6 py-2",children:"Play Another Game"})]})]})]})});if(i)return l.jsx("div",{className:"min-h-screen gradient-green py-12 px-4",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx(q,{to:"/games",className:"text-emerald-600 hover:text-emerald-700 font-medium mb-6 inline-block",children:" Back to Games"}),l.jsxs("div",{className:"card",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Complete!"}),l.jsx("p",{className:"text-gray-600",children:"Take a moment to feel your whole body relaxed and peaceful."})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"How do you feel after the body scan journey?"}),l.jsx("textarea",{value:r,onChange:S=>s(S.target.value),placeholder:"I feel... (e.g., more relaxed, calmer, less tense in my shoulders)",className:"w-full h-32 p-4 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:outline-none resize-none",maxLength:200}),l.jsxs("div",{className:"flex justify-between items-center mt-2",children:[l.jsxs("span",{className:"text-sm text-gray-500",children:[r.length,"/200 characters"]}),l.jsx("button",{onClick:p,disabled:!r.trim(),className:"btn-primary px-6 py-2",children:"Complete Practice"})]})]})]})]})});const g=(e+1)/d.length*100,_=d[e];return l.jsx("div",{className:"min-h-screen gradient-green py-12 px-4",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx(q,{to:"/games",className:"text-emerald-600 hover:text-emerald-700 font-medium mb-6 inline-block",children:" Back to Games"}),l.jsxs("div",{className:"card mb-8",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-green-500 to-emerald-600 mx-auto mb-4 flex items-center justify-center text-4xl",children:""}),l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Body Scan Meditation"}),l.jsx("p",{className:"text-gray-600",children:"Progressive relaxation from feet to head"})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[l.jsx("span",{children:"Progress"}),l.jsxs("span",{children:["Step ",e+1," of ",d.length]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:l.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 h-3 rounded-full transition-all duration-500",style:{width:`${g}%`}})})]})]}),l.jsxs("div",{className:"card bg-gradient-to-br from-green-50 to-emerald-50 mb-6",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"text-7xl mb-4",children:_.emoji}),l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:_.part}),l.jsx("p",{className:"text-sm text-gray-600 mb-4",children:_.duration})]}),l.jsx("div",{className:"bg-white rounded-xl p-6 mb-6",children:l.jsx("p",{className:"text-lg text-gray-700 leading-relaxed text-center",children:_.instruction})}),l.jsx("div",{className:"text-center",children:l.jsx("button",{onClick:m,className:"btn-primary px-12 py-4 text-lg",children:e<d.length-1?"Next ":"Complete"})})]}),l.jsxs("div",{className:"card bg-green-50",children:[l.jsx("h3",{className:"font-bold text-lg mb-2 text-green-900",children:" Body Scan Benefits"}),l.jsxs("ul",{className:"text-gray-700 space-y-1 text-sm",children:[l.jsx("li",{children:" Reduces physical tension and stress"}),l.jsx("li",{children:" Improves body awareness and mindfulness"}),l.jsx("li",{children:" Helps with sleep and relaxation"}),l.jsx("li",{children:" Can reduce chronic pain perception"})]})]})]})})}function GP(){const t=[{id:"gratitude",title:" Gratitude Garden",desc:"Plant gratitude to grow your inner garden",path:"/games/gratitude",color:"from-pink-500 to-rose-600"},{id:"mandala",title:" Mood Mandala",desc:"Color your emotions through art",path:"/games/mandala",color:"from-purple-500 to-indigo-600"},{id:"breathing",title:" Breathing Bubble",desc:"Practice mindful breathing exercises",path:"/games/breathing",color:"from-blue-500 to-cyan-600"},{id:"body-scan",title:" Body Scan Journey",desc:"Progressive relaxation from feet to head",path:"/games/body-scan",color:"from-green-500 to-emerald-600"},{id:"worry",title:" Worry Tree",desc:"Sort your worries using CBT techniques",path:"/games/worry",color:"from-orange-500 to-amber-600"}];return l.jsx("div",{className:"min-h-screen gradient-green py-12 px-4",children:l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h1",{className:"text-4xl font-bold text-center text-gray-900 mb-4",children:"Wellness Games"}),l.jsx("p",{className:"text-center text-gray-700 mb-12",children:"Evidence-based therapeutic games to support your mental health journey"}),l.jsx("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:t.map(e=>l.jsxs(q,{to:e.path,className:"card text-center hover:shadow-2xl transition-all transform hover:scale-105",children:[l.jsx("div",{className:`w-20 h-20 rounded-full bg-gradient-to-br ${e.color} mx-auto mb-4 flex items-center justify-center text-4xl shadow-lg`,children:e.title.split(" ")[0]}),l.jsx("h3",{className:"text-xl font-bold mb-2",children:e.title.slice(3)}),l.jsx("p",{className:"text-gray-600 mb-4",children:e.desc}),l.jsx("span",{className:"text-emerald-600 font-semibold",children:"Play Now "})]},e.id))}),l.jsxs("div",{className:"card bg-emerald-50 border-2 border-emerald-200",children:[l.jsx("h3",{className:"font-bold text-lg mb-2 text-emerald-800",children:" Why Play Wellness Games?"}),l.jsx("p",{className:"text-gray-700",children:"These games are designed by mental health professionals to help reduce stress, practice mindfulness, and build emotional resilience through engaging, evidence-based activities."})]})]})})}function KP(){return l.jsxs(tf,{children:[l.jsx(Te,{path:"/",element:l.jsx(GP,{})}),l.jsx(Te,{path:"/gratitude",element:l.jsx(zP,{})}),l.jsx(Te,{path:"/mandala",element:l.jsx($P,{})}),l.jsx(Te,{path:"/breathing",element:l.jsx(WP,{})}),l.jsx(Te,{path:"/body-scan",element:l.jsx(qP,{})}),l.jsx(Te,{path:"/worry",element:l.jsx(HP,{})})]})}function Ci({children:t}){const{user:e}=ht();return e?t:l.jsx(rb,{to:"/login"})}function QP(){return l.jsx(db,{children:l.jsxs("div",{className:"flex flex-col min-h-screen",children:[l.jsx(EP,{}),l.jsx("main",{className:"flex-grow",children:l.jsxs(tf,{children:[l.jsx(Te,{path:"/",element:l.jsx(TP,{})}),l.jsx(Te,{path:"/about",element:l.jsx(bP,{})}),l.jsx(Te,{path:"/features",element:l.jsx(NP,{})}),l.jsx(Te,{path:"/resources",element:l.jsx(SP,{})}),l.jsx(Te,{path:"/login",element:l.jsx(AP,{})}),l.jsx(Te,{path:"/signup",element:l.jsx(CP,{})}),l.jsx(Te,{path:"/dashboard",element:l.jsx(Ci,{children:l.jsx(RP,{})})}),l.jsx(Te,{path:"/chat",element:l.jsx(Ci,{children:l.jsx(jP,{})})}),l.jsx(Te,{path:"/assessments/*",element:l.jsx(Ci,{children:l.jsx(UP,{})})}),l.jsx(Te,{path:"/journal",element:l.jsx(Ci,{children:l.jsx(BP,{})})}),l.jsx(Te,{path:"/games/*",element:l.jsx(Ci,{children:l.jsx(KP,{})})})]})}),l.jsx(IP,{})]})})}function YP(){return l.jsx(wP,{children:l.jsx(QP,{})})}Vu.createRoot(document.getElementById("root")).render(l.jsx(My.StrictMode,{children:l.jsx(YP,{})}));
